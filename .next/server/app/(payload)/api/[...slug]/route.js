/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/(payload)/api/[...slug]/route";
exports.ids = ["app/(payload)/api/[...slug]/route"];
exports.modules = {

/***/ "(rsc)/./node_modules/.pnpm/next@15.5.6_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.77.4/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2F(payload)%2Fapi%2F%5B...slug%5D%2Froute&page=%2F(payload)%2Fapi%2F%5B...slug%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2F(payload)%2Fapi%2F%5B...slug%5D%2Froute.ts&appDir=%2Fhome%2Fmildfire%2Frepos%2FAADS%2Fexample-payload%2Fmulti-tenant-example%2Fmulti-tenant-example%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fmildfire%2Frepos%2FAADS%2Fexample-payload%2Fmulti-tenant-example%2Fmulti-tenant-example&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!":
/*!*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/next@15.5.6_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.77.4/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2F(payload)%2Fapi%2F%5B...slug%5D%2Froute&page=%2F(payload)%2Fapi%2F%5B...slug%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2F(payload)%2Fapi%2F%5B...slug%5D%2Froute.ts&appDir=%2Fhome%2Fmildfire%2Frepos%2FAADS%2Fexample-payload%2Fmulti-tenant-example%2Fmulti-tenant-example%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fmildfire%2Frepos%2FAADS%2Fexample-payload%2Fmulti-tenant-example%2Fmulti-tenant-example&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=! ***!
  \*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   handler: () => (/* binding */ handler),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/.pnpm/next@15.5.6_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.77.4/node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/.pnpm/next@15.5.6_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.77.4/node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/.pnpm/next@15.5.6_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.77.4/node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/dist/server/request-meta */ \"(rsc)/./node_modules/.pnpm/next@15.5.6_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.77.4/node_modules/next/dist/server/request-meta.js\");\n/* harmony import */ var next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! next/dist/server/lib/trace/tracer */ \"(rsc)/./node_modules/.pnpm/next@15.5.6_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.77.4/node_modules/next/dist/server/lib/trace/tracer.js\");\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! next/dist/shared/lib/router/utils/app-paths */ \"next/dist/shared/lib/router/utils/app-paths\");\n/* harmony import */ var next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! next/dist/server/base-http/node */ \"(rsc)/./node_modules/.pnpm/next@15.5.6_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.77.4/node_modules/next/dist/server/base-http/node.js\");\n/* harmony import */ var next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! next/dist/server/web/spec-extension/adapters/next-request */ \"(rsc)/./node_modules/.pnpm/next@15.5.6_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.77.4/node_modules/next/dist/server/web/spec-extension/adapters/next-request.js\");\n/* harmony import */ var next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! next/dist/server/lib/trace/constants */ \"(rsc)/./node_modules/.pnpm/next@15.5.6_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.77.4/node_modules/next/dist/server/lib/trace/constants.js\");\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! next/dist/server/instrumentation/utils */ \"(rsc)/./node_modules/.pnpm/next@15.5.6_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.77.4/node_modules/next/dist/server/instrumentation/utils.js\");\n/* harmony import */ var next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! next/dist/server/send-response */ \"(rsc)/./node_modules/.pnpm/next@15.5.6_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.77.4/node_modules/next/dist/server/send-response.js\");\n/* harmony import */ var next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! next/dist/server/web/utils */ \"(rsc)/./node_modules/.pnpm/next@15.5.6_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.77.4/node_modules/next/dist/server/web/utils.js\");\n/* harmony import */ var next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__);\n/* harmony import */ var next_dist_server_lib_cache_control__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! next/dist/server/lib/cache-control */ \"(rsc)/./node_modules/.pnpm/next@15.5.6_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.77.4/node_modules/next/dist/server/lib/cache-control.js\");\n/* harmony import */ var next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! next/dist/lib/constants */ \"(rsc)/./node_modules/.pnpm/next@15.5.6_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.77.4/node_modules/next/dist/lib/constants.js\");\n/* harmony import */ var next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__);\n/* harmony import */ var next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! next/dist/shared/lib/no-fallback-error.external */ \"next/dist/shared/lib/no-fallback-error.external\");\n/* harmony import */ var next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__);\n/* harmony import */ var next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! next/dist/server/response-cache */ \"(rsc)/./node_modules/.pnpm/next@15.5.6_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.77.4/node_modules/next/dist/server/response-cache/index.js\");\n/* harmony import */ var next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__);\n/* harmony import */ var _home_mildfire_repos_AADS_example_payload_multi_tenant_example_multi_tenant_example_src_app_payload_api_slug_route_ts__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./src/app/(payload)/api/[...slug]/route.ts */ \"(rsc)/./src/app/(payload)/api/[...slug]/route.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_home_mildfire_repos_AADS_example_payload_multi_tenant_example_multi_tenant_example_src_app_payload_api_slug_route_ts__WEBPACK_IMPORTED_MODULE_16__]);\n_home_mildfire_repos_AADS_example_payload_multi_tenant_example_multi_tenant_example_src_app_payload_api_slug_route_ts__WEBPACK_IMPORTED_MODULE_16__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/(payload)/api/[...slug]/route\",\n        pathname: \"/api/[...slug]\",\n        filename: \"route\",\n        bundlePath: \"app/(payload)/api/[...slug]/route\"\n    },\n    distDir: \".next\" || 0,\n    relativeProjectDir:  false || '',\n    resolvedPagePath: \"/home/mildfire/repos/AADS/example-payload/multi-tenant-example/multi-tenant-example/src/app/(payload)/api/[...slug]/route.ts\",\n    nextConfigOutput,\n    userland: _home_mildfire_repos_AADS_example_payload_multi_tenant_example_multi_tenant_example_src_app_payload_api_slug_route_ts__WEBPACK_IMPORTED_MODULE_16__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\nasync function handler(req, res, ctx) {\n    var _nextConfig_experimental;\n    let srcPage = \"/(payload)/api/[...slug]/route\";\n    // turbopack doesn't normalize `/index` in the page name\n    // so we need to to process dynamic routes properly\n    // TODO: fix turbopack providing differing value from webpack\n    if (false) {} else if (srcPage === '/index') {\n        // we always normalize /index specifically\n        srcPage = '/';\n    }\n    const multiZoneDraftMode = false;\n    const prepareResult = await routeModule.prepare(req, res, {\n        srcPage,\n        multiZoneDraftMode\n    });\n    if (!prepareResult) {\n        res.statusCode = 400;\n        res.end('Bad Request');\n        ctx.waitUntil == null ? void 0 : ctx.waitUntil.call(ctx, Promise.resolve());\n        return null;\n    }\n    const { buildId, params, nextConfig, isDraftMode, prerenderManifest, routerServerContext, isOnDemandRevalidate, revalidateOnlyGenerated, resolvedPathname } = prepareResult;\n    const normalizedSrcPage = (0,next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5__.normalizeAppPath)(srcPage);\n    let isIsr = Boolean(prerenderManifest.dynamicRoutes[normalizedSrcPage] || prerenderManifest.routes[resolvedPathname]);\n    if (isIsr && !isDraftMode) {\n        const isPrerendered = Boolean(prerenderManifest.routes[resolvedPathname]);\n        const prerenderInfo = prerenderManifest.dynamicRoutes[normalizedSrcPage];\n        if (prerenderInfo) {\n            if (prerenderInfo.fallback === false && !isPrerendered) {\n                throw new next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__.NoFallbackError();\n            }\n        }\n    }\n    let cacheKey = null;\n    if (isIsr && !routeModule.isDev && !isDraftMode) {\n        cacheKey = resolvedPathname;\n        // ensure /index and / is normalized to one key\n        cacheKey = cacheKey === '/index' ? '/' : cacheKey;\n    }\n    const supportsDynamicResponse = // If we're in development, we always support dynamic HTML\n    routeModule.isDev === true || // If this is not SSG or does not have static paths, then it supports\n    // dynamic HTML.\n    !isIsr;\n    // This is a revalidation request if the request is for a static\n    // page and it is not being resumed from a postponed render and\n    // it is not a dynamic RSC request then it is a revalidation\n    // request.\n    const isRevalidate = isIsr && !supportsDynamicResponse;\n    const method = req.method || 'GET';\n    const tracer = (0,next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__.getTracer)();\n    const activeSpan = tracer.getActiveScopeSpan();\n    const context = {\n        params,\n        prerenderManifest,\n        renderOpts: {\n            experimental: {\n                cacheComponents: Boolean(nextConfig.experimental.cacheComponents),\n                authInterrupts: Boolean(nextConfig.experimental.authInterrupts)\n            },\n            supportsDynamicResponse,\n            incrementalCache: (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'incrementalCache'),\n            cacheLifeProfiles: (_nextConfig_experimental = nextConfig.experimental) == null ? void 0 : _nextConfig_experimental.cacheLife,\n            isRevalidate,\n            waitUntil: ctx.waitUntil,\n            onClose: (cb)=>{\n                res.on('close', cb);\n            },\n            onAfterTaskError: undefined,\n            onInstrumentationRequestError: (error, _request, errorContext)=>routeModule.onRequestError(req, error, errorContext, routerServerContext)\n        },\n        sharedContext: {\n            buildId\n        }\n    };\n    const nodeNextReq = new next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__.NodeNextRequest(req);\n    const nodeNextRes = new next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__.NodeNextResponse(res);\n    const nextReq = next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__.NextRequestAdapter.fromNodeNextRequest(nodeNextReq, (0,next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__.signalFromNodeResponse)(res));\n    try {\n        const invokeRouteModule = async (span)=>{\n            return routeModule.handle(nextReq, context).finally(()=>{\n                if (!span) return;\n                span.setAttributes({\n                    'http.status_code': res.statusCode,\n                    'next.rsc': false\n                });\n                const rootSpanAttributes = tracer.getRootSpanAttributes();\n                // We were unable to get attributes, probably OTEL is not enabled\n                if (!rootSpanAttributes) {\n                    return;\n                }\n                if (rootSpanAttributes.get('next.span_type') !== next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__.BaseServerSpan.handleRequest) {\n                    console.warn(`Unexpected root span type '${rootSpanAttributes.get('next.span_type')}'. Please report this Next.js issue https://github.com/vercel/next.js`);\n                    return;\n                }\n                const route = rootSpanAttributes.get('next.route');\n                if (route) {\n                    const name = `${method} ${route}`;\n                    span.setAttributes({\n                        'next.route': route,\n                        'http.route': route,\n                        'next.span_name': name\n                    });\n                    span.updateName(name);\n                } else {\n                    span.updateName(`${method} ${req.url}`);\n                }\n            });\n        };\n        const handleResponse = async (currentSpan)=>{\n            var _cacheEntry_value;\n            const responseGenerator = async ({ previousCacheEntry })=>{\n                try {\n                    if (!(0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'minimalMode') && isOnDemandRevalidate && revalidateOnlyGenerated && !previousCacheEntry) {\n                        res.statusCode = 404;\n                        // on-demand revalidate always sets this header\n                        res.setHeader('x-nextjs-cache', 'REVALIDATED');\n                        res.end('This page could not be found');\n                        return null;\n                    }\n                    const response = await invokeRouteModule(currentSpan);\n                    req.fetchMetrics = context.renderOpts.fetchMetrics;\n                    let pendingWaitUntil = context.renderOpts.pendingWaitUntil;\n                    // Attempt using provided waitUntil if available\n                    // if it's not we fallback to sendResponse's handling\n                    if (pendingWaitUntil) {\n                        if (ctx.waitUntil) {\n                            ctx.waitUntil(pendingWaitUntil);\n                            pendingWaitUntil = undefined;\n                        }\n                    }\n                    const cacheTags = context.renderOpts.collectedTags;\n                    // If the request is for a static response, we can cache it so long\n                    // as it's not edge.\n                    if (isIsr) {\n                        const blob = await response.blob();\n                        // Copy the headers from the response.\n                        const headers = (0,next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__.toNodeOutgoingHttpHeaders)(response.headers);\n                        if (cacheTags) {\n                            headers[next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.NEXT_CACHE_TAGS_HEADER] = cacheTags;\n                        }\n                        if (!headers['content-type'] && blob.type) {\n                            headers['content-type'] = blob.type;\n                        }\n                        const revalidate = typeof context.renderOpts.collectedRevalidate === 'undefined' || context.renderOpts.collectedRevalidate >= next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.INFINITE_CACHE ? false : context.renderOpts.collectedRevalidate;\n                        const expire = typeof context.renderOpts.collectedExpire === 'undefined' || context.renderOpts.collectedExpire >= next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.INFINITE_CACHE ? undefined : context.renderOpts.collectedExpire;\n                        // Create the cache entry for the response.\n                        const cacheEntry = {\n                            value: {\n                                kind: next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__.CachedRouteKind.APP_ROUTE,\n                                status: response.status,\n                                body: Buffer.from(await blob.arrayBuffer()),\n                                headers\n                            },\n                            cacheControl: {\n                                revalidate,\n                                expire\n                            }\n                        };\n                        return cacheEntry;\n                    } else {\n                        // send response without caching if not ISR\n                        await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__.sendResponse)(nodeNextReq, nodeNextRes, response, context.renderOpts.pendingWaitUntil);\n                        return null;\n                    }\n                } catch (err) {\n                    // if this is a background revalidate we need to report\n                    // the request error here as it won't be bubbled\n                    if (previousCacheEntry == null ? void 0 : previousCacheEntry.isStale) {\n                        await routeModule.onRequestError(req, err, {\n                            routerKind: 'App Router',\n                            routePath: srcPage,\n                            routeType: 'route',\n                            revalidateReason: (0,next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_9__.getRevalidateReason)({\n                                isRevalidate,\n                                isOnDemandRevalidate\n                            })\n                        }, routerServerContext);\n                    }\n                    throw err;\n                }\n            };\n            const cacheEntry = await routeModule.handleResponse({\n                req,\n                nextConfig,\n                cacheKey,\n                routeKind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n                isFallback: false,\n                prerenderManifest,\n                isRoutePPREnabled: false,\n                isOnDemandRevalidate,\n                revalidateOnlyGenerated,\n                responseGenerator,\n                waitUntil: ctx.waitUntil\n            });\n            // we don't create a cacheEntry for ISR\n            if (!isIsr) {\n                return null;\n            }\n            if ((cacheEntry == null ? void 0 : (_cacheEntry_value = cacheEntry.value) == null ? void 0 : _cacheEntry_value.kind) !== next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__.CachedRouteKind.APP_ROUTE) {\n                var _cacheEntry_value1;\n                throw Object.defineProperty(new Error(`Invariant: app-route received invalid cache entry ${cacheEntry == null ? void 0 : (_cacheEntry_value1 = cacheEntry.value) == null ? void 0 : _cacheEntry_value1.kind}`), \"__NEXT_ERROR_CODE\", {\n                    value: \"E701\",\n                    enumerable: false,\n                    configurable: true\n                });\n            }\n            if (!(0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'minimalMode')) {\n                res.setHeader('x-nextjs-cache', isOnDemandRevalidate ? 'REVALIDATED' : cacheEntry.isMiss ? 'MISS' : cacheEntry.isStale ? 'STALE' : 'HIT');\n            }\n            // Draft mode should never be cached\n            if (isDraftMode) {\n                res.setHeader('Cache-Control', 'private, no-cache, no-store, max-age=0, must-revalidate');\n            }\n            const headers = (0,next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__.fromNodeOutgoingHttpHeaders)(cacheEntry.value.headers);\n            if (!((0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'minimalMode') && isIsr)) {\n                headers.delete(next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.NEXT_CACHE_TAGS_HEADER);\n            }\n            // If cache control is already set on the response we don't\n            // override it to allow users to customize it via next.config\n            if (cacheEntry.cacheControl && !res.getHeader('Cache-Control') && !headers.get('Cache-Control')) {\n                headers.set('Cache-Control', (0,next_dist_server_lib_cache_control__WEBPACK_IMPORTED_MODULE_12__.getCacheControlHeader)(cacheEntry.cacheControl));\n            }\n            await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__.sendResponse)(nodeNextReq, nodeNextRes, new Response(cacheEntry.value.body, {\n                headers,\n                status: cacheEntry.value.status || 200\n            }));\n            return null;\n        };\n        // TODO: activeSpan code path is for when wrapped by\n        // next-server can be removed when this is no longer used\n        if (activeSpan) {\n            await handleResponse(activeSpan);\n        } else {\n            await tracer.withPropagatedContext(req.headers, ()=>tracer.trace(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__.BaseServerSpan.handleRequest, {\n                    spanName: `${method} ${req.url}`,\n                    kind: next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__.SpanKind.SERVER,\n                    attributes: {\n                        'http.method': method,\n                        'http.target': req.url\n                    }\n                }, handleResponse));\n        }\n    } catch (err) {\n        if (!(err instanceof next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__.NoFallbackError)) {\n            await routeModule.onRequestError(req, err, {\n                routerKind: 'App Router',\n                routePath: normalizedSrcPage,\n                routeType: 'route',\n                revalidateReason: (0,next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_9__.getRevalidateReason)({\n                    isRevalidate,\n                    isOnDemandRevalidate\n                })\n            });\n        }\n        // rethrow so that we can handle serving error page\n        // If this is during static generation, throw the error again.\n        if (isIsr) throw err;\n        // Otherwise, send a 500 response.\n        await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__.sendResponse)(nodeNextReq, nodeNextRes, new Response(null, {\n            status: 500\n        }));\n        return null;\n    }\n}\n\n//# sourceMappingURL=app-route.js.map\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vbmV4dEAxNS41LjZfcmVhY3QtZG9tQDE5LjAuMF9yZWFjdEAxOS4wLjBfX3JlYWN0QDE5LjAuMF9zYXNzQDEuNzcuNC9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkYocGF5bG9hZCklMkZhcGklMkYlNUIuLi5zbHVnJTVEJTJGcm91dGUmcGFnZT0lMkYocGF5bG9hZCklMkZhcGklMkYlNUIuLi5zbHVnJTVEJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGKHBheWxvYWQpJTJGYXBpJTJGJTVCLi4uc2x1ZyU1RCUyRnJvdXRlLnRzJmFwcERpcj0lMkZob21lJTJGbWlsZGZpcmUlMkZyZXBvcyUyRkFBRFMlMkZleGFtcGxlLXBheWxvYWQlMkZtdWx0aS10ZW5hbnQtZXhhbXBsZSUyRm11bHRpLXRlbmFudC1leGFtcGxlJTJGc3JjJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZob21lJTJGbWlsZGZpcmUlMkZyZXBvcyUyRkFBRFMlMkZleGFtcGxlLXBheWxvYWQlMkZtdWx0aS10ZW5hbnQtZXhhbXBsZSUyRm11bHRpLXRlbmFudC1leGFtcGxlJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEJmlzR2xvYmFsTm90Rm91bmRFbmFibGVkPSEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBK0Y7QUFDdkM7QUFDcUI7QUFDZDtBQUNTO0FBQ087QUFDSztBQUNtQztBQUNqRDtBQUNPO0FBQ2Y7QUFDc0M7QUFDekI7QUFDTTtBQUNDO0FBQ2hCO0FBQ3VGO0FBQ3pKO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qix5R0FBbUI7QUFDM0M7QUFDQSxjQUFjLGtFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLGFBQWEsT0FBb0MsSUFBSSxDQUFFO0FBQ3ZELHdCQUF3QixNQUF1QztBQUMvRDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLHNEQUFzRDtBQUM5RDtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUMwRjtBQUNuRjtBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLEtBQXFCLEVBQUUsRUFFMUIsQ0FBQztBQUNOO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixLQUF3QztBQUN2RTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxvSkFBb0o7QUFDaEssOEJBQThCLDZGQUFnQjtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsNkZBQWU7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsNEVBQVM7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLDhCQUE4Qiw2RUFBYztBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsNEVBQWU7QUFDM0MsNEJBQTRCLDZFQUFnQjtBQUM1QyxvQkFBb0IseUdBQWtCLGtDQUFrQyxpSEFBc0I7QUFDOUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlFQUFpRSxnRkFBYztBQUMvRSwrREFBK0QseUNBQXlDO0FBQ3hHO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLFFBQVEsRUFBRSxNQUFNO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0Esa0JBQWtCO0FBQ2xCLHVDQUF1QyxRQUFRLEVBQUUsUUFBUTtBQUN6RDtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0Msb0JBQW9CO0FBQ25FO0FBQ0EseUJBQXlCLDZFQUFjO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0Msc0ZBQXlCO0FBQ2pFO0FBQ0Esb0NBQW9DLDRFQUFzQjtBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNKQUFzSixvRUFBYztBQUNwSywwSUFBMEksb0VBQWM7QUFDeEo7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDLDZFQUFlO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0I7QUFDdEI7QUFDQSw4QkFBOEIsNkVBQVk7QUFDMUM7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE4QywyRkFBbUI7QUFDakU7QUFDQTtBQUNBLDZCQUE2QjtBQUM3Qix5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixrRUFBUztBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFJQUFxSSw2RUFBZTtBQUNwSjtBQUNBLDJHQUEyRyxpSEFBaUg7QUFDNU47QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsaUJBQWlCLDZFQUFjO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0Qix3RkFBMkI7QUFDdkQsa0JBQWtCLDZFQUFjO0FBQ2hDLCtCQUErQiw0RUFBc0I7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkMsMEZBQXFCO0FBQ2xFO0FBQ0Esa0JBQWtCLDZFQUFZO0FBQzlCO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWLDZFQUE2RSxnRkFBYztBQUMzRixpQ0FBaUMsUUFBUSxFQUFFLFFBQVE7QUFDbkQsMEJBQTBCLHVFQUFRO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsTUFBTTtBQUNOLDZCQUE2Qiw2RkFBZTtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQywyRkFBbUI7QUFDckQ7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsNkVBQVk7QUFDMUI7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBOztBQUVBIiwic291cmNlcyI6WyIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0IHsgZ2V0UmVxdWVzdE1ldGEgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yZXF1ZXN0LW1ldGFcIjtcbmltcG9ydCB7IGdldFRyYWNlciwgU3BhbktpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvdHJhY2UvdHJhY2VyXCI7XG5pbXBvcnQgeyBub3JtYWxpemVBcHBQYXRoIH0gZnJvbSBcIm5leHQvZGlzdC9zaGFyZWQvbGliL3JvdXRlci91dGlscy9hcHAtcGF0aHNcIjtcbmltcG9ydCB7IE5vZGVOZXh0UmVxdWVzdCwgTm9kZU5leHRSZXNwb25zZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Jhc2UtaHR0cC9ub2RlXCI7XG5pbXBvcnQgeyBOZXh0UmVxdWVzdEFkYXB0ZXIsIHNpZ25hbEZyb21Ob2RlUmVzcG9uc2UgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci93ZWIvc3BlYy1leHRlbnNpb24vYWRhcHRlcnMvbmV4dC1yZXF1ZXN0XCI7XG5pbXBvcnQgeyBCYXNlU2VydmVyU3BhbiB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi90cmFjZS9jb25zdGFudHNcIjtcbmltcG9ydCB7IGdldFJldmFsaWRhdGVSZWFzb24gfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9pbnN0cnVtZW50YXRpb24vdXRpbHNcIjtcbmltcG9ydCB7IHNlbmRSZXNwb25zZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3NlbmQtcmVzcG9uc2VcIjtcbmltcG9ydCB7IGZyb21Ob2RlT3V0Z29pbmdIdHRwSGVhZGVycywgdG9Ob2RlT3V0Z29pbmdIdHRwSGVhZGVycyB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3dlYi91dGlsc1wiO1xuaW1wb3J0IHsgZ2V0Q2FjaGVDb250cm9sSGVhZGVyIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL2NhY2hlLWNvbnRyb2xcIjtcbmltcG9ydCB7IElORklOSVRFX0NBQ0hFLCBORVhUX0NBQ0hFX1RBR1NfSEVBREVSIH0gZnJvbSBcIm5leHQvZGlzdC9saWIvY29uc3RhbnRzXCI7XG5pbXBvcnQgeyBOb0ZhbGxiYWNrRXJyb3IgfSBmcm9tIFwibmV4dC9kaXN0L3NoYXJlZC9saWIvbm8tZmFsbGJhY2stZXJyb3IuZXh0ZXJuYWxcIjtcbmltcG9ydCB7IENhY2hlZFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3Jlc3BvbnNlLWNhY2hlXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL2hvbWUvbWlsZGZpcmUvcmVwb3MvQUFEUy9leGFtcGxlLXBheWxvYWQvbXVsdGktdGVuYW50LWV4YW1wbGUvbXVsdGktdGVuYW50LWV4YW1wbGUvc3JjL2FwcC8ocGF5bG9hZCkvYXBpL1suLi5zbHVnXS9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi8ocGF5bG9hZCkvYXBpL1suLi5zbHVnXS9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL1suLi5zbHVnXVwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC8ocGF5bG9hZCkvYXBpL1suLi5zbHVnXS9yb3V0ZVwiXG4gICAgfSxcbiAgICBkaXN0RGlyOiBwcm9jZXNzLmVudi5fX05FWFRfUkVMQVRJVkVfRElTVF9ESVIgfHwgJycsXG4gICAgcmVsYXRpdmVQcm9qZWN0RGlyOiBwcm9jZXNzLmVudi5fX05FWFRfUkVMQVRJVkVfUFJPSkVDVF9ESVIgfHwgJycsXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvaG9tZS9taWxkZmlyZS9yZXBvcy9BQURTL2V4YW1wbGUtcGF5bG9hZC9tdWx0aS10ZW5hbnQtZXhhbXBsZS9tdWx0aS10ZW5hbnQtZXhhbXBsZS9zcmMvYXBwLyhwYXlsb2FkKS9hcGkvWy4uLnNsdWddL3JvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgd29ya0FzeW5jU3RvcmFnZSwgd29ya1VuaXRBc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgd29ya0FzeW5jU3RvcmFnZSxcbiAgICAgICAgd29ya1VuaXRBc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCB3b3JrQXN5bmNTdG9yYWdlLCB3b3JrVW5pdEFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIHBhdGNoRmV0Y2gsICB9O1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxLCByZXMsIGN0eCkge1xuICAgIHZhciBfbmV4dENvbmZpZ19leHBlcmltZW50YWw7XG4gICAgbGV0IHNyY1BhZ2UgPSBcIi8ocGF5bG9hZCkvYXBpL1suLi5zbHVnXS9yb3V0ZVwiO1xuICAgIC8vIHR1cmJvcGFjayBkb2Vzbid0IG5vcm1hbGl6ZSBgL2luZGV4YCBpbiB0aGUgcGFnZSBuYW1lXG4gICAgLy8gc28gd2UgbmVlZCB0byB0byBwcm9jZXNzIGR5bmFtaWMgcm91dGVzIHByb3Blcmx5XG4gICAgLy8gVE9ETzogZml4IHR1cmJvcGFjayBwcm92aWRpbmcgZGlmZmVyaW5nIHZhbHVlIGZyb20gd2VicGFja1xuICAgIGlmIChwcm9jZXNzLmVudi5UVVJCT1BBQ0spIHtcbiAgICAgICAgc3JjUGFnZSA9IHNyY1BhZ2UucmVwbGFjZSgvXFwvaW5kZXgkLywgJycpIHx8ICcvJztcbiAgICB9IGVsc2UgaWYgKHNyY1BhZ2UgPT09ICcvaW5kZXgnKSB7XG4gICAgICAgIC8vIHdlIGFsd2F5cyBub3JtYWxpemUgL2luZGV4IHNwZWNpZmljYWxseVxuICAgICAgICBzcmNQYWdlID0gJy8nO1xuICAgIH1cbiAgICBjb25zdCBtdWx0aVpvbmVEcmFmdE1vZGUgPSBwcm9jZXNzLmVudi5fX05FWFRfTVVMVElfWk9ORV9EUkFGVF9NT0RFO1xuICAgIGNvbnN0IHByZXBhcmVSZXN1bHQgPSBhd2FpdCByb3V0ZU1vZHVsZS5wcmVwYXJlKHJlcSwgcmVzLCB7XG4gICAgICAgIHNyY1BhZ2UsXG4gICAgICAgIG11bHRpWm9uZURyYWZ0TW9kZVxuICAgIH0pO1xuICAgIGlmICghcHJlcGFyZVJlc3VsdCkge1xuICAgICAgICByZXMuc3RhdHVzQ29kZSA9IDQwMDtcbiAgICAgICAgcmVzLmVuZCgnQmFkIFJlcXVlc3QnKTtcbiAgICAgICAgY3R4LndhaXRVbnRpbCA9PSBudWxsID8gdm9pZCAwIDogY3R4LndhaXRVbnRpbC5jYWxsKGN0eCwgUHJvbWlzZS5yZXNvbHZlKCkpO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgY29uc3QgeyBidWlsZElkLCBwYXJhbXMsIG5leHRDb25maWcsIGlzRHJhZnRNb2RlLCBwcmVyZW5kZXJNYW5pZmVzdCwgcm91dGVyU2VydmVyQ29udGV4dCwgaXNPbkRlbWFuZFJldmFsaWRhdGUsIHJldmFsaWRhdGVPbmx5R2VuZXJhdGVkLCByZXNvbHZlZFBhdGhuYW1lIH0gPSBwcmVwYXJlUmVzdWx0O1xuICAgIGNvbnN0IG5vcm1hbGl6ZWRTcmNQYWdlID0gbm9ybWFsaXplQXBwUGF0aChzcmNQYWdlKTtcbiAgICBsZXQgaXNJc3IgPSBCb29sZWFuKHByZXJlbmRlck1hbmlmZXN0LmR5bmFtaWNSb3V0ZXNbbm9ybWFsaXplZFNyY1BhZ2VdIHx8IHByZXJlbmRlck1hbmlmZXN0LnJvdXRlc1tyZXNvbHZlZFBhdGhuYW1lXSk7XG4gICAgaWYgKGlzSXNyICYmICFpc0RyYWZ0TW9kZSkge1xuICAgICAgICBjb25zdCBpc1ByZXJlbmRlcmVkID0gQm9vbGVhbihwcmVyZW5kZXJNYW5pZmVzdC5yb3V0ZXNbcmVzb2x2ZWRQYXRobmFtZV0pO1xuICAgICAgICBjb25zdCBwcmVyZW5kZXJJbmZvID0gcHJlcmVuZGVyTWFuaWZlc3QuZHluYW1pY1JvdXRlc1tub3JtYWxpemVkU3JjUGFnZV07XG4gICAgICAgIGlmIChwcmVyZW5kZXJJbmZvKSB7XG4gICAgICAgICAgICBpZiAocHJlcmVuZGVySW5mby5mYWxsYmFjayA9PT0gZmFsc2UgJiYgIWlzUHJlcmVuZGVyZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm9GYWxsYmFja0Vycm9yKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgbGV0IGNhY2hlS2V5ID0gbnVsbDtcbiAgICBpZiAoaXNJc3IgJiYgIXJvdXRlTW9kdWxlLmlzRGV2ICYmICFpc0RyYWZ0TW9kZSkge1xuICAgICAgICBjYWNoZUtleSA9IHJlc29sdmVkUGF0aG5hbWU7XG4gICAgICAgIC8vIGVuc3VyZSAvaW5kZXggYW5kIC8gaXMgbm9ybWFsaXplZCB0byBvbmUga2V5XG4gICAgICAgIGNhY2hlS2V5ID0gY2FjaGVLZXkgPT09ICcvaW5kZXgnID8gJy8nIDogY2FjaGVLZXk7XG4gICAgfVxuICAgIGNvbnN0IHN1cHBvcnRzRHluYW1pY1Jlc3BvbnNlID0gLy8gSWYgd2UncmUgaW4gZGV2ZWxvcG1lbnQsIHdlIGFsd2F5cyBzdXBwb3J0IGR5bmFtaWMgSFRNTFxuICAgIHJvdXRlTW9kdWxlLmlzRGV2ID09PSB0cnVlIHx8IC8vIElmIHRoaXMgaXMgbm90IFNTRyBvciBkb2VzIG5vdCBoYXZlIHN0YXRpYyBwYXRocywgdGhlbiBpdCBzdXBwb3J0c1xuICAgIC8vIGR5bmFtaWMgSFRNTC5cbiAgICAhaXNJc3I7XG4gICAgLy8gVGhpcyBpcyBhIHJldmFsaWRhdGlvbiByZXF1ZXN0IGlmIHRoZSByZXF1ZXN0IGlzIGZvciBhIHN0YXRpY1xuICAgIC8vIHBhZ2UgYW5kIGl0IGlzIG5vdCBiZWluZyByZXN1bWVkIGZyb20gYSBwb3N0cG9uZWQgcmVuZGVyIGFuZFxuICAgIC8vIGl0IGlzIG5vdCBhIGR5bmFtaWMgUlNDIHJlcXVlc3QgdGhlbiBpdCBpcyBhIHJldmFsaWRhdGlvblxuICAgIC8vIHJlcXVlc3QuXG4gICAgY29uc3QgaXNSZXZhbGlkYXRlID0gaXNJc3IgJiYgIXN1cHBvcnRzRHluYW1pY1Jlc3BvbnNlO1xuICAgIGNvbnN0IG1ldGhvZCA9IHJlcS5tZXRob2QgfHwgJ0dFVCc7XG4gICAgY29uc3QgdHJhY2VyID0gZ2V0VHJhY2VyKCk7XG4gICAgY29uc3QgYWN0aXZlU3BhbiA9IHRyYWNlci5nZXRBY3RpdmVTY29wZVNwYW4oKTtcbiAgICBjb25zdCBjb250ZXh0ID0ge1xuICAgICAgICBwYXJhbXMsXG4gICAgICAgIHByZXJlbmRlck1hbmlmZXN0LFxuICAgICAgICByZW5kZXJPcHRzOiB7XG4gICAgICAgICAgICBleHBlcmltZW50YWw6IHtcbiAgICAgICAgICAgICAgICBjYWNoZUNvbXBvbmVudHM6IEJvb2xlYW4obmV4dENvbmZpZy5leHBlcmltZW50YWwuY2FjaGVDb21wb25lbnRzKSxcbiAgICAgICAgICAgICAgICBhdXRoSW50ZXJydXB0czogQm9vbGVhbihuZXh0Q29uZmlnLmV4cGVyaW1lbnRhbC5hdXRoSW50ZXJydXB0cylcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzdXBwb3J0c0R5bmFtaWNSZXNwb25zZSxcbiAgICAgICAgICAgIGluY3JlbWVudGFsQ2FjaGU6IGdldFJlcXVlc3RNZXRhKHJlcSwgJ2luY3JlbWVudGFsQ2FjaGUnKSxcbiAgICAgICAgICAgIGNhY2hlTGlmZVByb2ZpbGVzOiAoX25leHRDb25maWdfZXhwZXJpbWVudGFsID0gbmV4dENvbmZpZy5leHBlcmltZW50YWwpID09IG51bGwgPyB2b2lkIDAgOiBfbmV4dENvbmZpZ19leHBlcmltZW50YWwuY2FjaGVMaWZlLFxuICAgICAgICAgICAgaXNSZXZhbGlkYXRlLFxuICAgICAgICAgICAgd2FpdFVudGlsOiBjdHgud2FpdFVudGlsLFxuICAgICAgICAgICAgb25DbG9zZTogKGNiKT0+e1xuICAgICAgICAgICAgICAgIHJlcy5vbignY2xvc2UnLCBjYik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25BZnRlclRhc2tFcnJvcjogdW5kZWZpbmVkLFxuICAgICAgICAgICAgb25JbnN0cnVtZW50YXRpb25SZXF1ZXN0RXJyb3I6IChlcnJvciwgX3JlcXVlc3QsIGVycm9yQ29udGV4dCk9PnJvdXRlTW9kdWxlLm9uUmVxdWVzdEVycm9yKHJlcSwgZXJyb3IsIGVycm9yQ29udGV4dCwgcm91dGVyU2VydmVyQ29udGV4dClcbiAgICAgICAgfSxcbiAgICAgICAgc2hhcmVkQ29udGV4dDoge1xuICAgICAgICAgICAgYnVpbGRJZFxuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBub2RlTmV4dFJlcSA9IG5ldyBOb2RlTmV4dFJlcXVlc3QocmVxKTtcbiAgICBjb25zdCBub2RlTmV4dFJlcyA9IG5ldyBOb2RlTmV4dFJlc3BvbnNlKHJlcyk7XG4gICAgY29uc3QgbmV4dFJlcSA9IE5leHRSZXF1ZXN0QWRhcHRlci5mcm9tTm9kZU5leHRSZXF1ZXN0KG5vZGVOZXh0UmVxLCBzaWduYWxGcm9tTm9kZVJlc3BvbnNlKHJlcykpO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGludm9rZVJvdXRlTW9kdWxlID0gYXN5bmMgKHNwYW4pPT57XG4gICAgICAgICAgICByZXR1cm4gcm91dGVNb2R1bGUuaGFuZGxlKG5leHRSZXEsIGNvbnRleHQpLmZpbmFsbHkoKCk9PntcbiAgICAgICAgICAgICAgICBpZiAoIXNwYW4pIHJldHVybjtcbiAgICAgICAgICAgICAgICBzcGFuLnNldEF0dHJpYnV0ZXMoe1xuICAgICAgICAgICAgICAgICAgICAnaHR0cC5zdGF0dXNfY29kZSc6IHJlcy5zdGF0dXNDb2RlLFxuICAgICAgICAgICAgICAgICAgICAnbmV4dC5yc2MnOiBmYWxzZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJvb3RTcGFuQXR0cmlidXRlcyA9IHRyYWNlci5nZXRSb290U3BhbkF0dHJpYnV0ZXMoKTtcbiAgICAgICAgICAgICAgICAvLyBXZSB3ZXJlIHVuYWJsZSB0byBnZXQgYXR0cmlidXRlcywgcHJvYmFibHkgT1RFTCBpcyBub3QgZW5hYmxlZFxuICAgICAgICAgICAgICAgIGlmICghcm9vdFNwYW5BdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHJvb3RTcGFuQXR0cmlidXRlcy5nZXQoJ25leHQuc3Bhbl90eXBlJykgIT09IEJhc2VTZXJ2ZXJTcGFuLmhhbmRsZVJlcXVlc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBVbmV4cGVjdGVkIHJvb3Qgc3BhbiB0eXBlICcke3Jvb3RTcGFuQXR0cmlidXRlcy5nZXQoJ25leHQuc3Bhbl90eXBlJyl9Jy4gUGxlYXNlIHJlcG9ydCB0aGlzIE5leHQuanMgaXNzdWUgaHR0cHM6Ly9naXRodWIuY29tL3ZlcmNlbC9uZXh0LmpzYCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3Qgcm91dGUgPSByb290U3BhbkF0dHJpYnV0ZXMuZ2V0KCduZXh0LnJvdXRlJyk7XG4gICAgICAgICAgICAgICAgaWYgKHJvdXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBgJHttZXRob2R9ICR7cm91dGV9YDtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbi5zZXRBdHRyaWJ1dGVzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICduZXh0LnJvdXRlJzogcm91dGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAnaHR0cC5yb3V0ZSc6IHJvdXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ25leHQuc3Bhbl9uYW1lJzogbmFtZVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbi51cGRhdGVOYW1lKG5hbWUpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNwYW4udXBkYXRlTmFtZShgJHttZXRob2R9ICR7cmVxLnVybH1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgaGFuZGxlUmVzcG9uc2UgPSBhc3luYyAoY3VycmVudFNwYW4pPT57XG4gICAgICAgICAgICB2YXIgX2NhY2hlRW50cnlfdmFsdWU7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZUdlbmVyYXRvciA9IGFzeW5jICh7IHByZXZpb3VzQ2FjaGVFbnRyeSB9KT0+e1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZ2V0UmVxdWVzdE1ldGEocmVxLCAnbWluaW1hbE1vZGUnKSAmJiBpc09uRGVtYW5kUmV2YWxpZGF0ZSAmJiByZXZhbGlkYXRlT25seUdlbmVyYXRlZCAmJiAhcHJldmlvdXNDYWNoZUVudHJ5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXMuc3RhdHVzQ29kZSA9IDQwNDtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9uLWRlbWFuZCByZXZhbGlkYXRlIGFsd2F5cyBzZXRzIHRoaXMgaGVhZGVyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXMuc2V0SGVhZGVyKCd4LW5leHRqcy1jYWNoZScsICdSRVZBTElEQVRFRCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzLmVuZCgnVGhpcyBwYWdlIGNvdWxkIG5vdCBiZSBmb3VuZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBpbnZva2VSb3V0ZU1vZHVsZShjdXJyZW50U3Bhbik7XG4gICAgICAgICAgICAgICAgICAgIHJlcS5mZXRjaE1ldHJpY3MgPSBjb250ZXh0LnJlbmRlck9wdHMuZmV0Y2hNZXRyaWNzO1xuICAgICAgICAgICAgICAgICAgICBsZXQgcGVuZGluZ1dhaXRVbnRpbCA9IGNvbnRleHQucmVuZGVyT3B0cy5wZW5kaW5nV2FpdFVudGlsO1xuICAgICAgICAgICAgICAgICAgICAvLyBBdHRlbXB0IHVzaW5nIHByb3ZpZGVkIHdhaXRVbnRpbCBpZiBhdmFpbGFibGVcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgaXQncyBub3Qgd2UgZmFsbGJhY2sgdG8gc2VuZFJlc3BvbnNlJ3MgaGFuZGxpbmdcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBlbmRpbmdXYWl0VW50aWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdHgud2FpdFVudGlsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LndhaXRVbnRpbChwZW5kaW5nV2FpdFVudGlsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZW5kaW5nV2FpdFVudGlsID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhY2hlVGFncyA9IGNvbnRleHQucmVuZGVyT3B0cy5jb2xsZWN0ZWRUYWdzO1xuICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgcmVxdWVzdCBpcyBmb3IgYSBzdGF0aWMgcmVzcG9uc2UsIHdlIGNhbiBjYWNoZSBpdCBzbyBsb25nXG4gICAgICAgICAgICAgICAgICAgIC8vIGFzIGl0J3Mgbm90IGVkZ2UuXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0lzcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IHJlc3BvbnNlLmJsb2IoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvcHkgdGhlIGhlYWRlcnMgZnJvbSB0aGUgcmVzcG9uc2UuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBoZWFkZXJzID0gdG9Ob2RlT3V0Z29pbmdIdHRwSGVhZGVycyhyZXNwb25zZS5oZWFkZXJzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYWNoZVRhZ3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzW05FWFRfQ0FDSEVfVEFHU19IRUFERVJdID0gY2FjaGVUYWdzO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFoZWFkZXJzWydjb250ZW50LXR5cGUnXSAmJiBibG9iLnR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzWydjb250ZW50LXR5cGUnXSA9IGJsb2IudHlwZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJldmFsaWRhdGUgPSB0eXBlb2YgY29udGV4dC5yZW5kZXJPcHRzLmNvbGxlY3RlZFJldmFsaWRhdGUgPT09ICd1bmRlZmluZWQnIHx8IGNvbnRleHQucmVuZGVyT3B0cy5jb2xsZWN0ZWRSZXZhbGlkYXRlID49IElORklOSVRFX0NBQ0hFID8gZmFsc2UgOiBjb250ZXh0LnJlbmRlck9wdHMuY29sbGVjdGVkUmV2YWxpZGF0ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGV4cGlyZSA9IHR5cGVvZiBjb250ZXh0LnJlbmRlck9wdHMuY29sbGVjdGVkRXhwaXJlID09PSAndW5kZWZpbmVkJyB8fCBjb250ZXh0LnJlbmRlck9wdHMuY29sbGVjdGVkRXhwaXJlID49IElORklOSVRFX0NBQ0hFID8gdW5kZWZpbmVkIDogY29udGV4dC5yZW5kZXJPcHRzLmNvbGxlY3RlZEV4cGlyZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENyZWF0ZSB0aGUgY2FjaGUgZW50cnkgZm9yIHRoZSByZXNwb25zZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhY2hlRW50cnkgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2luZDogQ2FjaGVkUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiByZXNwb25zZS5zdGF0dXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IEJ1ZmZlci5mcm9tKGF3YWl0IGJsb2IuYXJyYXlCdWZmZXIoKSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlQ29udHJvbDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXZhbGlkYXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBpcmVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhY2hlRW50cnk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzZW5kIHJlc3BvbnNlIHdpdGhvdXQgY2FjaGluZyBpZiBub3QgSVNSXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBzZW5kUmVzcG9uc2Uobm9kZU5leHRSZXEsIG5vZGVOZXh0UmVzLCByZXNwb25zZSwgY29udGV4dC5yZW5kZXJPcHRzLnBlbmRpbmdXYWl0VW50aWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgdGhpcyBpcyBhIGJhY2tncm91bmQgcmV2YWxpZGF0ZSB3ZSBuZWVkIHRvIHJlcG9ydFxuICAgICAgICAgICAgICAgICAgICAvLyB0aGUgcmVxdWVzdCBlcnJvciBoZXJlIGFzIGl0IHdvbid0IGJlIGJ1YmJsZWRcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByZXZpb3VzQ2FjaGVFbnRyeSA9PSBudWxsID8gdm9pZCAwIDogcHJldmlvdXNDYWNoZUVudHJ5LmlzU3RhbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHJvdXRlTW9kdWxlLm9uUmVxdWVzdEVycm9yKHJlcSwgZXJyLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm91dGVyS2luZDogJ0FwcCBSb3V0ZXInLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvdXRlUGF0aDogc3JjUGFnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3V0ZVR5cGU6ICdyb3V0ZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV2YWxpZGF0ZVJlYXNvbjogZ2V0UmV2YWxpZGF0ZVJlYXNvbih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzUmV2YWxpZGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNPbkRlbWFuZFJldmFsaWRhdGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgcm91dGVyU2VydmVyQ29udGV4dCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBjYWNoZUVudHJ5ID0gYXdhaXQgcm91dGVNb2R1bGUuaGFuZGxlUmVzcG9uc2Uoe1xuICAgICAgICAgICAgICAgIHJlcSxcbiAgICAgICAgICAgICAgICBuZXh0Q29uZmlnLFxuICAgICAgICAgICAgICAgIGNhY2hlS2V5LFxuICAgICAgICAgICAgICAgIHJvdXRlS2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgICAgICAgICBpc0ZhbGxiYWNrOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBwcmVyZW5kZXJNYW5pZmVzdCxcbiAgICAgICAgICAgICAgICBpc1JvdXRlUFBSRW5hYmxlZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgaXNPbkRlbWFuZFJldmFsaWRhdGUsXG4gICAgICAgICAgICAgICAgcmV2YWxpZGF0ZU9ubHlHZW5lcmF0ZWQsXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VHZW5lcmF0b3IsXG4gICAgICAgICAgICAgICAgd2FpdFVudGlsOiBjdHgud2FpdFVudGlsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIHdlIGRvbid0IGNyZWF0ZSBhIGNhY2hlRW50cnkgZm9yIElTUlxuICAgICAgICAgICAgaWYgKCFpc0lzcikge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKChjYWNoZUVudHJ5ID09IG51bGwgPyB2b2lkIDAgOiAoX2NhY2hlRW50cnlfdmFsdWUgPSBjYWNoZUVudHJ5LnZhbHVlKSA9PSBudWxsID8gdm9pZCAwIDogX2NhY2hlRW50cnlfdmFsdWUua2luZCkgIT09IENhY2hlZFJvdXRlS2luZC5BUFBfUk9VVEUpIHtcbiAgICAgICAgICAgICAgICB2YXIgX2NhY2hlRW50cnlfdmFsdWUxO1xuICAgICAgICAgICAgICAgIHRocm93IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXcgRXJyb3IoYEludmFyaWFudDogYXBwLXJvdXRlIHJlY2VpdmVkIGludmFsaWQgY2FjaGUgZW50cnkgJHtjYWNoZUVudHJ5ID09IG51bGwgPyB2b2lkIDAgOiAoX2NhY2hlRW50cnlfdmFsdWUxID0gY2FjaGVFbnRyeS52YWx1ZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9jYWNoZUVudHJ5X3ZhbHVlMS5raW5kfWApLCBcIl9fTkVYVF9FUlJPUl9DT0RFXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFwiRTcwMVwiLFxuICAgICAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWdldFJlcXVlc3RNZXRhKHJlcSwgJ21pbmltYWxNb2RlJykpIHtcbiAgICAgICAgICAgICAgICByZXMuc2V0SGVhZGVyKCd4LW5leHRqcy1jYWNoZScsIGlzT25EZW1hbmRSZXZhbGlkYXRlID8gJ1JFVkFMSURBVEVEJyA6IGNhY2hlRW50cnkuaXNNaXNzID8gJ01JU1MnIDogY2FjaGVFbnRyeS5pc1N0YWxlID8gJ1NUQUxFJyA6ICdISVQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIERyYWZ0IG1vZGUgc2hvdWxkIG5ldmVyIGJlIGNhY2hlZFxuICAgICAgICAgICAgaWYgKGlzRHJhZnRNb2RlKSB7XG4gICAgICAgICAgICAgICAgcmVzLnNldEhlYWRlcignQ2FjaGUtQ29udHJvbCcsICdwcml2YXRlLCBuby1jYWNoZSwgbm8tc3RvcmUsIG1heC1hZ2U9MCwgbXVzdC1yZXZhbGlkYXRlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBoZWFkZXJzID0gZnJvbU5vZGVPdXRnb2luZ0h0dHBIZWFkZXJzKGNhY2hlRW50cnkudmFsdWUuaGVhZGVycyk7XG4gICAgICAgICAgICBpZiAoIShnZXRSZXF1ZXN0TWV0YShyZXEsICdtaW5pbWFsTW9kZScpICYmIGlzSXNyKSkge1xuICAgICAgICAgICAgICAgIGhlYWRlcnMuZGVsZXRlKE5FWFRfQ0FDSEVfVEFHU19IRUFERVIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gSWYgY2FjaGUgY29udHJvbCBpcyBhbHJlYWR5IHNldCBvbiB0aGUgcmVzcG9uc2Ugd2UgZG9uJ3RcbiAgICAgICAgICAgIC8vIG92ZXJyaWRlIGl0IHRvIGFsbG93IHVzZXJzIHRvIGN1c3RvbWl6ZSBpdCB2aWEgbmV4dC5jb25maWdcbiAgICAgICAgICAgIGlmIChjYWNoZUVudHJ5LmNhY2hlQ29udHJvbCAmJiAhcmVzLmdldEhlYWRlcignQ2FjaGUtQ29udHJvbCcpICYmICFoZWFkZXJzLmdldCgnQ2FjaGUtQ29udHJvbCcpKSB7XG4gICAgICAgICAgICAgICAgaGVhZGVycy5zZXQoJ0NhY2hlLUNvbnRyb2wnLCBnZXRDYWNoZUNvbnRyb2xIZWFkZXIoY2FjaGVFbnRyeS5jYWNoZUNvbnRyb2wpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF3YWl0IHNlbmRSZXNwb25zZShub2RlTmV4dFJlcSwgbm9kZU5leHRSZXMsIG5ldyBSZXNwb25zZShjYWNoZUVudHJ5LnZhbHVlLmJvZHksIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIHN0YXR1czogY2FjaGVFbnRyeS52YWx1ZS5zdGF0dXMgfHwgMjAwXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfTtcbiAgICAgICAgLy8gVE9ETzogYWN0aXZlU3BhbiBjb2RlIHBhdGggaXMgZm9yIHdoZW4gd3JhcHBlZCBieVxuICAgICAgICAvLyBuZXh0LXNlcnZlciBjYW4gYmUgcmVtb3ZlZCB3aGVuIHRoaXMgaXMgbm8gbG9uZ2VyIHVzZWRcbiAgICAgICAgaWYgKGFjdGl2ZVNwYW4pIHtcbiAgICAgICAgICAgIGF3YWl0IGhhbmRsZVJlc3BvbnNlKGFjdGl2ZVNwYW4pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYXdhaXQgdHJhY2VyLndpdGhQcm9wYWdhdGVkQ29udGV4dChyZXEuaGVhZGVycywgKCk9PnRyYWNlci50cmFjZShCYXNlU2VydmVyU3Bhbi5oYW5kbGVSZXF1ZXN0LCB7XG4gICAgICAgICAgICAgICAgICAgIHNwYW5OYW1lOiBgJHttZXRob2R9ICR7cmVxLnVybH1gLFxuICAgICAgICAgICAgICAgICAgICBraW5kOiBTcGFuS2luZC5TRVJWRVIsXG4gICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICdodHRwLm1ldGhvZCc6IG1ldGhvZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICdodHRwLnRhcmdldCc6IHJlcS51cmxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIGhhbmRsZVJlc3BvbnNlKSk7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgaWYgKCEoZXJyIGluc3RhbmNlb2YgTm9GYWxsYmFja0Vycm9yKSkge1xuICAgICAgICAgICAgYXdhaXQgcm91dGVNb2R1bGUub25SZXF1ZXN0RXJyb3IocmVxLCBlcnIsIHtcbiAgICAgICAgICAgICAgICByb3V0ZXJLaW5kOiAnQXBwIFJvdXRlcicsXG4gICAgICAgICAgICAgICAgcm91dGVQYXRoOiBub3JtYWxpemVkU3JjUGFnZSxcbiAgICAgICAgICAgICAgICByb3V0ZVR5cGU6ICdyb3V0ZScsXG4gICAgICAgICAgICAgICAgcmV2YWxpZGF0ZVJlYXNvbjogZ2V0UmV2YWxpZGF0ZVJlYXNvbih7XG4gICAgICAgICAgICAgICAgICAgIGlzUmV2YWxpZGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgaXNPbkRlbWFuZFJldmFsaWRhdGVcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gcmV0aHJvdyBzbyB0aGF0IHdlIGNhbiBoYW5kbGUgc2VydmluZyBlcnJvciBwYWdlXG4gICAgICAgIC8vIElmIHRoaXMgaXMgZHVyaW5nIHN0YXRpYyBnZW5lcmF0aW9uLCB0aHJvdyB0aGUgZXJyb3IgYWdhaW4uXG4gICAgICAgIGlmIChpc0lzcikgdGhyb3cgZXJyO1xuICAgICAgICAvLyBPdGhlcndpc2UsIHNlbmQgYSA1MDAgcmVzcG9uc2UuXG4gICAgICAgIGF3YWl0IHNlbmRSZXNwb25zZShub2RlTmV4dFJlcSwgbm9kZU5leHRSZXMsIG5ldyBSZXNwb25zZShudWxsLCB7XG4gICAgICAgICAgICBzdGF0dXM6IDUwMFxuICAgICAgICB9KSk7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcFxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/next@15.5.6_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.77.4/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2F(payload)%2Fapi%2F%5B...slug%5D%2Froute&page=%2F(payload)%2Fapi%2F%5B...slug%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2F(payload)%2Fapi%2F%5B...slug%5D%2Froute.ts&appDir=%2Fhome%2Fmildfire%2Frepos%2FAADS%2Fexample-payload%2Fmulti-tenant-example%2Fmulti-tenant-example%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fmildfire%2Frepos%2FAADS%2Fexample-payload%2Fmulti-tenant-example%2Fmulti-tenant-example&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/next@15.5.6_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.77.4/node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!*********************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/next@15.5.6_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.77.4/node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \*********************************************************************************************************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(rsc)/./src/access/isSuperAdmin.ts":
/*!************************************!*\
  !*** ./src/access/isSuperAdmin.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isSuperAdmin: () => (/* binding */ isSuperAdmin),\n/* harmony export */   isSuperAdminAccess: () => (/* binding */ isSuperAdminAccess)\n/* harmony export */ });\nconst isSuperAdminAccess = ({ req })=>{\n    return isSuperAdmin(req.user);\n};\nconst isSuperAdmin = (user)=>{\n    return Boolean(user?.roles?.includes('super-admin'));\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYWNjZXNzL2lzU3VwZXJBZG1pbi50cyIsIm1hcHBpbmdzIjoiOzs7OztBQUdPLE1BQU1BLHFCQUE2QixDQUFDLEVBQUVDLEdBQUcsRUFBRTtJQUNoRCxPQUFPQyxhQUFhRCxJQUFJRSxJQUFJO0FBQzlCLEVBQUM7QUFFTSxNQUFNRCxlQUFlLENBQUNDO0lBQzNCLE9BQU9DLFFBQVFELE1BQU1FLE9BQU9DLFNBQVM7QUFDdkMsRUFBQyIsInNvdXJjZXMiOlsiL2hvbWUvbWlsZGZpcmUvcmVwb3MvQUFEUy9leGFtcGxlLXBheWxvYWQvbXVsdGktdGVuYW50LWV4YW1wbGUvbXVsdGktdGVuYW50LWV4YW1wbGUvc3JjL2FjY2Vzcy9pc1N1cGVyQWRtaW4udHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBBY2Nlc3MgfSBmcm9tICdwYXlsb2FkJ1xuaW1wb3J0IHsgVXNlciB9IGZyb20gJy4uL3BheWxvYWQtdHlwZXMnXG5cbmV4cG9ydCBjb25zdCBpc1N1cGVyQWRtaW5BY2Nlc3M6IEFjY2VzcyA9ICh7IHJlcSB9KTogYm9vbGVhbiA9PiB7XG4gIHJldHVybiBpc1N1cGVyQWRtaW4ocmVxLnVzZXIpXG59XG5cbmV4cG9ydCBjb25zdCBpc1N1cGVyQWRtaW4gPSAodXNlcjogVXNlciB8IG51bGwpOiBib29sZWFuID0+IHtcbiAgcmV0dXJuIEJvb2xlYW4odXNlcj8ucm9sZXM/LmluY2x1ZGVzKCdzdXBlci1hZG1pbicpKVxufVxuIl0sIm5hbWVzIjpbImlzU3VwZXJBZG1pbkFjY2VzcyIsInJlcSIsImlzU3VwZXJBZG1pbiIsInVzZXIiLCJCb29sZWFuIiwicm9sZXMiLCJpbmNsdWRlcyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/access/isSuperAdmin.ts\n");

/***/ }),

/***/ "(rsc)/./src/app/(payload)/api/[...slug]/route.ts":
/*!**************************************************!*\
  !*** ./src/app/(payload)/api/[...slug]/route.ts ***!
  \**************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DELETE: () => (/* binding */ DELETE),\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   OPTIONS: () => (/* binding */ OPTIONS),\n/* harmony export */   PATCH: () => (/* binding */ PATCH),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var _payload_config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @payload-config */ \"(rsc)/./src/payload.config.ts\");\n/* harmony import */ var _payloadcms_next_routes__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @payloadcms/next/routes */ \"(rsc)/./node_modules/.pnpm/@payloadcms+next@3.64.0_@types+react@19.0.1_graphql@16.12.0_monaco-editor@0.54.0_next@1_fbebdb68d675befed4124b29602e4e61/node_modules/@payloadcms/next/dist/routes/rest/index.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_payload_config__WEBPACK_IMPORTED_MODULE_0__]);\n_payload_config__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n/* THIS FILE WAS GENERATED AUTOMATICALLY BY PAYLOAD. */ /* DO NOT MODIFY IT BECAUSE IT COULD BE REWRITTEN AT ANY TIME. */ \n\nconst GET = (0,_payloadcms_next_routes__WEBPACK_IMPORTED_MODULE_1__.GET)(_payload_config__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\nconst POST = (0,_payloadcms_next_routes__WEBPACK_IMPORTED_MODULE_1__.POST)(_payload_config__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\nconst DELETE = (0,_payloadcms_next_routes__WEBPACK_IMPORTED_MODULE_1__.DELETE)(_payload_config__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\nconst PATCH = (0,_payloadcms_next_routes__WEBPACK_IMPORTED_MODULE_1__.PATCH)(_payload_config__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\nconst OPTIONS = (0,_payloadcms_next_routes__WEBPACK_IMPORTED_MODULE_1__.OPTIONS)(_payload_config__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwLyhwYXlsb2FkKS9hcGkvWy4uLnNsdWddL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBQSxxREFBcUQsR0FDckQsK0RBQStELEdBQzNCO0FBQ2dFO0FBRTdGLE1BQU1NLE1BQU1KLDREQUFRQSxDQUFDRix1REFBTUEsRUFBQztBQUM1QixNQUFNTyxPQUFPRiw2REFBU0EsQ0FBQ0wsdURBQU1BLEVBQUM7QUFDOUIsTUFBTVEsU0FBU1AsK0RBQVdBLENBQUNELHVEQUFNQSxFQUFDO0FBQ2xDLE1BQU1TLFFBQVFMLDhEQUFVQSxDQUFDSix1REFBTUEsRUFBQztBQUNoQyxNQUFNVSxVQUFVUCxnRUFBWUEsQ0FBQ0gsdURBQU1BLEVBQUMiLCJzb3VyY2VzIjpbIi9ob21lL21pbGRmaXJlL3JlcG9zL0FBRFMvZXhhbXBsZS1wYXlsb2FkL211bHRpLXRlbmFudC1leGFtcGxlL211bHRpLXRlbmFudC1leGFtcGxlL3NyYy9hcHAvKHBheWxvYWQpL2FwaS9bLi4uc2x1Z10vcm91dGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyogVEhJUyBGSUxFIFdBUyBHRU5FUkFURUQgQVVUT01BVElDQUxMWSBCWSBQQVlMT0FELiAqL1xuLyogRE8gTk9UIE1PRElGWSBJVCBCRUNBVVNFIElUIENPVUxEIEJFIFJFV1JJVFRFTiBBVCBBTlkgVElNRS4gKi9cbmltcG9ydCBjb25maWcgZnJvbSAnQHBheWxvYWQtY29uZmlnJ1xuaW1wb3J0IHsgUkVTVF9ERUxFVEUsIFJFU1RfR0VULCBSRVNUX09QVElPTlMsIFJFU1RfUEFUQ0gsIFJFU1RfUE9TVCB9IGZyb20gJ0BwYXlsb2FkY21zL25leHQvcm91dGVzJ1xuXG5leHBvcnQgY29uc3QgR0VUID0gUkVTVF9HRVQoY29uZmlnKVxuZXhwb3J0IGNvbnN0IFBPU1QgPSBSRVNUX1BPU1QoY29uZmlnKVxuZXhwb3J0IGNvbnN0IERFTEVURSA9IFJFU1RfREVMRVRFKGNvbmZpZylcbmV4cG9ydCBjb25zdCBQQVRDSCA9IFJFU1RfUEFUQ0goY29uZmlnKVxuZXhwb3J0IGNvbnN0IE9QVElPTlMgPSBSRVNUX09QVElPTlMoY29uZmlnKVxuIl0sIm5hbWVzIjpbImNvbmZpZyIsIlJFU1RfREVMRVRFIiwiUkVTVF9HRVQiLCJSRVNUX09QVElPTlMiLCJSRVNUX1BBVENIIiwiUkVTVF9QT1NUIiwiR0VUIiwiUE9TVCIsIkRFTEVURSIsIlBBVENIIiwiT1BUSU9OUyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/app/(payload)/api/[...slug]/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/collections/Pages/access/superAdminOrTenantAdmin.ts":
/*!*****************************************************************!*\
  !*** ./src/collections/Pages/access/superAdminOrTenantAdmin.ts ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   superAdminOrTenantAdminAccess: () => (/* binding */ superAdminOrTenantAdminAccess)\n/* harmony export */ });\n/* harmony import */ var _utilities_getUserTenantIDs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/utilities/getUserTenantIDs */ \"(rsc)/./src/utilities/getUserTenantIDs.ts\");\n/* harmony import */ var _access_isSuperAdmin__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../access/isSuperAdmin */ \"(rsc)/./src/access/isSuperAdmin.ts\");\n\n\n/**\n * Tenant admins and super admins can will be allowed access\n */ const superAdminOrTenantAdminAccess = ({ req })=>{\n    if (!req.user) {\n        return false;\n    }\n    if ((0,_access_isSuperAdmin__WEBPACK_IMPORTED_MODULE_1__.isSuperAdmin)(req.user)) {\n        return true;\n    }\n    const adminTenantAccessIDs = (0,_utilities_getUserTenantIDs__WEBPACK_IMPORTED_MODULE_0__.getUserTenantIDs)(req.user, 'tenant-admin');\n    const requestedTenant = req?.data?.tenant;\n    if (requestedTenant && adminTenantAccessIDs.includes(requestedTenant)) {\n        return true;\n    }\n    return false;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvY29sbGVjdGlvbnMvUGFnZXMvYWNjZXNzL3N1cGVyQWRtaW5PclRlbmFudEFkbWluLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUErRDtBQUNKO0FBRzNEOztDQUVDLEdBQ00sTUFBTUUsZ0NBQXdDLENBQUMsRUFBRUMsR0FBRyxFQUFFO0lBQzNELElBQUksQ0FBQ0EsSUFBSUMsSUFBSSxFQUFFO1FBQ2IsT0FBTztJQUNUO0lBRUEsSUFBSUgsa0VBQVlBLENBQUNFLElBQUlDLElBQUksR0FBRztRQUMxQixPQUFPO0lBQ1Q7SUFFQSxNQUFNQyx1QkFBdUJMLDZFQUFnQkEsQ0FBQ0csSUFBSUMsSUFBSSxFQUFFO0lBQ3hELE1BQU1FLGtCQUFrQkgsS0FBS0ksTUFBTUM7SUFFbkMsSUFBSUYsbUJBQW1CRCxxQkFBcUJJLFFBQVEsQ0FBQ0gsa0JBQWtCO1FBQ3JFLE9BQU87SUFDVDtJQUVBLE9BQU87QUFDVCxFQUFDIiwic291cmNlcyI6WyIvaG9tZS9taWxkZmlyZS9yZXBvcy9BQURTL2V4YW1wbGUtcGF5bG9hZC9tdWx0aS10ZW5hbnQtZXhhbXBsZS9tdWx0aS10ZW5hbnQtZXhhbXBsZS9zcmMvY29sbGVjdGlvbnMvUGFnZXMvYWNjZXNzL3N1cGVyQWRtaW5PclRlbmFudEFkbWluLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldFVzZXJUZW5hbnRJRHMgfSBmcm9tICdAL3V0aWxpdGllcy9nZXRVc2VyVGVuYW50SURzJ1xuaW1wb3J0IHsgaXNTdXBlckFkbWluIH0gZnJvbSAnLi4vLi4vLi4vYWNjZXNzL2lzU3VwZXJBZG1pbidcbmltcG9ydCB7IEFjY2VzcyB9IGZyb20gJ3BheWxvYWQnXG5cbi8qKlxuICogVGVuYW50IGFkbWlucyBhbmQgc3VwZXIgYWRtaW5zIGNhbiB3aWxsIGJlIGFsbG93ZWQgYWNjZXNzXG4gKi9cbmV4cG9ydCBjb25zdCBzdXBlckFkbWluT3JUZW5hbnRBZG1pbkFjY2VzczogQWNjZXNzID0gKHsgcmVxIH0pID0+IHtcbiAgaWYgKCFyZXEudXNlcikge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgaWYgKGlzU3VwZXJBZG1pbihyZXEudXNlcikpIHtcbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgY29uc3QgYWRtaW5UZW5hbnRBY2Nlc3NJRHMgPSBnZXRVc2VyVGVuYW50SURzKHJlcS51c2VyLCAndGVuYW50LWFkbWluJylcbiAgY29uc3QgcmVxdWVzdGVkVGVuYW50ID0gcmVxPy5kYXRhPy50ZW5hbnRcblxuICBpZiAocmVxdWVzdGVkVGVuYW50ICYmIGFkbWluVGVuYW50QWNjZXNzSURzLmluY2x1ZGVzKHJlcXVlc3RlZFRlbmFudCkpIHtcbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgcmV0dXJuIGZhbHNlXG59XG4iXSwibmFtZXMiOlsiZ2V0VXNlclRlbmFudElEcyIsImlzU3VwZXJBZG1pbiIsInN1cGVyQWRtaW5PclRlbmFudEFkbWluQWNjZXNzIiwicmVxIiwidXNlciIsImFkbWluVGVuYW50QWNjZXNzSURzIiwicmVxdWVzdGVkVGVuYW50IiwiZGF0YSIsInRlbmFudCIsImluY2x1ZGVzIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/collections/Pages/access/superAdminOrTenantAdmin.ts\n");

/***/ }),

/***/ "(rsc)/./src/collections/Pages/hooks/ensureUniqueSlug.ts":
/*!*********************************************************!*\
  !*** ./src/collections/Pages/hooks/ensureUniqueSlug.ts ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ensureUniqueSlug: () => (/* binding */ ensureUniqueSlug)\n/* harmony export */ });\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.64.0_graphql@16.12.0_typescript@5.5.2/node_modules/payload/dist/errors/ValidationError.js\");\n/* harmony import */ var _utilities_getUserTenantIDs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../utilities/getUserTenantIDs */ \"(rsc)/./src/utilities/getUserTenantIDs.ts\");\n/* harmony import */ var _utilities_extractID__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/utilities/extractID */ \"(rsc)/./src/utilities/extractID.ts\");\n\n\n\nconst ensureUniqueSlug = async ({ data, originalDoc, req, value })=>{\n    // if value is unchanged, skip validation\n    if (originalDoc.slug === value) {\n        return value;\n    }\n    const constraints = [\n        {\n            slug: {\n                equals: value\n            }\n        }\n    ];\n    const incomingTenantID = (0,_utilities_extractID__WEBPACK_IMPORTED_MODULE_1__.extractID)(data?.tenant);\n    const currentTenantID = (0,_utilities_extractID__WEBPACK_IMPORTED_MODULE_1__.extractID)(originalDoc?.tenant);\n    const tenantIDToMatch = incomingTenantID || currentTenantID;\n    if (tenantIDToMatch) {\n        constraints.push({\n            tenant: {\n                equals: tenantIDToMatch\n            }\n        });\n    }\n    const findDuplicatePages = await req.payload.find({\n        collection: 'pages',\n        where: {\n            and: constraints\n        }\n    });\n    if (findDuplicatePages.docs.length > 0 && req.user) {\n        const tenantIDs = (0,_utilities_getUserTenantIDs__WEBPACK_IMPORTED_MODULE_0__.getUserTenantIDs)(req.user);\n        // if the user is an admin or has access to more than 1 tenant\n        // provide a more specific error message\n        if (req.user.roles?.includes('super-admin') || tenantIDs.length > 1) {\n            const attemptedTenantChange = await req.payload.findByID({\n                id: tenantIDToMatch,\n                collection: 'tenants'\n            });\n            throw new payload__WEBPACK_IMPORTED_MODULE_2__.ValidationError({\n                errors: [\n                    {\n                        message: `The \"${attemptedTenantChange.name}\" tenant already has a page with the slug \"${value}\". Slugs must be unique per tenant.`,\n                        path: 'slug'\n                    }\n                ]\n            });\n        }\n        throw new payload__WEBPACK_IMPORTED_MODULE_2__.ValidationError({\n            errors: [\n                {\n                    message: `A page with the slug ${value} already exists. Slug must be unique per tenant.`,\n                    path: 'slug'\n                }\n            ]\n        });\n    }\n    return value;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvY29sbGVjdGlvbnMvUGFnZXMvaG9va3MvZW5zdXJlVW5pcXVlU2x1Zy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBRXlDO0FBRTZCO0FBQ3JCO0FBRTFDLE1BQU1HLG1CQUE4QixPQUFPLEVBQUVDLElBQUksRUFBRUMsV0FBVyxFQUFFQyxHQUFHLEVBQUVDLEtBQUssRUFBRTtJQUNqRix5Q0FBeUM7SUFDekMsSUFBSUYsWUFBWUcsSUFBSSxLQUFLRCxPQUFPO1FBQzlCLE9BQU9BO0lBQ1Q7SUFFQSxNQUFNRSxjQUF1QjtRQUMzQjtZQUNFRCxNQUFNO2dCQUNKRSxRQUFRSDtZQUNWO1FBQ0Y7S0FDRDtJQUVELE1BQU1JLG1CQUFtQlQsK0RBQVNBLENBQUNFLE1BQU1RO0lBQ3pDLE1BQU1DLGtCQUFrQlgsK0RBQVNBLENBQUNHLGFBQWFPO0lBQy9DLE1BQU1FLGtCQUFrQkgsb0JBQW9CRTtJQUU1QyxJQUFJQyxpQkFBaUI7UUFDbkJMLFlBQVlNLElBQUksQ0FBQztZQUNmSCxRQUFRO2dCQUNORixRQUFRSTtZQUNWO1FBQ0Y7SUFDRjtJQUVBLE1BQU1FLHFCQUFxQixNQUFNVixJQUFJVyxPQUFPLENBQUNDLElBQUksQ0FBQztRQUNoREMsWUFBWTtRQUNaQyxPQUFPO1lBQ0xDLEtBQUtaO1FBQ1A7SUFDRjtJQUVBLElBQUlPLG1CQUFtQk0sSUFBSSxDQUFDQyxNQUFNLEdBQUcsS0FBS2pCLElBQUlrQixJQUFJLEVBQUU7UUFDbEQsTUFBTUMsWUFBWXhCLDZFQUFnQkEsQ0FBQ0ssSUFBSWtCLElBQUk7UUFDM0MsOERBQThEO1FBQzlELHdDQUF3QztRQUN4QyxJQUFJbEIsSUFBSWtCLElBQUksQ0FBQ0UsS0FBSyxFQUFFQyxTQUFTLGtCQUFrQkYsVUFBVUYsTUFBTSxHQUFHLEdBQUc7WUFDbkUsTUFBTUssd0JBQXdCLE1BQU10QixJQUFJVyxPQUFPLENBQUNZLFFBQVEsQ0FBQztnQkFDdkRDLElBQUloQjtnQkFDSkssWUFBWTtZQUNkO1lBRUEsTUFBTSxJQUFJbkIsb0RBQWVBLENBQUM7Z0JBQ3hCK0IsUUFBUTtvQkFDTjt3QkFDRUMsU0FBUyxDQUFDLEtBQUssRUFBRUosc0JBQXNCSyxJQUFJLENBQUMsMkNBQTJDLEVBQUUxQixNQUFNLG1DQUFtQyxDQUFDO3dCQUNuSTJCLE1BQU07b0JBQ1I7aUJBQ0Q7WUFDSDtRQUNGO1FBRUEsTUFBTSxJQUFJbEMsb0RBQWVBLENBQUM7WUFDeEIrQixRQUFRO2dCQUNOO29CQUNFQyxTQUFTLENBQUMscUJBQXFCLEVBQUV6QixNQUFNLGdEQUFnRCxDQUFDO29CQUN4RjJCLE1BQU07Z0JBQ1I7YUFDRDtRQUNIO0lBQ0Y7SUFFQSxPQUFPM0I7QUFDVCxFQUFDIiwic291cmNlcyI6WyIvaG9tZS9taWxkZmlyZS9yZXBvcy9BQURTL2V4YW1wbGUtcGF5bG9hZC9tdWx0aS10ZW5hbnQtZXhhbXBsZS9tdWx0aS10ZW5hbnQtZXhhbXBsZS9zcmMvY29sbGVjdGlvbnMvUGFnZXMvaG9va3MvZW5zdXJlVW5pcXVlU2x1Zy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IEZpZWxkSG9vaywgV2hlcmUgfSBmcm9tICdwYXlsb2FkJ1xuXG5pbXBvcnQgeyBWYWxpZGF0aW9uRXJyb3IgfSBmcm9tICdwYXlsb2FkJ1xuXG5pbXBvcnQgeyBnZXRVc2VyVGVuYW50SURzIH0gZnJvbSAnLi4vLi4vLi4vdXRpbGl0aWVzL2dldFVzZXJUZW5hbnRJRHMnXG5pbXBvcnQgeyBleHRyYWN0SUQgfSBmcm9tICdAL3V0aWxpdGllcy9leHRyYWN0SUQnXG5cbmV4cG9ydCBjb25zdCBlbnN1cmVVbmlxdWVTbHVnOiBGaWVsZEhvb2sgPSBhc3luYyAoeyBkYXRhLCBvcmlnaW5hbERvYywgcmVxLCB2YWx1ZSB9KSA9PiB7XG4gIC8vIGlmIHZhbHVlIGlzIHVuY2hhbmdlZCwgc2tpcCB2YWxpZGF0aW9uXG4gIGlmIChvcmlnaW5hbERvYy5zbHVnID09PSB2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZVxuICB9XG5cbiAgY29uc3QgY29uc3RyYWludHM6IFdoZXJlW10gPSBbXG4gICAge1xuICAgICAgc2x1Zzoge1xuICAgICAgICBlcXVhbHM6IHZhbHVlLFxuICAgICAgfSxcbiAgICB9LFxuICBdXG5cbiAgY29uc3QgaW5jb21pbmdUZW5hbnRJRCA9IGV4dHJhY3RJRChkYXRhPy50ZW5hbnQpXG4gIGNvbnN0IGN1cnJlbnRUZW5hbnRJRCA9IGV4dHJhY3RJRChvcmlnaW5hbERvYz8udGVuYW50KVxuICBjb25zdCB0ZW5hbnRJRFRvTWF0Y2ggPSBpbmNvbWluZ1RlbmFudElEIHx8IGN1cnJlbnRUZW5hbnRJRFxuXG4gIGlmICh0ZW5hbnRJRFRvTWF0Y2gpIHtcbiAgICBjb25zdHJhaW50cy5wdXNoKHtcbiAgICAgIHRlbmFudDoge1xuICAgICAgICBlcXVhbHM6IHRlbmFudElEVG9NYXRjaCxcbiAgICAgIH0sXG4gICAgfSlcbiAgfVxuXG4gIGNvbnN0IGZpbmREdXBsaWNhdGVQYWdlcyA9IGF3YWl0IHJlcS5wYXlsb2FkLmZpbmQoe1xuICAgIGNvbGxlY3Rpb246ICdwYWdlcycsXG4gICAgd2hlcmU6IHtcbiAgICAgIGFuZDogY29uc3RyYWludHMsXG4gICAgfSxcbiAgfSlcblxuICBpZiAoZmluZER1cGxpY2F0ZVBhZ2VzLmRvY3MubGVuZ3RoID4gMCAmJiByZXEudXNlcikge1xuICAgIGNvbnN0IHRlbmFudElEcyA9IGdldFVzZXJUZW5hbnRJRHMocmVxLnVzZXIpXG4gICAgLy8gaWYgdGhlIHVzZXIgaXMgYW4gYWRtaW4gb3IgaGFzIGFjY2VzcyB0byBtb3JlIHRoYW4gMSB0ZW5hbnRcbiAgICAvLyBwcm92aWRlIGEgbW9yZSBzcGVjaWZpYyBlcnJvciBtZXNzYWdlXG4gICAgaWYgKHJlcS51c2VyLnJvbGVzPy5pbmNsdWRlcygnc3VwZXItYWRtaW4nKSB8fCB0ZW5hbnRJRHMubGVuZ3RoID4gMSkge1xuICAgICAgY29uc3QgYXR0ZW1wdGVkVGVuYW50Q2hhbmdlID0gYXdhaXQgcmVxLnBheWxvYWQuZmluZEJ5SUQoe1xuICAgICAgICBpZDogdGVuYW50SURUb01hdGNoLFxuICAgICAgICBjb2xsZWN0aW9uOiAndGVuYW50cycsXG4gICAgICB9KVxuXG4gICAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKHtcbiAgICAgICAgZXJyb3JzOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgbWVzc2FnZTogYFRoZSBcIiR7YXR0ZW1wdGVkVGVuYW50Q2hhbmdlLm5hbWV9XCIgdGVuYW50IGFscmVhZHkgaGFzIGEgcGFnZSB3aXRoIHRoZSBzbHVnIFwiJHt2YWx1ZX1cIi4gU2x1Z3MgbXVzdCBiZSB1bmlxdWUgcGVyIHRlbmFudC5gLFxuICAgICAgICAgICAgcGF0aDogJ3NsdWcnLFxuICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICB9KVxuICAgIH1cblxuICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3Ioe1xuICAgICAgZXJyb3JzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBtZXNzYWdlOiBgQSBwYWdlIHdpdGggdGhlIHNsdWcgJHt2YWx1ZX0gYWxyZWFkeSBleGlzdHMuIFNsdWcgbXVzdCBiZSB1bmlxdWUgcGVyIHRlbmFudC5gLFxuICAgICAgICAgIHBhdGg6ICdzbHVnJyxcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgfSlcbiAgfVxuXG4gIHJldHVybiB2YWx1ZVxufVxuIl0sIm5hbWVzIjpbIlZhbGlkYXRpb25FcnJvciIsImdldFVzZXJUZW5hbnRJRHMiLCJleHRyYWN0SUQiLCJlbnN1cmVVbmlxdWVTbHVnIiwiZGF0YSIsIm9yaWdpbmFsRG9jIiwicmVxIiwidmFsdWUiLCJzbHVnIiwiY29uc3RyYWludHMiLCJlcXVhbHMiLCJpbmNvbWluZ1RlbmFudElEIiwidGVuYW50IiwiY3VycmVudFRlbmFudElEIiwidGVuYW50SURUb01hdGNoIiwicHVzaCIsImZpbmREdXBsaWNhdGVQYWdlcyIsInBheWxvYWQiLCJmaW5kIiwiY29sbGVjdGlvbiIsIndoZXJlIiwiYW5kIiwiZG9jcyIsImxlbmd0aCIsInVzZXIiLCJ0ZW5hbnRJRHMiLCJyb2xlcyIsImluY2x1ZGVzIiwiYXR0ZW1wdGVkVGVuYW50Q2hhbmdlIiwiZmluZEJ5SUQiLCJpZCIsImVycm9ycyIsIm1lc3NhZ2UiLCJuYW1lIiwicGF0aCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/collections/Pages/hooks/ensureUniqueSlug.ts\n");

/***/ }),

/***/ "(rsc)/./src/collections/Pages/index.ts":
/*!****************************************!*\
  !*** ./src/collections/Pages/index.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Pages: () => (/* binding */ Pages)\n/* harmony export */ });\n/* harmony import */ var _hooks_ensureUniqueSlug__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./hooks/ensureUniqueSlug */ \"(rsc)/./src/collections/Pages/hooks/ensureUniqueSlug.ts\");\n/* harmony import */ var _collections_Pages_access_superAdminOrTenantAdmin__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/collections/Pages/access/superAdminOrTenantAdmin */ \"(rsc)/./src/collections/Pages/access/superAdminOrTenantAdmin.ts\");\n\n\nconst Pages = {\n    slug: 'pages',\n    access: {\n        create: _collections_Pages_access_superAdminOrTenantAdmin__WEBPACK_IMPORTED_MODULE_1__.superAdminOrTenantAdminAccess,\n        delete: _collections_Pages_access_superAdminOrTenantAdmin__WEBPACK_IMPORTED_MODULE_1__.superAdminOrTenantAdminAccess,\n        read: ()=>true,\n        update: _collections_Pages_access_superAdminOrTenantAdmin__WEBPACK_IMPORTED_MODULE_1__.superAdminOrTenantAdminAccess\n    },\n    admin: {\n        useAsTitle: 'title'\n    },\n    versions: {\n        drafts: {\n            autosave: {\n                interval: 375\n            }\n        }\n    },\n    fields: [\n        {\n            name: 'title',\n            type: 'text'\n        },\n        {\n            name: 'slug',\n            type: 'text',\n            defaultValue: 'home',\n            hooks: {\n                beforeValidate: [\n                    _hooks_ensureUniqueSlug__WEBPACK_IMPORTED_MODULE_0__.ensureUniqueSlug\n                ]\n            },\n            index: true\n        }\n    ]\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvY29sbGVjdGlvbnMvUGFnZXMvaW5kZXgudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBRTJEO0FBQ3VDO0FBRTNGLE1BQU1FLFFBQTBCO0lBQ3JDQyxNQUFNO0lBQ05DLFFBQVE7UUFDTkMsUUFBUUosNEdBQTZCQTtRQUNyQ0ssUUFBUUwsNEdBQTZCQTtRQUNyQ00sTUFBTSxJQUFNO1FBQ1pDLFFBQVFQLDRHQUE2QkE7SUFDdkM7SUFDQVEsT0FBTztRQUNMQyxZQUFZO0lBQ2Q7SUFDQUMsVUFBVTtRQUNSQyxRQUFRO1lBQ05DLFVBQVU7Z0JBQ1JDLFVBQVU7WUFDWjtRQUNGO0lBQ0Y7SUFDQUMsUUFBUTtRQUNOO1lBQ0VDLE1BQU07WUFDTkMsTUFBTTtRQUNSO1FBQ0E7WUFDRUQsTUFBTTtZQUNOQyxNQUFNO1lBQ05DLGNBQWM7WUFDZEMsT0FBTztnQkFDTEMsZ0JBQWdCO29CQUFDcEIscUVBQWdCQTtpQkFBQztZQUNwQztZQUNBcUIsT0FBTztRQUNUO0tBQ0Q7QUFDSCxFQUFDIiwic291cmNlcyI6WyIvaG9tZS9taWxkZmlyZS9yZXBvcy9BQURTL2V4YW1wbGUtcGF5bG9hZC9tdWx0aS10ZW5hbnQtZXhhbXBsZS9tdWx0aS10ZW5hbnQtZXhhbXBsZS9zcmMvY29sbGVjdGlvbnMvUGFnZXMvaW5kZXgudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBDb2xsZWN0aW9uQ29uZmlnIH0gZnJvbSAncGF5bG9hZCdcblxuaW1wb3J0IHsgZW5zdXJlVW5pcXVlU2x1ZyB9IGZyb20gJy4vaG9va3MvZW5zdXJlVW5pcXVlU2x1ZydcbmltcG9ydCB7IHN1cGVyQWRtaW5PclRlbmFudEFkbWluQWNjZXNzIH0gZnJvbSAnQC9jb2xsZWN0aW9ucy9QYWdlcy9hY2Nlc3Mvc3VwZXJBZG1pbk9yVGVuYW50QWRtaW4nXG5cbmV4cG9ydCBjb25zdCBQYWdlczogQ29sbGVjdGlvbkNvbmZpZyA9IHtcbiAgc2x1ZzogJ3BhZ2VzJyxcbiAgYWNjZXNzOiB7XG4gICAgY3JlYXRlOiBzdXBlckFkbWluT3JUZW5hbnRBZG1pbkFjY2VzcyxcbiAgICBkZWxldGU6IHN1cGVyQWRtaW5PclRlbmFudEFkbWluQWNjZXNzLFxuICAgIHJlYWQ6ICgpID0+IHRydWUsXG4gICAgdXBkYXRlOiBzdXBlckFkbWluT3JUZW5hbnRBZG1pbkFjY2VzcyxcbiAgfSxcbiAgYWRtaW46IHtcbiAgICB1c2VBc1RpdGxlOiAndGl0bGUnLFxuICB9LFxuICB2ZXJzaW9uczoge1xuICAgIGRyYWZ0czoge1xuICAgICAgYXV0b3NhdmU6IHtcbiAgICAgICAgaW50ZXJ2YWw6IDM3NSwgLy8gQXV0by1zYXZlIGV2ZXJ5IDM3NW1zIGFzIHlvdSB0eXBlXG4gICAgICB9LFxuICAgIH0sXG4gIH0sXG4gIGZpZWxkczogW1xuICAgIHtcbiAgICAgIG5hbWU6ICd0aXRsZScsXG4gICAgICB0eXBlOiAndGV4dCcsXG4gICAgfSxcbiAgICB7XG4gICAgICBuYW1lOiAnc2x1ZycsXG4gICAgICB0eXBlOiAndGV4dCcsXG4gICAgICBkZWZhdWx0VmFsdWU6ICdob21lJyxcbiAgICAgIGhvb2tzOiB7XG4gICAgICAgIGJlZm9yZVZhbGlkYXRlOiBbZW5zdXJlVW5pcXVlU2x1Z10sXG4gICAgICB9LFxuICAgICAgaW5kZXg6IHRydWUsXG4gICAgfSxcbiAgXSxcbn1cbiJdLCJuYW1lcyI6WyJlbnN1cmVVbmlxdWVTbHVnIiwic3VwZXJBZG1pbk9yVGVuYW50QWRtaW5BY2Nlc3MiLCJQYWdlcyIsInNsdWciLCJhY2Nlc3MiLCJjcmVhdGUiLCJkZWxldGUiLCJyZWFkIiwidXBkYXRlIiwiYWRtaW4iLCJ1c2VBc1RpdGxlIiwidmVyc2lvbnMiLCJkcmFmdHMiLCJhdXRvc2F2ZSIsImludGVydmFsIiwiZmllbGRzIiwibmFtZSIsInR5cGUiLCJkZWZhdWx0VmFsdWUiLCJob29rcyIsImJlZm9yZVZhbGlkYXRlIiwiaW5kZXgiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/collections/Pages/index.ts\n");

/***/ }),

/***/ "(rsc)/./src/collections/Tenants/access/updateAndDelete.ts":
/*!***********************************************************!*\
  !*** ./src/collections/Tenants/access/updateAndDelete.ts ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   updateAndDeleteAccess: () => (/* binding */ updateAndDeleteAccess)\n/* harmony export */ });\n/* harmony import */ var _access_isSuperAdmin__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/access/isSuperAdmin */ \"(rsc)/./src/access/isSuperAdmin.ts\");\n/* harmony import */ var _utilities_getUserTenantIDs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/utilities/getUserTenantIDs */ \"(rsc)/./src/utilities/getUserTenantIDs.ts\");\n\n\nconst updateAndDeleteAccess = ({ req })=>{\n    if (!req.user) {\n        return false;\n    }\n    if ((0,_access_isSuperAdmin__WEBPACK_IMPORTED_MODULE_0__.isSuperAdmin)(req.user)) {\n        return true;\n    }\n    return {\n        id: {\n            in: (0,_utilities_getUserTenantIDs__WEBPACK_IMPORTED_MODULE_1__.getUserTenantIDs)(req.user, 'tenant-admin')\n        }\n    };\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvY29sbGVjdGlvbnMvVGVuYW50cy9hY2Nlc3MvdXBkYXRlQW5kRGVsZXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFvRDtBQUNXO0FBR3hELE1BQU1FLHdCQUFnQyxDQUFDLEVBQUVDLEdBQUcsRUFBRTtJQUNuRCxJQUFJLENBQUNBLElBQUlDLElBQUksRUFBRTtRQUNiLE9BQU87SUFDVDtJQUVBLElBQUlKLGtFQUFZQSxDQUFDRyxJQUFJQyxJQUFJLEdBQUc7UUFDMUIsT0FBTztJQUNUO0lBRUEsT0FBTztRQUNMQyxJQUFJO1lBQ0ZDLElBQUlMLDZFQUFnQkEsQ0FBQ0UsSUFBSUMsSUFBSSxFQUFFO1FBQ2pDO0lBQ0Y7QUFDRixFQUFDIiwic291cmNlcyI6WyIvaG9tZS9taWxkZmlyZS9yZXBvcy9BQURTL2V4YW1wbGUtcGF5bG9hZC9tdWx0aS10ZW5hbnQtZXhhbXBsZS9tdWx0aS10ZW5hbnQtZXhhbXBsZS9zcmMvY29sbGVjdGlvbnMvVGVuYW50cy9hY2Nlc3MvdXBkYXRlQW5kRGVsZXRlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGlzU3VwZXJBZG1pbiB9IGZyb20gJ0AvYWNjZXNzL2lzU3VwZXJBZG1pbidcbmltcG9ydCB7IGdldFVzZXJUZW5hbnRJRHMgfSBmcm9tICdAL3V0aWxpdGllcy9nZXRVc2VyVGVuYW50SURzJ1xuaW1wb3J0IHsgQWNjZXNzIH0gZnJvbSAncGF5bG9hZCdcblxuZXhwb3J0IGNvbnN0IHVwZGF0ZUFuZERlbGV0ZUFjY2VzczogQWNjZXNzID0gKHsgcmVxIH0pID0+IHtcbiAgaWYgKCFyZXEudXNlcikge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgaWYgKGlzU3VwZXJBZG1pbihyZXEudXNlcikpIHtcbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBpZDoge1xuICAgICAgaW46IGdldFVzZXJUZW5hbnRJRHMocmVxLnVzZXIsICd0ZW5hbnQtYWRtaW4nKSxcbiAgICB9LFxuICB9XG59XG4iXSwibmFtZXMiOlsiaXNTdXBlckFkbWluIiwiZ2V0VXNlclRlbmFudElEcyIsInVwZGF0ZUFuZERlbGV0ZUFjY2VzcyIsInJlcSIsInVzZXIiLCJpZCIsImluIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/collections/Tenants/access/updateAndDelete.ts\n");

/***/ }),

/***/ "(rsc)/./src/collections/Tenants/index.ts":
/*!******************************************!*\
  !*** ./src/collections/Tenants/index.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Tenants: () => (/* binding */ Tenants)\n/* harmony export */ });\n/* harmony import */ var _access_isSuperAdmin__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/access/isSuperAdmin */ \"(rsc)/./src/access/isSuperAdmin.ts\");\n/* harmony import */ var _access_updateAndDelete__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./access/updateAndDelete */ \"(rsc)/./src/collections/Tenants/access/updateAndDelete.ts\");\n\n\nconst Tenants = {\n    slug: 'tenants',\n    access: {\n        create: _access_isSuperAdmin__WEBPACK_IMPORTED_MODULE_0__.isSuperAdminAccess,\n        delete: _access_updateAndDelete__WEBPACK_IMPORTED_MODULE_1__.updateAndDeleteAccess,\n        read: ({ req })=>Boolean(req.user),\n        update: _access_updateAndDelete__WEBPACK_IMPORTED_MODULE_1__.updateAndDeleteAccess\n    },\n    admin: {\n        useAsTitle: 'name'\n    },\n    fields: [\n        {\n            name: 'name',\n            type: 'text',\n            required: true\n        },\n        {\n            name: 'domain',\n            type: 'text',\n            admin: {\n                description: 'Used for domain-based tenant handling'\n            }\n        },\n        {\n            name: 'slug',\n            type: 'text',\n            admin: {\n                description: 'Used for url paths, example: /tenant-slug/page-slug'\n            },\n            index: true,\n            required: true\n        },\n        {\n            name: 'allowPublicRead',\n            type: 'checkbox',\n            admin: {\n                description: 'If checked, logging in is not required to read. Useful for building public pages.',\n                position: 'sidebar'\n            },\n            defaultValue: false,\n            index: true\n        }\n    ]\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvY29sbGVjdGlvbnMvVGVuYW50cy9pbmRleC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFFMEQ7QUFDTTtBQUV6RCxNQUFNRSxVQUE0QjtJQUN2Q0MsTUFBTTtJQUNOQyxRQUFRO1FBQ05DLFFBQVFMLG9FQUFrQkE7UUFDMUJNLFFBQVFMLDBFQUFxQkE7UUFDN0JNLE1BQU0sQ0FBQyxFQUFFQyxHQUFHLEVBQUUsR0FBS0MsUUFBUUQsSUFBSUUsSUFBSTtRQUNuQ0MsUUFBUVYsMEVBQXFCQTtJQUMvQjtJQUNBVyxPQUFPO1FBQ0xDLFlBQVk7SUFDZDtJQUNBQyxRQUFRO1FBQ047WUFDRUMsTUFBTTtZQUNOQyxNQUFNO1lBQ05DLFVBQVU7UUFDWjtRQUNBO1lBQ0VGLE1BQU07WUFDTkMsTUFBTTtZQUNOSixPQUFPO2dCQUNMTSxhQUFhO1lBQ2Y7UUFDRjtRQUNBO1lBQ0VILE1BQU07WUFDTkMsTUFBTTtZQUNOSixPQUFPO2dCQUNMTSxhQUFhO1lBQ2Y7WUFDQUMsT0FBTztZQUNQRixVQUFVO1FBQ1o7UUFDQTtZQUNFRixNQUFNO1lBQ05DLE1BQU07WUFDTkosT0FBTztnQkFDTE0sYUFDRTtnQkFDRkUsVUFBVTtZQUNaO1lBQ0FDLGNBQWM7WUFDZEYsT0FBTztRQUNUO0tBQ0Q7QUFDSCxFQUFDIiwic291cmNlcyI6WyIvaG9tZS9taWxkZmlyZS9yZXBvcy9BQURTL2V4YW1wbGUtcGF5bG9hZC9tdWx0aS10ZW5hbnQtZXhhbXBsZS9tdWx0aS10ZW5hbnQtZXhhbXBsZS9zcmMvY29sbGVjdGlvbnMvVGVuYW50cy9pbmRleC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IENvbGxlY3Rpb25Db25maWcgfSBmcm9tICdwYXlsb2FkJ1xuXG5pbXBvcnQgeyBpc1N1cGVyQWRtaW5BY2Nlc3MgfSBmcm9tICdAL2FjY2Vzcy9pc1N1cGVyQWRtaW4nXG5pbXBvcnQgeyB1cGRhdGVBbmREZWxldGVBY2Nlc3MgfSBmcm9tICcuL2FjY2Vzcy91cGRhdGVBbmREZWxldGUnXG5cbmV4cG9ydCBjb25zdCBUZW5hbnRzOiBDb2xsZWN0aW9uQ29uZmlnID0ge1xuICBzbHVnOiAndGVuYW50cycsXG4gIGFjY2Vzczoge1xuICAgIGNyZWF0ZTogaXNTdXBlckFkbWluQWNjZXNzLFxuICAgIGRlbGV0ZTogdXBkYXRlQW5kRGVsZXRlQWNjZXNzLFxuICAgIHJlYWQ6ICh7IHJlcSB9KSA9PiBCb29sZWFuKHJlcS51c2VyKSxcbiAgICB1cGRhdGU6IHVwZGF0ZUFuZERlbGV0ZUFjY2VzcyxcbiAgfSxcbiAgYWRtaW46IHtcbiAgICB1c2VBc1RpdGxlOiAnbmFtZScsXG4gIH0sXG4gIGZpZWxkczogW1xuICAgIHtcbiAgICAgIG5hbWU6ICduYW1lJyxcbiAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgIH0sXG4gICAge1xuICAgICAgbmFtZTogJ2RvbWFpbicsXG4gICAgICB0eXBlOiAndGV4dCcsXG4gICAgICBhZG1pbjoge1xuICAgICAgICBkZXNjcmlwdGlvbjogJ1VzZWQgZm9yIGRvbWFpbi1iYXNlZCB0ZW5hbnQgaGFuZGxpbmcnLFxuICAgICAgfSxcbiAgICB9LFxuICAgIHtcbiAgICAgIG5hbWU6ICdzbHVnJyxcbiAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgIGFkbWluOiB7XG4gICAgICAgIGRlc2NyaXB0aW9uOiAnVXNlZCBmb3IgdXJsIHBhdGhzLCBleGFtcGxlOiAvdGVuYW50LXNsdWcvcGFnZS1zbHVnJyxcbiAgICAgIH0sXG4gICAgICBpbmRleDogdHJ1ZSxcbiAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgIH0sXG4gICAge1xuICAgICAgbmFtZTogJ2FsbG93UHVibGljUmVhZCcsXG4gICAgICB0eXBlOiAnY2hlY2tib3gnLFxuICAgICAgYWRtaW46IHtcbiAgICAgICAgZGVzY3JpcHRpb246XG4gICAgICAgICAgJ0lmIGNoZWNrZWQsIGxvZ2dpbmcgaW4gaXMgbm90IHJlcXVpcmVkIHRvIHJlYWQuIFVzZWZ1bCBmb3IgYnVpbGRpbmcgcHVibGljIHBhZ2VzLicsXG4gICAgICAgIHBvc2l0aW9uOiAnc2lkZWJhcicsXG4gICAgICB9LFxuICAgICAgZGVmYXVsdFZhbHVlOiBmYWxzZSxcbiAgICAgIGluZGV4OiB0cnVlLFxuICAgIH0sXG4gIF0sXG59XG4iXSwibmFtZXMiOlsiaXNTdXBlckFkbWluQWNjZXNzIiwidXBkYXRlQW5kRGVsZXRlQWNjZXNzIiwiVGVuYW50cyIsInNsdWciLCJhY2Nlc3MiLCJjcmVhdGUiLCJkZWxldGUiLCJyZWFkIiwicmVxIiwiQm9vbGVhbiIsInVzZXIiLCJ1cGRhdGUiLCJhZG1pbiIsInVzZUFzVGl0bGUiLCJmaWVsZHMiLCJuYW1lIiwidHlwZSIsInJlcXVpcmVkIiwiZGVzY3JpcHRpb24iLCJpbmRleCIsInBvc2l0aW9uIiwiZGVmYXVsdFZhbHVlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/collections/Tenants/index.ts\n");

/***/ }),

/***/ "(rsc)/./src/collections/Users/access/create.ts":
/*!************************************************!*\
  !*** ./src/collections/Users/access/create.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createAccess: () => (/* binding */ createAccess)\n/* harmony export */ });\n/* harmony import */ var _access_isSuperAdmin__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../access/isSuperAdmin */ \"(rsc)/./src/access/isSuperAdmin.ts\");\n/* harmony import */ var _utilities_getUserTenantIDs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../utilities/getUserTenantIDs */ \"(rsc)/./src/utilities/getUserTenantIDs.ts\");\n\n\nconst createAccess = ({ req })=>{\n    if (!req.user) {\n        return false;\n    }\n    if ((0,_access_isSuperAdmin__WEBPACK_IMPORTED_MODULE_0__.isSuperAdmin)(req.user)) {\n        return true;\n    }\n    if (!(0,_access_isSuperAdmin__WEBPACK_IMPORTED_MODULE_0__.isSuperAdmin)(req.user) && req.data?.roles?.includes('super-admin')) {\n        return false;\n    }\n    const adminTenantAccessIDs = (0,_utilities_getUserTenantIDs__WEBPACK_IMPORTED_MODULE_1__.getUserTenantIDs)(req.user, 'tenant-admin');\n    const requestedTenants = req.data?.tenants?.map((t)=>t.tenant) ?? [];\n    const hasAccessToAllRequestedTenants = requestedTenants.every((tenantID)=>adminTenantAccessIDs.includes(tenantID));\n    if (hasAccessToAllRequestedTenants) {\n        return true;\n    }\n    return false;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvY29sbGVjdGlvbnMvVXNlcnMvYWNjZXNzL2NyZWF0ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFJMkQ7QUFDVztBQUUvRCxNQUFNRSxlQUE2QixDQUFDLEVBQUVDLEdBQUcsRUFBRTtJQUNoRCxJQUFJLENBQUNBLElBQUlDLElBQUksRUFBRTtRQUNiLE9BQU87SUFDVDtJQUVBLElBQUlKLGtFQUFZQSxDQUFDRyxJQUFJQyxJQUFJLEdBQUc7UUFDMUIsT0FBTztJQUNUO0lBRUEsSUFBSSxDQUFDSixrRUFBWUEsQ0FBQ0csSUFBSUMsSUFBSSxLQUFLRCxJQUFJRSxJQUFJLEVBQUVDLE9BQU9DLFNBQVMsZ0JBQWdCO1FBQ3ZFLE9BQU87SUFDVDtJQUVBLE1BQU1DLHVCQUF1QlAsNkVBQWdCQSxDQUFDRSxJQUFJQyxJQUFJLEVBQUU7SUFFeEQsTUFBTUssbUJBQ0pOLElBQUlFLElBQUksRUFBRUssU0FBU0MsSUFBSSxDQUFDQyxJQUFnQ0EsRUFBRUMsTUFBTSxLQUFLLEVBQUU7SUFFekUsTUFBTUMsaUNBQWlDTCxpQkFBaUJNLEtBQUssQ0FBQyxDQUFDQyxXQUM3RFIscUJBQXFCRCxRQUFRLENBQUNTO0lBR2hDLElBQUlGLGdDQUFnQztRQUNsQyxPQUFPO0lBQ1Q7SUFFQSxPQUFPO0FBQ1QsRUFBQyIsInNvdXJjZXMiOlsiL2hvbWUvbWlsZGZpcmUvcmVwb3MvQUFEUy9leGFtcGxlLXBheWxvYWQvbXVsdGktdGVuYW50LWV4YW1wbGUvbXVsdGktdGVuYW50LWV4YW1wbGUvc3JjL2NvbGxlY3Rpb25zL1VzZXJzL2FjY2Vzcy9jcmVhdGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBBY2Nlc3MgfSBmcm9tICdwYXlsb2FkJ1xuXG5pbXBvcnQgdHlwZSB7IFRlbmFudCwgVXNlciB9IGZyb20gJy4uLy4uLy4uL3BheWxvYWQtdHlwZXMnXG5cbmltcG9ydCB7IGlzU3VwZXJBZG1pbiB9IGZyb20gJy4uLy4uLy4uL2FjY2Vzcy9pc1N1cGVyQWRtaW4nXG5pbXBvcnQgeyBnZXRVc2VyVGVuYW50SURzIH0gZnJvbSAnLi4vLi4vLi4vdXRpbGl0aWVzL2dldFVzZXJUZW5hbnRJRHMnXG5cbmV4cG9ydCBjb25zdCBjcmVhdGVBY2Nlc3M6IEFjY2VzczxVc2VyPiA9ICh7IHJlcSB9KSA9PiB7XG4gIGlmICghcmVxLnVzZXIpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGlmIChpc1N1cGVyQWRtaW4ocmVxLnVzZXIpKSB7XG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIGlmICghaXNTdXBlckFkbWluKHJlcS51c2VyKSAmJiByZXEuZGF0YT8ucm9sZXM/LmluY2x1ZGVzKCdzdXBlci1hZG1pbicpKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBjb25zdCBhZG1pblRlbmFudEFjY2Vzc0lEcyA9IGdldFVzZXJUZW5hbnRJRHMocmVxLnVzZXIsICd0ZW5hbnQtYWRtaW4nKVxuXG4gIGNvbnN0IHJlcXVlc3RlZFRlbmFudHM6IFRlbmFudFsnaWQnXVtdID1cbiAgICByZXEuZGF0YT8udGVuYW50cz8ubWFwKCh0OiB7IHRlbmFudDogVGVuYW50WydpZCddIH0pID0+IHQudGVuYW50KSA/PyBbXVxuXG4gIGNvbnN0IGhhc0FjY2Vzc1RvQWxsUmVxdWVzdGVkVGVuYW50cyA9IHJlcXVlc3RlZFRlbmFudHMuZXZlcnkoKHRlbmFudElEKSA9PlxuICAgIGFkbWluVGVuYW50QWNjZXNzSURzLmluY2x1ZGVzKHRlbmFudElEKSxcbiAgKVxuXG4gIGlmIChoYXNBY2Nlc3NUb0FsbFJlcXVlc3RlZFRlbmFudHMpIHtcbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgcmV0dXJuIGZhbHNlXG59XG4iXSwibmFtZXMiOlsiaXNTdXBlckFkbWluIiwiZ2V0VXNlclRlbmFudElEcyIsImNyZWF0ZUFjY2VzcyIsInJlcSIsInVzZXIiLCJkYXRhIiwicm9sZXMiLCJpbmNsdWRlcyIsImFkbWluVGVuYW50QWNjZXNzSURzIiwicmVxdWVzdGVkVGVuYW50cyIsInRlbmFudHMiLCJtYXAiLCJ0IiwidGVuYW50IiwiaGFzQWNjZXNzVG9BbGxSZXF1ZXN0ZWRUZW5hbnRzIiwiZXZlcnkiLCJ0ZW5hbnRJRCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/collections/Users/access/create.ts\n");

/***/ }),

/***/ "(rsc)/./src/collections/Users/access/isAccessingSelf.ts":
/*!*********************************************************!*\
  !*** ./src/collections/Users/access/isAccessingSelf.ts ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isAccessingSelf: () => (/* binding */ isAccessingSelf)\n/* harmony export */ });\nconst isAccessingSelf = ({ id, user })=>{\n    return user ? Boolean(user.id === id) : false;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvY29sbGVjdGlvbnMvVXNlcnMvYWNjZXNzL2lzQWNjZXNzaW5nU2VsZi50cyIsIm1hcHBpbmdzIjoiOzs7O0FBRU8sTUFBTUEsa0JBQWtCLENBQUMsRUFBRUMsRUFBRSxFQUFFQyxJQUFJLEVBQXlDO0lBQ2pGLE9BQU9BLE9BQU9DLFFBQVFELEtBQUtELEVBQUUsS0FBS0EsTUFBTTtBQUMxQyxFQUFDIiwic291cmNlcyI6WyIvaG9tZS9taWxkZmlyZS9yZXBvcy9BQURTL2V4YW1wbGUtcGF5bG9hZC9tdWx0aS10ZW5hbnQtZXhhbXBsZS9tdWx0aS10ZW5hbnQtZXhhbXBsZS9zcmMvY29sbGVjdGlvbnMvVXNlcnMvYWNjZXNzL2lzQWNjZXNzaW5nU2VsZi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBVc2VyIH0gZnJvbSAnQC9wYXlsb2FkLXR5cGVzJ1xuXG5leHBvcnQgY29uc3QgaXNBY2Nlc3NpbmdTZWxmID0gKHsgaWQsIHVzZXIgfTogeyB1c2VyPzogVXNlcjsgaWQ/OiBzdHJpbmcgfCBudW1iZXIgfSk6IGJvb2xlYW4gPT4ge1xuICByZXR1cm4gdXNlciA/IEJvb2xlYW4odXNlci5pZCA9PT0gaWQpIDogZmFsc2Vcbn1cbiJdLCJuYW1lcyI6WyJpc0FjY2Vzc2luZ1NlbGYiLCJpZCIsInVzZXIiLCJCb29sZWFuIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/collections/Users/access/isAccessingSelf.ts\n");

/***/ }),

/***/ "(rsc)/./src/collections/Users/access/read.ts":
/*!**********************************************!*\
  !*** ./src/collections/Users/access/read.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   readAccess: () => (/* binding */ readAccess)\n/* harmony export */ });\n/* harmony import */ var _payloadcms_plugin_multi_tenant_utilities__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @payloadcms/plugin-multi-tenant/utilities */ \"(rsc)/./node_modules/.pnpm/@payloadcms+plugin-multi-tenant@3.64.0_@payloadcms+ui@3.64.0_@types+react@19.0.1_monaco_8af145a0e04829d2ebd64574d607c797/node_modules/@payloadcms/plugin-multi-tenant/dist/utilities/getTenantFromCookie.js\");\n/* harmony import */ var _access_isSuperAdmin__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../access/isSuperAdmin */ \"(rsc)/./src/access/isSuperAdmin.ts\");\n/* harmony import */ var _utilities_getUserTenantIDs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../utilities/getUserTenantIDs */ \"(rsc)/./src/utilities/getUserTenantIDs.ts\");\n/* harmony import */ var _isAccessingSelf__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./isAccessingSelf */ \"(rsc)/./src/collections/Users/access/isAccessingSelf.ts\");\n/* harmony import */ var _utilities_getCollectionIDType__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/utilities/getCollectionIDType */ \"(rsc)/./src/utilities/getCollectionIDType.ts\");\n\n\n\n\n\nconst readAccess = ({ req, id })=>{\n    if (!req?.user) {\n        return false;\n    }\n    if ((0,_isAccessingSelf__WEBPACK_IMPORTED_MODULE_2__.isAccessingSelf)({\n        id,\n        user: req.user\n    })) {\n        return true;\n    }\n    const superAdmin = (0,_access_isSuperAdmin__WEBPACK_IMPORTED_MODULE_0__.isSuperAdmin)(req.user);\n    const selectedTenant = (0,_payloadcms_plugin_multi_tenant_utilities__WEBPACK_IMPORTED_MODULE_4__.getTenantFromCookie)(req.headers, (0,_utilities_getCollectionIDType__WEBPACK_IMPORTED_MODULE_3__.getCollectionIDType)({\n        payload: req.payload,\n        collectionSlug: 'tenants'\n    }));\n    const adminTenantAccessIDs = (0,_utilities_getUserTenantIDs__WEBPACK_IMPORTED_MODULE_1__.getUserTenantIDs)(req.user, 'tenant-admin');\n    if (selectedTenant) {\n        // If it's a super admin, or they have access to the tenant ID set in cookie\n        const hasTenantAccess = adminTenantAccessIDs.some((id)=>id === selectedTenant);\n        if (superAdmin || hasTenantAccess) {\n            return {\n                'tenants.tenant': {\n                    equals: selectedTenant\n                }\n            };\n        }\n    }\n    if (superAdmin) {\n        return true;\n    }\n    return {\n        or: [\n            {\n                id: {\n                    equals: req.user.id\n                }\n            },\n            {\n                'tenants.tenant': {\n                    in: adminTenantAccessIDs\n                }\n            }\n        ]\n    };\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvY29sbGVjdGlvbnMvVXNlcnMvYWNjZXNzL3JlYWQudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBRStFO0FBRXBCO0FBQ1c7QUFDbkI7QUFDa0I7QUFFOUQsTUFBTUssYUFBMkIsQ0FBQyxFQUFFQyxHQUFHLEVBQUVDLEVBQUUsRUFBRTtJQUNsRCxJQUFJLENBQUNELEtBQUtFLE1BQU07UUFDZCxPQUFPO0lBQ1Q7SUFFQSxJQUFJTCxpRUFBZUEsQ0FBQztRQUFFSTtRQUFJQyxNQUFNRixJQUFJRSxJQUFJO0lBQUMsSUFBSTtRQUMzQyxPQUFPO0lBQ1Q7SUFFQSxNQUFNQyxhQUFhUixrRUFBWUEsQ0FBQ0ssSUFBSUUsSUFBSTtJQUN4QyxNQUFNRSxpQkFBaUJWLDhGQUFtQkEsQ0FDeENNLElBQUlLLE9BQU8sRUFDWFAsbUZBQW1CQSxDQUFDO1FBQUVRLFNBQVNOLElBQUlNLE9BQU87UUFBRUMsZ0JBQWdCO0lBQVU7SUFFeEUsTUFBTUMsdUJBQXVCWiw2RUFBZ0JBLENBQUNJLElBQUlFLElBQUksRUFBRTtJQUV4RCxJQUFJRSxnQkFBZ0I7UUFDbEIsNEVBQTRFO1FBQzVFLE1BQU1LLGtCQUFrQkQscUJBQXFCRSxJQUFJLENBQUMsQ0FBQ1QsS0FBT0EsT0FBT0c7UUFDakUsSUFBSUQsY0FBY00saUJBQWlCO1lBQ2pDLE9BQU87Z0JBQ0wsa0JBQWtCO29CQUNoQkUsUUFBUVA7Z0JBQ1Y7WUFDRjtRQUNGO0lBQ0Y7SUFFQSxJQUFJRCxZQUFZO1FBQ2QsT0FBTztJQUNUO0lBRUEsT0FBTztRQUNMUyxJQUFJO1lBQ0Y7Z0JBQ0VYLElBQUk7b0JBQ0ZVLFFBQVFYLElBQUlFLElBQUksQ0FBQ0QsRUFBRTtnQkFDckI7WUFDRjtZQUNBO2dCQUNFLGtCQUFrQjtvQkFDaEJZLElBQUlMO2dCQUNOO1lBQ0Y7U0FDRDtJQUNIO0FBQ0YsRUFBQyIsInNvdXJjZXMiOlsiL2hvbWUvbWlsZGZpcmUvcmVwb3MvQUFEUy9leGFtcGxlLXBheWxvYWQvbXVsdGktdGVuYW50LWV4YW1wbGUvbXVsdGktdGVuYW50LWV4YW1wbGUvc3JjL2NvbGxlY3Rpb25zL1VzZXJzL2FjY2Vzcy9yZWFkLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgVXNlciB9IGZyb20gJ0AvcGF5bG9hZC10eXBlcydcbmltcG9ydCB0eXBlIHsgQWNjZXNzLCBXaGVyZSB9IGZyb20gJ3BheWxvYWQnXG5pbXBvcnQgeyBnZXRUZW5hbnRGcm9tQ29va2llIH0gZnJvbSAnQHBheWxvYWRjbXMvcGx1Z2luLW11bHRpLXRlbmFudC91dGlsaXRpZXMnXG5cbmltcG9ydCB7IGlzU3VwZXJBZG1pbiB9IGZyb20gJy4uLy4uLy4uL2FjY2Vzcy9pc1N1cGVyQWRtaW4nXG5pbXBvcnQgeyBnZXRVc2VyVGVuYW50SURzIH0gZnJvbSAnLi4vLi4vLi4vdXRpbGl0aWVzL2dldFVzZXJUZW5hbnRJRHMnXG5pbXBvcnQgeyBpc0FjY2Vzc2luZ1NlbGYgfSBmcm9tICcuL2lzQWNjZXNzaW5nU2VsZidcbmltcG9ydCB7IGdldENvbGxlY3Rpb25JRFR5cGUgfSBmcm9tICdAL3V0aWxpdGllcy9nZXRDb2xsZWN0aW9uSURUeXBlJ1xuXG5leHBvcnQgY29uc3QgcmVhZEFjY2VzczogQWNjZXNzPFVzZXI+ID0gKHsgcmVxLCBpZCB9KSA9PiB7XG4gIGlmICghcmVxPy51c2VyKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBpZiAoaXNBY2Nlc3NpbmdTZWxmKHsgaWQsIHVzZXI6IHJlcS51c2VyIH0pKSB7XG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIGNvbnN0IHN1cGVyQWRtaW4gPSBpc1N1cGVyQWRtaW4ocmVxLnVzZXIpXG4gIGNvbnN0IHNlbGVjdGVkVGVuYW50ID0gZ2V0VGVuYW50RnJvbUNvb2tpZShcbiAgICByZXEuaGVhZGVycyxcbiAgICBnZXRDb2xsZWN0aW9uSURUeXBlKHsgcGF5bG9hZDogcmVxLnBheWxvYWQsIGNvbGxlY3Rpb25TbHVnOiAndGVuYW50cycgfSksXG4gIClcbiAgY29uc3QgYWRtaW5UZW5hbnRBY2Nlc3NJRHMgPSBnZXRVc2VyVGVuYW50SURzKHJlcS51c2VyLCAndGVuYW50LWFkbWluJylcblxuICBpZiAoc2VsZWN0ZWRUZW5hbnQpIHtcbiAgICAvLyBJZiBpdCdzIGEgc3VwZXIgYWRtaW4sIG9yIHRoZXkgaGF2ZSBhY2Nlc3MgdG8gdGhlIHRlbmFudCBJRCBzZXQgaW4gY29va2llXG4gICAgY29uc3QgaGFzVGVuYW50QWNjZXNzID0gYWRtaW5UZW5hbnRBY2Nlc3NJRHMuc29tZSgoaWQpID0+IGlkID09PSBzZWxlY3RlZFRlbmFudClcbiAgICBpZiAoc3VwZXJBZG1pbiB8fCBoYXNUZW5hbnRBY2Nlc3MpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgICd0ZW5hbnRzLnRlbmFudCc6IHtcbiAgICAgICAgICBlcXVhbHM6IHNlbGVjdGVkVGVuYW50LFxuICAgICAgICB9LFxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGlmIChzdXBlckFkbWluKSB7XG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgb3I6IFtcbiAgICAgIHtcbiAgICAgICAgaWQ6IHtcbiAgICAgICAgICBlcXVhbHM6IHJlcS51c2VyLmlkLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgJ3RlbmFudHMudGVuYW50Jzoge1xuICAgICAgICAgIGluOiBhZG1pblRlbmFudEFjY2Vzc0lEcyxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgXSxcbiAgfSBhcyBXaGVyZVxufVxuIl0sIm5hbWVzIjpbImdldFRlbmFudEZyb21Db29raWUiLCJpc1N1cGVyQWRtaW4iLCJnZXRVc2VyVGVuYW50SURzIiwiaXNBY2Nlc3NpbmdTZWxmIiwiZ2V0Q29sbGVjdGlvbklEVHlwZSIsInJlYWRBY2Nlc3MiLCJyZXEiLCJpZCIsInVzZXIiLCJzdXBlckFkbWluIiwic2VsZWN0ZWRUZW5hbnQiLCJoZWFkZXJzIiwicGF5bG9hZCIsImNvbGxlY3Rpb25TbHVnIiwiYWRtaW5UZW5hbnRBY2Nlc3NJRHMiLCJoYXNUZW5hbnRBY2Nlc3MiLCJzb21lIiwiZXF1YWxzIiwib3IiLCJpbiJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/collections/Users/access/read.ts\n");

/***/ }),

/***/ "(rsc)/./src/collections/Users/access/updateAndDelete.ts":
/*!*********************************************************!*\
  !*** ./src/collections/Users/access/updateAndDelete.ts ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   updateAndDeleteAccess: () => (/* binding */ updateAndDeleteAccess)\n/* harmony export */ });\n/* harmony import */ var _utilities_getUserTenantIDs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../utilities/getUserTenantIDs */ \"(rsc)/./src/utilities/getUserTenantIDs.ts\");\n/* harmony import */ var _access_isSuperAdmin__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/access/isSuperAdmin */ \"(rsc)/./src/access/isSuperAdmin.ts\");\n/* harmony import */ var _isAccessingSelf__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./isAccessingSelf */ \"(rsc)/./src/collections/Users/access/isAccessingSelf.ts\");\n\n\n\nconst updateAndDeleteAccess = ({ req, id })=>{\n    const { user } = req;\n    if (!user) {\n        return false;\n    }\n    if ((0,_access_isSuperAdmin__WEBPACK_IMPORTED_MODULE_1__.isSuperAdmin)(user) || (0,_isAccessingSelf__WEBPACK_IMPORTED_MODULE_2__.isAccessingSelf)({\n        user,\n        id\n    })) {\n        return true;\n    }\n    /**\n   * Constrains update and delete access to users that belong\n   * to the same tenant as the tenant-admin making the request\n   *\n   * You may want to take this a step further with a beforeChange\n   * hook to ensure that the a tenant-admin can only remove users\n   * from their own tenant in the tenants array.\n   */ return {\n        'tenants.tenant': {\n            in: (0,_utilities_getUserTenantIDs__WEBPACK_IMPORTED_MODULE_0__.getUserTenantIDs)(user, 'tenant-admin')\n        }\n    };\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvY29sbGVjdGlvbnMvVXNlcnMvYWNjZXNzL3VwZGF0ZUFuZERlbGV0ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBRXNFO0FBQ2xCO0FBQ0Q7QUFFNUMsTUFBTUcsd0JBQWdDLENBQUMsRUFBRUMsR0FBRyxFQUFFQyxFQUFFLEVBQUU7SUFDdkQsTUFBTSxFQUFFQyxJQUFJLEVBQUUsR0FBR0Y7SUFFakIsSUFBSSxDQUFDRSxNQUFNO1FBQ1QsT0FBTztJQUNUO0lBRUEsSUFBSUwsa0VBQVlBLENBQUNLLFNBQVNKLGlFQUFlQSxDQUFDO1FBQUVJO1FBQU1EO0lBQUcsSUFBSTtRQUN2RCxPQUFPO0lBQ1Q7SUFFQTs7Ozs7OztHQU9DLEdBQ0QsT0FBTztRQUNMLGtCQUFrQjtZQUNoQkUsSUFBSVAsNkVBQWdCQSxDQUFDTSxNQUFNO1FBQzdCO0lBQ0Y7QUFDRixFQUFDIiwic291cmNlcyI6WyIvaG9tZS9taWxkZmlyZS9yZXBvcy9BQURTL2V4YW1wbGUtcGF5bG9hZC9tdWx0aS10ZW5hbnQtZXhhbXBsZS9tdWx0aS10ZW5hbnQtZXhhbXBsZS9zcmMvY29sbGVjdGlvbnMvVXNlcnMvYWNjZXNzL3VwZGF0ZUFuZERlbGV0ZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IEFjY2VzcyB9IGZyb20gJ3BheWxvYWQnXG5cbmltcG9ydCB7IGdldFVzZXJUZW5hbnRJRHMgfSBmcm9tICcuLi8uLi8uLi91dGlsaXRpZXMvZ2V0VXNlclRlbmFudElEcydcbmltcG9ydCB7IGlzU3VwZXJBZG1pbiB9IGZyb20gJ0AvYWNjZXNzL2lzU3VwZXJBZG1pbidcbmltcG9ydCB7IGlzQWNjZXNzaW5nU2VsZiB9IGZyb20gJy4vaXNBY2Nlc3NpbmdTZWxmJ1xuXG5leHBvcnQgY29uc3QgdXBkYXRlQW5kRGVsZXRlQWNjZXNzOiBBY2Nlc3MgPSAoeyByZXEsIGlkIH0pID0+IHtcbiAgY29uc3QgeyB1c2VyIH0gPSByZXFcblxuICBpZiAoIXVzZXIpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGlmIChpc1N1cGVyQWRtaW4odXNlcikgfHwgaXNBY2Nlc3NpbmdTZWxmKHsgdXNlciwgaWQgfSkpIHtcbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgLyoqXG4gICAqIENvbnN0cmFpbnMgdXBkYXRlIGFuZCBkZWxldGUgYWNjZXNzIHRvIHVzZXJzIHRoYXQgYmVsb25nXG4gICAqIHRvIHRoZSBzYW1lIHRlbmFudCBhcyB0aGUgdGVuYW50LWFkbWluIG1ha2luZyB0aGUgcmVxdWVzdFxuICAgKlxuICAgKiBZb3UgbWF5IHdhbnQgdG8gdGFrZSB0aGlzIGEgc3RlcCBmdXJ0aGVyIHdpdGggYSBiZWZvcmVDaGFuZ2VcbiAgICogaG9vayB0byBlbnN1cmUgdGhhdCB0aGUgYSB0ZW5hbnQtYWRtaW4gY2FuIG9ubHkgcmVtb3ZlIHVzZXJzXG4gICAqIGZyb20gdGhlaXIgb3duIHRlbmFudCBpbiB0aGUgdGVuYW50cyBhcnJheS5cbiAgICovXG4gIHJldHVybiB7XG4gICAgJ3RlbmFudHMudGVuYW50Jzoge1xuICAgICAgaW46IGdldFVzZXJUZW5hbnRJRHModXNlciwgJ3RlbmFudC1hZG1pbicpLFxuICAgIH0sXG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJnZXRVc2VyVGVuYW50SURzIiwiaXNTdXBlckFkbWluIiwiaXNBY2Nlc3NpbmdTZWxmIiwidXBkYXRlQW5kRGVsZXRlQWNjZXNzIiwicmVxIiwiaWQiLCJ1c2VyIiwiaW4iXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/collections/Users/access/updateAndDelete.ts\n");

/***/ }),

/***/ "(rsc)/./src/collections/Users/endpoints/externalUsersLogin.ts":
/*!***************************************************************!*\
  !*** ./src/collections/Users/endpoints/externalUsersLogin.ts ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   externalUsersLogin: () => (/* binding */ externalUsersLogin)\n/* harmony export */ });\n/* harmony import */ var _payloadcms_next_utilities__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @payloadcms/next/utilities */ \"(rsc)/./node_modules/.pnpm/@payloadcms+next@3.64.0_@types+react@19.0.1_graphql@16.12.0_monaco-editor@0.54.0_next@1_fbebdb68d675befed4124b29602e4e61/node_modules/@payloadcms/next/dist/exports/utilities.js\");\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.64.0_graphql@16.12.0_typescript@5.5.2/node_modules/payload/dist/errors/APIError.js\");\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.64.0_graphql@16.12.0_typescript@5.5.2/node_modules/payload/dist/auth/cookies.js\");\n\n\n// A custom endpoint that can be reached by POST request\n// at: /api/users/external-users/login\nconst externalUsersLogin = {\n    handler: async (req)=>{\n        let data = {};\n        try {\n            if (typeof req.json === 'function') {\n                data = await req.json();\n            }\n        } catch (error) {\n        // swallow error, data is already empty object\n        }\n        const { password, tenantSlug, tenantDomain, username } = data;\n        if (!username || !password) {\n            throw new payload__WEBPACK_IMPORTED_MODULE_0__.APIError('Username and Password are required for login.', 400, null, true);\n        }\n        const fullTenant = (await req.payload.find({\n            collection: 'tenants',\n            where: tenantDomain ? {\n                domain: {\n                    equals: tenantDomain\n                }\n            } : {\n                slug: {\n                    equals: tenantSlug\n                }\n            }\n        })).docs[0];\n        const foundUser = await req.payload.find({\n            collection: 'users',\n            where: {\n                or: [\n                    {\n                        and: [\n                            {\n                                email: {\n                                    equals: username\n                                }\n                            },\n                            {\n                                'tenants.tenant': {\n                                    equals: fullTenant.id\n                                }\n                            }\n                        ]\n                    },\n                    {\n                        and: [\n                            {\n                                username: {\n                                    equals: username\n                                }\n                            },\n                            {\n                                'tenants.tenant': {\n                                    equals: fullTenant.id\n                                }\n                            }\n                        ]\n                    }\n                ]\n            }\n        });\n        if (foundUser.totalDocs > 0) {\n            try {\n                const loginAttempt = await req.payload.login({\n                    collection: 'users',\n                    data: {\n                        email: foundUser.docs[0].email,\n                        password\n                    },\n                    req\n                });\n                if (loginAttempt?.token) {\n                    const collection = req.payload.collections['users'];\n                    const cookie = (0,payload__WEBPACK_IMPORTED_MODULE_1__.generatePayloadCookie)({\n                        collectionAuthConfig: collection.config.auth,\n                        cookiePrefix: req.payload.config.cookiePrefix,\n                        token: loginAttempt.token\n                    });\n                    return Response.json(loginAttempt, {\n                        headers: (0,_payloadcms_next_utilities__WEBPACK_IMPORTED_MODULE_2__.headersWithCors)({\n                            headers: new Headers({\n                                'Set-Cookie': cookie\n                            }),\n                            req\n                        }),\n                        status: 200\n                    });\n                }\n                throw new payload__WEBPACK_IMPORTED_MODULE_0__.APIError('Unable to login with the provided username and password.', 400, null, true);\n            } catch (e) {\n                throw new payload__WEBPACK_IMPORTED_MODULE_0__.APIError('Unable to login with the provided username and password.', 400, null, true);\n            }\n        }\n        throw new payload__WEBPACK_IMPORTED_MODULE_0__.APIError('Unable to login with the provided username and password.', 400, null, true);\n    },\n    method: 'post',\n    path: '/external-users/login'\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvY29sbGVjdGlvbnMvVXNlcnMvZW5kcG9pbnRzL2V4dGVybmFsVXNlcnNMb2dpbi50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBRTREO0FBQ0g7QUFFekQsd0RBQXdEO0FBQ3hELHNDQUFzQztBQUMvQixNQUFNRyxxQkFBK0I7SUFDMUNDLFNBQVMsT0FBT0M7UUFDZCxJQUFJQyxPQUFrQyxDQUFDO1FBRXZDLElBQUk7WUFDRixJQUFJLE9BQU9ELElBQUlFLElBQUksS0FBSyxZQUFZO2dCQUNsQ0QsT0FBTyxNQUFNRCxJQUFJRSxJQUFJO1lBQ3ZCO1FBQ0YsRUFBRSxPQUFPQyxPQUFPO1FBQ2QsOENBQThDO1FBQ2hEO1FBQ0EsTUFBTSxFQUFFQyxRQUFRLEVBQUVDLFVBQVUsRUFBRUMsWUFBWSxFQUFFQyxRQUFRLEVBQUUsR0FBR047UUFFekQsSUFBSSxDQUFDTSxZQUFZLENBQUNILFVBQVU7WUFDMUIsTUFBTSxJQUFJUiw2Q0FBUUEsQ0FBQyxpREFBaUQsS0FBSyxNQUFNO1FBQ2pGO1FBRUEsTUFBTVksYUFBYSxDQUNqQixNQUFNUixJQUFJUyxPQUFPLENBQUNDLElBQUksQ0FBQztZQUNyQkMsWUFBWTtZQUNaQyxPQUFPTixlQUNIO2dCQUNFTyxRQUFRO29CQUNOQyxRQUFRUjtnQkFDVjtZQUNGLElBQ0E7Z0JBQ0VTLE1BQU07b0JBQ0pELFFBQVFUO2dCQUNWO1lBQ0Y7UUFDTixFQUFDLEVBQ0RXLElBQUksQ0FBQyxFQUFFO1FBRVQsTUFBTUMsWUFBWSxNQUFNakIsSUFBSVMsT0FBTyxDQUFDQyxJQUFJLENBQUM7WUFDdkNDLFlBQVk7WUFDWkMsT0FBTztnQkFDTE0sSUFBSTtvQkFDRjt3QkFDRUMsS0FBSzs0QkFDSDtnQ0FDRUMsT0FBTztvQ0FDTE4sUUFBUVA7Z0NBQ1Y7NEJBQ0Y7NEJBQ0E7Z0NBQ0Usa0JBQWtCO29DQUNoQk8sUUFBUU4sV0FBV2EsRUFBRTtnQ0FDdkI7NEJBQ0Y7eUJBQ0Q7b0JBQ0g7b0JBQ0E7d0JBQ0VGLEtBQUs7NEJBQ0g7Z0NBQ0VaLFVBQVU7b0NBQ1JPLFFBQVFQO2dDQUNWOzRCQUNGOzRCQUNBO2dDQUNFLGtCQUFrQjtvQ0FDaEJPLFFBQVFOLFdBQVdhLEVBQUU7Z0NBQ3ZCOzRCQUNGO3lCQUNEO29CQUNIO2lCQUNEO1lBQ0g7UUFDRjtRQUVBLElBQUlKLFVBQVVLLFNBQVMsR0FBRyxHQUFHO1lBQzNCLElBQUk7Z0JBQ0YsTUFBTUMsZUFBZSxNQUFNdkIsSUFBSVMsT0FBTyxDQUFDZSxLQUFLLENBQUM7b0JBQzNDYixZQUFZO29CQUNaVixNQUFNO3dCQUNKbUIsT0FBT0gsVUFBVUQsSUFBSSxDQUFDLEVBQUUsQ0FBQ0ksS0FBSzt3QkFDOUJoQjtvQkFDRjtvQkFDQUo7Z0JBQ0Y7Z0JBRUEsSUFBSXVCLGNBQWNFLE9BQU87b0JBQ3ZCLE1BQU1kLGFBQXlCLElBQUtGLE9BQU8sQ0FBQ2lCLFdBQVcsQ0FDckQsUUFDRDtvQkFDRCxNQUFNQyxTQUFTOUIsOERBQXFCQSxDQUFDO3dCQUNuQytCLHNCQUFzQmpCLFdBQVdrQixNQUFNLENBQUNDLElBQUk7d0JBQzVDQyxjQUFjL0IsSUFBSVMsT0FBTyxDQUFDb0IsTUFBTSxDQUFDRSxZQUFZO3dCQUM3Q04sT0FBT0YsYUFBYUUsS0FBSztvQkFDM0I7b0JBRUEsT0FBT08sU0FBUzlCLElBQUksQ0FBQ3FCLGNBQWM7d0JBQ2pDVSxTQUFTdEMsMkVBQWVBLENBQUM7NEJBQ3ZCc0MsU0FBUyxJQUFJQyxRQUFRO2dDQUNuQixjQUFjUDs0QkFDaEI7NEJBQ0EzQjt3QkFDRjt3QkFDQW1DLFFBQVE7b0JBQ1Y7Z0JBQ0Y7Z0JBRUEsTUFBTSxJQUFJdkMsNkNBQVFBLENBQ2hCLDREQUNBLEtBQ0EsTUFDQTtZQUVKLEVBQUUsT0FBT3dDLEdBQUc7Z0JBQ1YsTUFBTSxJQUFJeEMsNkNBQVFBLENBQ2hCLDREQUNBLEtBQ0EsTUFDQTtZQUVKO1FBQ0Y7UUFFQSxNQUFNLElBQUlBLDZDQUFRQSxDQUFDLDREQUE0RCxLQUFLLE1BQU07SUFDNUY7SUFDQXlDLFFBQVE7SUFDUkMsTUFBTTtBQUNSLEVBQUMiLCJzb3VyY2VzIjpbIi9ob21lL21pbGRmaXJlL3JlcG9zL0FBRFMvZXhhbXBsZS1wYXlsb2FkL211bHRpLXRlbmFudC1leGFtcGxlL211bHRpLXRlbmFudC1leGFtcGxlL3NyYy9jb2xsZWN0aW9ucy9Vc2Vycy9lbmRwb2ludHMvZXh0ZXJuYWxVc2Vyc0xvZ2luLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgQ29sbGVjdGlvbiwgRW5kcG9pbnQgfSBmcm9tICdwYXlsb2FkJ1xuXG5pbXBvcnQgeyBoZWFkZXJzV2l0aENvcnMgfSBmcm9tICdAcGF5bG9hZGNtcy9uZXh0L3V0aWxpdGllcydcbmltcG9ydCB7IEFQSUVycm9yLCBnZW5lcmF0ZVBheWxvYWRDb29raWUgfSBmcm9tICdwYXlsb2FkJ1xuXG4vLyBBIGN1c3RvbSBlbmRwb2ludCB0aGF0IGNhbiBiZSByZWFjaGVkIGJ5IFBPU1QgcmVxdWVzdFxuLy8gYXQ6IC9hcGkvdXNlcnMvZXh0ZXJuYWwtdXNlcnMvbG9naW5cbmV4cG9ydCBjb25zdCBleHRlcm5hbFVzZXJzTG9naW46IEVuZHBvaW50ID0ge1xuICBoYW5kbGVyOiBhc3luYyAocmVxKSA9PiB7XG4gICAgbGV0IGRhdGE6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH0gPSB7fVxuXG4gICAgdHJ5IHtcbiAgICAgIGlmICh0eXBlb2YgcmVxLmpzb24gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgZGF0YSA9IGF3YWl0IHJlcS5qc29uKClcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgLy8gc3dhbGxvdyBlcnJvciwgZGF0YSBpcyBhbHJlYWR5IGVtcHR5IG9iamVjdFxuICAgIH1cbiAgICBjb25zdCB7IHBhc3N3b3JkLCB0ZW5hbnRTbHVnLCB0ZW5hbnREb21haW4sIHVzZXJuYW1lIH0gPSBkYXRhXG5cbiAgICBpZiAoIXVzZXJuYW1lIHx8ICFwYXNzd29yZCkge1xuICAgICAgdGhyb3cgbmV3IEFQSUVycm9yKCdVc2VybmFtZSBhbmQgUGFzc3dvcmQgYXJlIHJlcXVpcmVkIGZvciBsb2dpbi4nLCA0MDAsIG51bGwsIHRydWUpXG4gICAgfVxuXG4gICAgY29uc3QgZnVsbFRlbmFudCA9IChcbiAgICAgIGF3YWl0IHJlcS5wYXlsb2FkLmZpbmQoe1xuICAgICAgICBjb2xsZWN0aW9uOiAndGVuYW50cycsXG4gICAgICAgIHdoZXJlOiB0ZW5hbnREb21haW5cbiAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgZG9tYWluOiB7XG4gICAgICAgICAgICAgICAgZXF1YWxzOiB0ZW5hbnREb21haW4sXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9XG4gICAgICAgICAgOiB7XG4gICAgICAgICAgICAgIHNsdWc6IHtcbiAgICAgICAgICAgICAgICBlcXVhbHM6IHRlbmFudFNsdWcsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgfSlcbiAgICApLmRvY3NbMF1cblxuICAgIGNvbnN0IGZvdW5kVXNlciA9IGF3YWl0IHJlcS5wYXlsb2FkLmZpbmQoe1xuICAgICAgY29sbGVjdGlvbjogJ3VzZXJzJyxcbiAgICAgIHdoZXJlOiB7XG4gICAgICAgIG9yOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgYW5kOiBbXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBlbWFpbDoge1xuICAgICAgICAgICAgICAgICAgZXF1YWxzOiB1c2VybmFtZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgJ3RlbmFudHMudGVuYW50Jzoge1xuICAgICAgICAgICAgICAgICAgZXF1YWxzOiBmdWxsVGVuYW50LmlkLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgYW5kOiBbXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB1c2VybmFtZToge1xuICAgICAgICAgICAgICAgICAgZXF1YWxzOiB1c2VybmFtZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgJ3RlbmFudHMudGVuYW50Jzoge1xuICAgICAgICAgICAgICAgICAgZXF1YWxzOiBmdWxsVGVuYW50LmlkLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICB9LFxuICAgIH0pXG5cbiAgICBpZiAoZm91bmRVc2VyLnRvdGFsRG9jcyA+IDApIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGxvZ2luQXR0ZW1wdCA9IGF3YWl0IHJlcS5wYXlsb2FkLmxvZ2luKHtcbiAgICAgICAgICBjb2xsZWN0aW9uOiAndXNlcnMnLFxuICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIGVtYWlsOiBmb3VuZFVzZXIuZG9jc1swXS5lbWFpbCxcbiAgICAgICAgICAgIHBhc3N3b3JkLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgcmVxLFxuICAgICAgICB9KVxuXG4gICAgICAgIGlmIChsb2dpbkF0dGVtcHQ/LnRva2VuKSB7XG4gICAgICAgICAgY29uc3QgY29sbGVjdGlvbjogQ29sbGVjdGlvbiA9IChyZXEucGF5bG9hZC5jb2xsZWN0aW9ucyBhcyB7IFtrZXk6IHN0cmluZ106IENvbGxlY3Rpb24gfSlbXG4gICAgICAgICAgICAndXNlcnMnXG4gICAgICAgICAgXVxuICAgICAgICAgIGNvbnN0IGNvb2tpZSA9IGdlbmVyYXRlUGF5bG9hZENvb2tpZSh7XG4gICAgICAgICAgICBjb2xsZWN0aW9uQXV0aENvbmZpZzogY29sbGVjdGlvbi5jb25maWcuYXV0aCxcbiAgICAgICAgICAgIGNvb2tpZVByZWZpeDogcmVxLnBheWxvYWQuY29uZmlnLmNvb2tpZVByZWZpeCxcbiAgICAgICAgICAgIHRva2VuOiBsb2dpbkF0dGVtcHQudG9rZW4sXG4gICAgICAgICAgfSlcblxuICAgICAgICAgIHJldHVybiBSZXNwb25zZS5qc29uKGxvZ2luQXR0ZW1wdCwge1xuICAgICAgICAgICAgaGVhZGVyczogaGVhZGVyc1dpdGhDb3JzKHtcbiAgICAgICAgICAgICAgaGVhZGVyczogbmV3IEhlYWRlcnMoe1xuICAgICAgICAgICAgICAgICdTZXQtQ29va2llJzogY29va2llLFxuICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgcmVxLFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBzdGF0dXM6IDIwMCxcbiAgICAgICAgICB9KVxuICAgICAgICB9XG5cbiAgICAgICAgdGhyb3cgbmV3IEFQSUVycm9yKFxuICAgICAgICAgICdVbmFibGUgdG8gbG9naW4gd2l0aCB0aGUgcHJvdmlkZWQgdXNlcm5hbWUgYW5kIHBhc3N3b3JkLicsXG4gICAgICAgICAgNDAwLFxuICAgICAgICAgIG51bGwsXG4gICAgICAgICAgdHJ1ZSxcbiAgICAgICAgKVxuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICB0aHJvdyBuZXcgQVBJRXJyb3IoXG4gICAgICAgICAgJ1VuYWJsZSB0byBsb2dpbiB3aXRoIHRoZSBwcm92aWRlZCB1c2VybmFtZSBhbmQgcGFzc3dvcmQuJyxcbiAgICAgICAgICA0MDAsXG4gICAgICAgICAgbnVsbCxcbiAgICAgICAgICB0cnVlLFxuICAgICAgICApXG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhyb3cgbmV3IEFQSUVycm9yKCdVbmFibGUgdG8gbG9naW4gd2l0aCB0aGUgcHJvdmlkZWQgdXNlcm5hbWUgYW5kIHBhc3N3b3JkLicsIDQwMCwgbnVsbCwgdHJ1ZSlcbiAgfSxcbiAgbWV0aG9kOiAncG9zdCcsXG4gIHBhdGg6ICcvZXh0ZXJuYWwtdXNlcnMvbG9naW4nLFxufVxuIl0sIm5hbWVzIjpbImhlYWRlcnNXaXRoQ29ycyIsIkFQSUVycm9yIiwiZ2VuZXJhdGVQYXlsb2FkQ29va2llIiwiZXh0ZXJuYWxVc2Vyc0xvZ2luIiwiaGFuZGxlciIsInJlcSIsImRhdGEiLCJqc29uIiwiZXJyb3IiLCJwYXNzd29yZCIsInRlbmFudFNsdWciLCJ0ZW5hbnREb21haW4iLCJ1c2VybmFtZSIsImZ1bGxUZW5hbnQiLCJwYXlsb2FkIiwiZmluZCIsImNvbGxlY3Rpb24iLCJ3aGVyZSIsImRvbWFpbiIsImVxdWFscyIsInNsdWciLCJkb2NzIiwiZm91bmRVc2VyIiwib3IiLCJhbmQiLCJlbWFpbCIsImlkIiwidG90YWxEb2NzIiwibG9naW5BdHRlbXB0IiwibG9naW4iLCJ0b2tlbiIsImNvbGxlY3Rpb25zIiwiY29va2llIiwiY29sbGVjdGlvbkF1dGhDb25maWciLCJjb25maWciLCJhdXRoIiwiY29va2llUHJlZml4IiwiUmVzcG9uc2UiLCJoZWFkZXJzIiwiSGVhZGVycyIsInN0YXR1cyIsImUiLCJtZXRob2QiLCJwYXRoIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/collections/Users/endpoints/externalUsersLogin.ts\n");

/***/ }),

/***/ "(rsc)/./src/collections/Users/hooks/ensureUniqueUsername.ts":
/*!*************************************************************!*\
  !*** ./src/collections/Users/hooks/ensureUniqueUsername.ts ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ensureUniqueUsername: () => (/* binding */ ensureUniqueUsername)\n/* harmony export */ });\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.64.0_graphql@16.12.0_typescript@5.5.2/node_modules/payload/dist/errors/ValidationError.js\");\n/* harmony import */ var _utilities_getUserTenantIDs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../utilities/getUserTenantIDs */ \"(rsc)/./src/utilities/getUserTenantIDs.ts\");\n/* harmony import */ var _payloadcms_plugin_multi_tenant_utilities__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @payloadcms/plugin-multi-tenant/utilities */ \"(rsc)/./node_modules/.pnpm/@payloadcms+plugin-multi-tenant@3.64.0_@payloadcms+ui@3.64.0_@types+react@19.0.1_monaco_8af145a0e04829d2ebd64574d607c797/node_modules/@payloadcms/plugin-multi-tenant/dist/utilities/getTenantFromCookie.js\");\n/* harmony import */ var _utilities_getCollectionIDType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/utilities/getCollectionIDType */ \"(rsc)/./src/utilities/getCollectionIDType.ts\");\n\n\n\n\nconst ensureUniqueUsername = async ({ data, originalDoc, req, value })=>{\n    // if value is unchanged, skip validation\n    if (originalDoc.username === value) {\n        return value;\n    }\n    const constraints = [\n        {\n            username: {\n                equals: value\n            }\n        }\n    ];\n    const selectedTenant = (0,_payloadcms_plugin_multi_tenant_utilities__WEBPACK_IMPORTED_MODULE_2__.getTenantFromCookie)(req.headers, (0,_utilities_getCollectionIDType__WEBPACK_IMPORTED_MODULE_1__.getCollectionIDType)({\n        payload: req.payload,\n        collectionSlug: 'tenants'\n    }));\n    if (selectedTenant) {\n        constraints.push({\n            'tenants.tenant': {\n                equals: selectedTenant\n            }\n        });\n    }\n    const findDuplicateUsers = await req.payload.find({\n        collection: 'users',\n        where: {\n            and: constraints\n        }\n    });\n    if (findDuplicateUsers.docs.length > 0 && req.user) {\n        const tenantIDs = (0,_utilities_getUserTenantIDs__WEBPACK_IMPORTED_MODULE_0__.getUserTenantIDs)(req.user);\n        // if the user is an admin or has access to more than 1 tenant\n        // provide a more specific error message\n        if (req.user.roles?.includes('super-admin') || tenantIDs.length > 1) {\n            const attemptedTenantChange = await req.payload.findByID({\n                // @ts-ignore - selectedTenant will match DB ID type\n                id: selectedTenant,\n                collection: 'tenants'\n            });\n            throw new payload__WEBPACK_IMPORTED_MODULE_3__.ValidationError({\n                errors: [\n                    {\n                        message: `The \"${attemptedTenantChange.name}\" tenant already has a user with the username \"${value}\". Usernames must be unique per tenant.`,\n                        path: 'username'\n                    }\n                ]\n            });\n        }\n        throw new payload__WEBPACK_IMPORTED_MODULE_3__.ValidationError({\n            errors: [\n                {\n                    message: `A user with the username ${value} already exists. Usernames must be unique per tenant.`,\n                    path: 'username'\n                }\n            ]\n        });\n    }\n    return value;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvY29sbGVjdGlvbnMvVXNlcnMvaG9va3MvZW5zdXJlVW5pcXVlVXNlcm5hbWUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFFeUM7QUFFNkI7QUFFUztBQUNWO0FBRTlELE1BQU1JLHVCQUFrQyxPQUFPLEVBQUVDLElBQUksRUFBRUMsV0FBVyxFQUFFQyxHQUFHLEVBQUVDLEtBQUssRUFBRTtJQUNyRix5Q0FBeUM7SUFDekMsSUFBSUYsWUFBWUcsUUFBUSxLQUFLRCxPQUFPO1FBQ2xDLE9BQU9BO0lBQ1Q7SUFFQSxNQUFNRSxjQUF1QjtRQUMzQjtZQUNFRCxVQUFVO2dCQUNSRSxRQUFRSDtZQUNWO1FBQ0Y7S0FDRDtJQUVELE1BQU1JLGlCQUFpQlYsOEZBQW1CQSxDQUN4Q0ssSUFBSU0sT0FBTyxFQUNYVixtRkFBbUJBLENBQUM7UUFBRVcsU0FBU1AsSUFBSU8sT0FBTztRQUFFQyxnQkFBZ0I7SUFBVTtJQUd4RSxJQUFJSCxnQkFBZ0I7UUFDbEJGLFlBQVlNLElBQUksQ0FBQztZQUNmLGtCQUFrQjtnQkFDaEJMLFFBQVFDO1lBQ1Y7UUFDRjtJQUNGO0lBRUEsTUFBTUsscUJBQXFCLE1BQU1WLElBQUlPLE9BQU8sQ0FBQ0ksSUFBSSxDQUFDO1FBQ2hEQyxZQUFZO1FBQ1pDLE9BQU87WUFDTEMsS0FBS1g7UUFDUDtJQUNGO0lBRUEsSUFBSU8sbUJBQW1CSyxJQUFJLENBQUNDLE1BQU0sR0FBRyxLQUFLaEIsSUFBSWlCLElBQUksRUFBRTtRQUNsRCxNQUFNQyxZQUFZeEIsNkVBQWdCQSxDQUFDTSxJQUFJaUIsSUFBSTtRQUMzQyw4REFBOEQ7UUFDOUQsd0NBQXdDO1FBQ3hDLElBQUlqQixJQUFJaUIsSUFBSSxDQUFDRSxLQUFLLEVBQUVDLFNBQVMsa0JBQWtCRixVQUFVRixNQUFNLEdBQUcsR0FBRztZQUNuRSxNQUFNSyx3QkFBd0IsTUFBTXJCLElBQUlPLE9BQU8sQ0FBQ2UsUUFBUSxDQUFDO2dCQUN2RCxvREFBb0Q7Z0JBQ3BEQyxJQUFJbEI7Z0JBQ0pPLFlBQVk7WUFDZDtZQUVBLE1BQU0sSUFBSW5CLG9EQUFlQSxDQUFDO2dCQUN4QitCLFFBQVE7b0JBQ047d0JBQ0VDLFNBQVMsQ0FBQyxLQUFLLEVBQUVKLHNCQUFzQkssSUFBSSxDQUFDLCtDQUErQyxFQUFFekIsTUFBTSx1Q0FBdUMsQ0FBQzt3QkFDM0kwQixNQUFNO29CQUNSO2lCQUNEO1lBQ0g7UUFDRjtRQUVBLE1BQU0sSUFBSWxDLG9EQUFlQSxDQUFDO1lBQ3hCK0IsUUFBUTtnQkFDTjtvQkFDRUMsU0FBUyxDQUFDLHlCQUF5QixFQUFFeEIsTUFBTSxxREFBcUQsQ0FBQztvQkFDakcwQixNQUFNO2dCQUNSO2FBQ0Q7UUFDSDtJQUNGO0lBRUEsT0FBTzFCO0FBQ1QsRUFBQyIsInNvdXJjZXMiOlsiL2hvbWUvbWlsZGZpcmUvcmVwb3MvQUFEUy9leGFtcGxlLXBheWxvYWQvbXVsdGktdGVuYW50LWV4YW1wbGUvbXVsdGktdGVuYW50LWV4YW1wbGUvc3JjL2NvbGxlY3Rpb25zL1VzZXJzL2hvb2tzL2Vuc3VyZVVuaXF1ZVVzZXJuYW1lLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgRmllbGRIb29rLCBXaGVyZSB9IGZyb20gJ3BheWxvYWQnXG5cbmltcG9ydCB7IFZhbGlkYXRpb25FcnJvciB9IGZyb20gJ3BheWxvYWQnXG5cbmltcG9ydCB7IGdldFVzZXJUZW5hbnRJRHMgfSBmcm9tICcuLi8uLi8uLi91dGlsaXRpZXMvZ2V0VXNlclRlbmFudElEcydcbmltcG9ydCB7IGV4dHJhY3RJRCB9IGZyb20gJ0AvdXRpbGl0aWVzL2V4dHJhY3RJRCdcbmltcG9ydCB7IGdldFRlbmFudEZyb21Db29raWUgfSBmcm9tICdAcGF5bG9hZGNtcy9wbHVnaW4tbXVsdGktdGVuYW50L3V0aWxpdGllcydcbmltcG9ydCB7IGdldENvbGxlY3Rpb25JRFR5cGUgfSBmcm9tICdAL3V0aWxpdGllcy9nZXRDb2xsZWN0aW9uSURUeXBlJ1xuXG5leHBvcnQgY29uc3QgZW5zdXJlVW5pcXVlVXNlcm5hbWU6IEZpZWxkSG9vayA9IGFzeW5jICh7IGRhdGEsIG9yaWdpbmFsRG9jLCByZXEsIHZhbHVlIH0pID0+IHtcbiAgLy8gaWYgdmFsdWUgaXMgdW5jaGFuZ2VkLCBza2lwIHZhbGlkYXRpb25cbiAgaWYgKG9yaWdpbmFsRG9jLnVzZXJuYW1lID09PSB2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZVxuICB9XG5cbiAgY29uc3QgY29uc3RyYWludHM6IFdoZXJlW10gPSBbXG4gICAge1xuICAgICAgdXNlcm5hbWU6IHtcbiAgICAgICAgZXF1YWxzOiB2YWx1ZSxcbiAgICAgIH0sXG4gICAgfSxcbiAgXVxuXG4gIGNvbnN0IHNlbGVjdGVkVGVuYW50ID0gZ2V0VGVuYW50RnJvbUNvb2tpZShcbiAgICByZXEuaGVhZGVycyxcbiAgICBnZXRDb2xsZWN0aW9uSURUeXBlKHsgcGF5bG9hZDogcmVxLnBheWxvYWQsIGNvbGxlY3Rpb25TbHVnOiAndGVuYW50cycgfSksXG4gIClcblxuICBpZiAoc2VsZWN0ZWRUZW5hbnQpIHtcbiAgICBjb25zdHJhaW50cy5wdXNoKHtcbiAgICAgICd0ZW5hbnRzLnRlbmFudCc6IHtcbiAgICAgICAgZXF1YWxzOiBzZWxlY3RlZFRlbmFudCxcbiAgICAgIH0sXG4gICAgfSlcbiAgfVxuXG4gIGNvbnN0IGZpbmREdXBsaWNhdGVVc2VycyA9IGF3YWl0IHJlcS5wYXlsb2FkLmZpbmQoe1xuICAgIGNvbGxlY3Rpb246ICd1c2VycycsXG4gICAgd2hlcmU6IHtcbiAgICAgIGFuZDogY29uc3RyYWludHMsXG4gICAgfSxcbiAgfSlcblxuICBpZiAoZmluZER1cGxpY2F0ZVVzZXJzLmRvY3MubGVuZ3RoID4gMCAmJiByZXEudXNlcikge1xuICAgIGNvbnN0IHRlbmFudElEcyA9IGdldFVzZXJUZW5hbnRJRHMocmVxLnVzZXIpXG4gICAgLy8gaWYgdGhlIHVzZXIgaXMgYW4gYWRtaW4gb3IgaGFzIGFjY2VzcyB0byBtb3JlIHRoYW4gMSB0ZW5hbnRcbiAgICAvLyBwcm92aWRlIGEgbW9yZSBzcGVjaWZpYyBlcnJvciBtZXNzYWdlXG4gICAgaWYgKHJlcS51c2VyLnJvbGVzPy5pbmNsdWRlcygnc3VwZXItYWRtaW4nKSB8fCB0ZW5hbnRJRHMubGVuZ3RoID4gMSkge1xuICAgICAgY29uc3QgYXR0ZW1wdGVkVGVuYW50Q2hhbmdlID0gYXdhaXQgcmVxLnBheWxvYWQuZmluZEJ5SUQoe1xuICAgICAgICAvLyBAdHMtaWdub3JlIC0gc2VsZWN0ZWRUZW5hbnQgd2lsbCBtYXRjaCBEQiBJRCB0eXBlXG4gICAgICAgIGlkOiBzZWxlY3RlZFRlbmFudCxcbiAgICAgICAgY29sbGVjdGlvbjogJ3RlbmFudHMnLFxuICAgICAgfSlcblxuICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcih7XG4gICAgICAgIGVycm9yczogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IGBUaGUgXCIke2F0dGVtcHRlZFRlbmFudENoYW5nZS5uYW1lfVwiIHRlbmFudCBhbHJlYWR5IGhhcyBhIHVzZXIgd2l0aCB0aGUgdXNlcm5hbWUgXCIke3ZhbHVlfVwiLiBVc2VybmFtZXMgbXVzdCBiZSB1bmlxdWUgcGVyIHRlbmFudC5gLFxuICAgICAgICAgICAgcGF0aDogJ3VzZXJuYW1lJyxcbiAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgICAgfSlcbiAgICB9XG5cbiAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKHtcbiAgICAgIGVycm9yczogW1xuICAgICAgICB7XG4gICAgICAgICAgbWVzc2FnZTogYEEgdXNlciB3aXRoIHRoZSB1c2VybmFtZSAke3ZhbHVlfSBhbHJlYWR5IGV4aXN0cy4gVXNlcm5hbWVzIG11c3QgYmUgdW5pcXVlIHBlciB0ZW5hbnQuYCxcbiAgICAgICAgICBwYXRoOiAndXNlcm5hbWUnLFxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICB9KVxuICB9XG5cbiAgcmV0dXJuIHZhbHVlXG59XG4iXSwibmFtZXMiOlsiVmFsaWRhdGlvbkVycm9yIiwiZ2V0VXNlclRlbmFudElEcyIsImdldFRlbmFudEZyb21Db29raWUiLCJnZXRDb2xsZWN0aW9uSURUeXBlIiwiZW5zdXJlVW5pcXVlVXNlcm5hbWUiLCJkYXRhIiwib3JpZ2luYWxEb2MiLCJyZXEiLCJ2YWx1ZSIsInVzZXJuYW1lIiwiY29uc3RyYWludHMiLCJlcXVhbHMiLCJzZWxlY3RlZFRlbmFudCIsImhlYWRlcnMiLCJwYXlsb2FkIiwiY29sbGVjdGlvblNsdWciLCJwdXNoIiwiZmluZER1cGxpY2F0ZVVzZXJzIiwiZmluZCIsImNvbGxlY3Rpb24iLCJ3aGVyZSIsImFuZCIsImRvY3MiLCJsZW5ndGgiLCJ1c2VyIiwidGVuYW50SURzIiwicm9sZXMiLCJpbmNsdWRlcyIsImF0dGVtcHRlZFRlbmFudENoYW5nZSIsImZpbmRCeUlEIiwiaWQiLCJlcnJvcnMiLCJtZXNzYWdlIiwibmFtZSIsInBhdGgiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/collections/Users/hooks/ensureUniqueUsername.ts\n");

/***/ }),

/***/ "(rsc)/./src/collections/Users/hooks/setCookieBasedOnDomain.ts":
/*!***************************************************************!*\
  !*** ./src/collections/Users/hooks/setCookieBasedOnDomain.ts ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   setCookieBasedOnDomain: () => (/* binding */ setCookieBasedOnDomain)\n/* harmony export */ });\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.64.0_graphql@16.12.0_typescript@5.5.2/node_modules/payload/dist/auth/cookies.js\");\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.64.0_graphql@16.12.0_typescript@5.5.2/node_modules/payload/dist/utilities/mergeHeaders.js\");\n\nconst setCookieBasedOnDomain = async ({ req, user })=>{\n    const relatedOrg = await req.payload.find({\n        collection: 'tenants',\n        depth: 0,\n        limit: 1,\n        where: {\n            domain: {\n                equals: req.headers.get('host')\n            }\n        }\n    });\n    // If a matching tenant is found, set the 'payload-tenant' cookie\n    if (relatedOrg && relatedOrg.docs.length > 0) {\n        const tenantCookie = (0,payload__WEBPACK_IMPORTED_MODULE_0__.generateCookie)({\n            name: 'payload-tenant',\n            expires: (0,payload__WEBPACK_IMPORTED_MODULE_0__.getCookieExpiration)({\n                seconds: 7200\n            }),\n            path: '/',\n            returnCookieAsObject: false,\n            value: String(relatedOrg.docs[0].id)\n        });\n        // Merge existing responseHeaders with the new Set-Cookie header\n        const newHeaders = new Headers({\n            'Set-Cookie': tenantCookie\n        });\n        // Ensure you merge existing response headers if they already exist\n        req.responseHeaders = req.responseHeaders ? (0,payload__WEBPACK_IMPORTED_MODULE_1__.mergeHeaders)(req.responseHeaders, newHeaders) : newHeaders;\n    }\n    return user;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvY29sbGVjdGlvbnMvVXNlcnMvaG9va3Mvc2V0Q29va2llQmFzZWRPbkRvbWFpbi50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFFMkU7QUFFcEUsTUFBTUcseUJBQW1ELE9BQU8sRUFBRUMsR0FBRyxFQUFFQyxJQUFJLEVBQUU7SUFDbEYsTUFBTUMsYUFBYSxNQUFNRixJQUFJRyxPQUFPLENBQUNDLElBQUksQ0FBQztRQUN4Q0MsWUFBWTtRQUNaQyxPQUFPO1FBQ1BDLE9BQU87UUFDUEMsT0FBTztZQUNMQyxRQUFRO2dCQUNOQyxRQUFRVixJQUFJVyxPQUFPLENBQUNDLEdBQUcsQ0FBQztZQUMxQjtRQUNGO0lBQ0Y7SUFFQSxpRUFBaUU7SUFDakUsSUFBSVYsY0FBY0EsV0FBV1csSUFBSSxDQUFDQyxNQUFNLEdBQUcsR0FBRztRQUM1QyxNQUFNQyxlQUFlbEIsdURBQWNBLENBQUM7WUFDbENtQixNQUFNO1lBQ05DLFNBQVNuQiw0REFBbUJBLENBQUM7Z0JBQUVvQixTQUFTO1lBQUs7WUFDN0NDLE1BQU07WUFDTkMsc0JBQXNCO1lBQ3RCQyxPQUFPQyxPQUFPcEIsV0FBV1csSUFBSSxDQUFDLEVBQUUsQ0FBQ1UsRUFBRTtRQUNyQztRQUVBLGdFQUFnRTtRQUNoRSxNQUFNQyxhQUFhLElBQUlDLFFBQVE7WUFDN0IsY0FBY1Y7UUFDaEI7UUFFQSxtRUFBbUU7UUFDbkVmLElBQUkwQixlQUFlLEdBQUcxQixJQUFJMEIsZUFBZSxHQUNyQzlCLHFEQUFZQSxDQUFDSSxJQUFJMEIsZUFBZSxFQUFFRixjQUNsQ0E7SUFDTjtJQUVBLE9BQU92QjtBQUNULEVBQUMiLCJzb3VyY2VzIjpbIi9ob21lL21pbGRmaXJlL3JlcG9zL0FBRFMvZXhhbXBsZS1wYXlsb2FkL211bHRpLXRlbmFudC1leGFtcGxlL211bHRpLXRlbmFudC1leGFtcGxlL3NyYy9jb2xsZWN0aW9ucy9Vc2Vycy9ob29rcy9zZXRDb29raWVCYXNlZE9uRG9tYWluLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgQ29sbGVjdGlvbkFmdGVyTG9naW5Ib29rIH0gZnJvbSAncGF5bG9hZCdcblxuaW1wb3J0IHsgbWVyZ2VIZWFkZXJzLCBnZW5lcmF0ZUNvb2tpZSwgZ2V0Q29va2llRXhwaXJhdGlvbiB9IGZyb20gJ3BheWxvYWQnXG5cbmV4cG9ydCBjb25zdCBzZXRDb29raWVCYXNlZE9uRG9tYWluOiBDb2xsZWN0aW9uQWZ0ZXJMb2dpbkhvb2sgPSBhc3luYyAoeyByZXEsIHVzZXIgfSkgPT4ge1xuICBjb25zdCByZWxhdGVkT3JnID0gYXdhaXQgcmVxLnBheWxvYWQuZmluZCh7XG4gICAgY29sbGVjdGlvbjogJ3RlbmFudHMnLFxuICAgIGRlcHRoOiAwLFxuICAgIGxpbWl0OiAxLFxuICAgIHdoZXJlOiB7XG4gICAgICBkb21haW46IHtcbiAgICAgICAgZXF1YWxzOiByZXEuaGVhZGVycy5nZXQoJ2hvc3QnKSxcbiAgICAgIH0sXG4gICAgfSxcbiAgfSlcblxuICAvLyBJZiBhIG1hdGNoaW5nIHRlbmFudCBpcyBmb3VuZCwgc2V0IHRoZSAncGF5bG9hZC10ZW5hbnQnIGNvb2tpZVxuICBpZiAocmVsYXRlZE9yZyAmJiByZWxhdGVkT3JnLmRvY3MubGVuZ3RoID4gMCkge1xuICAgIGNvbnN0IHRlbmFudENvb2tpZSA9IGdlbmVyYXRlQ29va2llKHtcbiAgICAgIG5hbWU6ICdwYXlsb2FkLXRlbmFudCcsXG4gICAgICBleHBpcmVzOiBnZXRDb29raWVFeHBpcmF0aW9uKHsgc2Vjb25kczogNzIwMCB9KSxcbiAgICAgIHBhdGg6ICcvJyxcbiAgICAgIHJldHVybkNvb2tpZUFzT2JqZWN0OiBmYWxzZSxcbiAgICAgIHZhbHVlOiBTdHJpbmcocmVsYXRlZE9yZy5kb2NzWzBdLmlkKSxcbiAgICB9KVxuXG4gICAgLy8gTWVyZ2UgZXhpc3RpbmcgcmVzcG9uc2VIZWFkZXJzIHdpdGggdGhlIG5ldyBTZXQtQ29va2llIGhlYWRlclxuICAgIGNvbnN0IG5ld0hlYWRlcnMgPSBuZXcgSGVhZGVycyh7XG4gICAgICAnU2V0LUNvb2tpZSc6IHRlbmFudENvb2tpZSBhcyBzdHJpbmcsXG4gICAgfSlcblxuICAgIC8vIEVuc3VyZSB5b3UgbWVyZ2UgZXhpc3RpbmcgcmVzcG9uc2UgaGVhZGVycyBpZiB0aGV5IGFscmVhZHkgZXhpc3RcbiAgICByZXEucmVzcG9uc2VIZWFkZXJzID0gcmVxLnJlc3BvbnNlSGVhZGVyc1xuICAgICAgPyBtZXJnZUhlYWRlcnMocmVxLnJlc3BvbnNlSGVhZGVycywgbmV3SGVhZGVycylcbiAgICAgIDogbmV3SGVhZGVyc1xuICB9XG5cbiAgcmV0dXJuIHVzZXJcbn1cbiJdLCJuYW1lcyI6WyJtZXJnZUhlYWRlcnMiLCJnZW5lcmF0ZUNvb2tpZSIsImdldENvb2tpZUV4cGlyYXRpb24iLCJzZXRDb29raWVCYXNlZE9uRG9tYWluIiwicmVxIiwidXNlciIsInJlbGF0ZWRPcmciLCJwYXlsb2FkIiwiZmluZCIsImNvbGxlY3Rpb24iLCJkZXB0aCIsImxpbWl0Iiwid2hlcmUiLCJkb21haW4iLCJlcXVhbHMiLCJoZWFkZXJzIiwiZ2V0IiwiZG9jcyIsImxlbmd0aCIsInRlbmFudENvb2tpZSIsIm5hbWUiLCJleHBpcmVzIiwic2Vjb25kcyIsInBhdGgiLCJyZXR1cm5Db29raWVBc09iamVjdCIsInZhbHVlIiwiU3RyaW5nIiwiaWQiLCJuZXdIZWFkZXJzIiwiSGVhZGVycyIsInJlc3BvbnNlSGVhZGVycyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/collections/Users/hooks/setCookieBasedOnDomain.ts\n");

/***/ }),

/***/ "(rsc)/./src/collections/Users/index.ts":
/*!****************************************!*\
  !*** ./src/collections/Users/index.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _access_create__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./access/create */ \"(rsc)/./src/collections/Users/access/create.ts\");\n/* harmony import */ var _access_read__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./access/read */ \"(rsc)/./src/collections/Users/access/read.ts\");\n/* harmony import */ var _access_updateAndDelete__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./access/updateAndDelete */ \"(rsc)/./src/collections/Users/access/updateAndDelete.ts\");\n/* harmony import */ var _endpoints_externalUsersLogin__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./endpoints/externalUsersLogin */ \"(rsc)/./src/collections/Users/endpoints/externalUsersLogin.ts\");\n/* harmony import */ var _hooks_ensureUniqueUsername__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./hooks/ensureUniqueUsername */ \"(rsc)/./src/collections/Users/hooks/ensureUniqueUsername.ts\");\n/* harmony import */ var _access_isSuperAdmin__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/access/isSuperAdmin */ \"(rsc)/./src/access/isSuperAdmin.ts\");\n/* harmony import */ var _hooks_setCookieBasedOnDomain__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./hooks/setCookieBasedOnDomain */ \"(rsc)/./src/collections/Users/hooks/setCookieBasedOnDomain.ts\");\n/* harmony import */ var _payloadcms_plugin_multi_tenant_fields__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @payloadcms/plugin-multi-tenant/fields */ \"(rsc)/./node_modules/.pnpm/@payloadcms+plugin-multi-tenant@3.64.0_@payloadcms+ui@3.64.0_@types+react@19.0.1_monaco_8af145a0e04829d2ebd64574d607c797/node_modules/@payloadcms/plugin-multi-tenant/dist/fields/tenantsArrayField/index.js\");\n\n\n\n\n\n\n\n\nconst defaultTenantArrayField = (0,_payloadcms_plugin_multi_tenant_fields__WEBPACK_IMPORTED_MODULE_7__.tenantsArrayField)({\n    tenantsArrayFieldName: 'tenants',\n    tenantsArrayTenantFieldName: 'tenant',\n    tenantsCollectionSlug: 'tenants',\n    arrayFieldAccess: {},\n    tenantFieldAccess: {},\n    rowFields: [\n        {\n            name: 'roles',\n            type: 'select',\n            defaultValue: [\n                'tenant-viewer'\n            ],\n            hasMany: true,\n            options: [\n                'tenant-admin',\n                'tenant-viewer'\n            ],\n            required: true,\n            access: {\n                update: ({ req })=>{\n                    const { user } = req;\n                    if (!user) {\n                        return false;\n                    }\n                    if ((0,_access_isSuperAdmin__WEBPACK_IMPORTED_MODULE_5__.isSuperAdmin)(user)) {\n                        return true;\n                    }\n                    return true;\n                }\n            }\n        }\n    ]\n});\nconst Users = {\n    slug: 'users',\n    access: {\n        create: _access_create__WEBPACK_IMPORTED_MODULE_0__.createAccess,\n        delete: _access_updateAndDelete__WEBPACK_IMPORTED_MODULE_2__.updateAndDeleteAccess,\n        read: _access_read__WEBPACK_IMPORTED_MODULE_1__.readAccess,\n        update: _access_updateAndDelete__WEBPACK_IMPORTED_MODULE_2__.updateAndDeleteAccess\n    },\n    admin: {\n        useAsTitle: 'email'\n    },\n    auth: true,\n    endpoints: [\n        _endpoints_externalUsersLogin__WEBPACK_IMPORTED_MODULE_3__.externalUsersLogin\n    ],\n    fields: [\n        {\n            type: 'text',\n            name: 'password',\n            hidden: true,\n            access: {\n                read: ()=>false,\n                update: ({ req, id })=>{\n                    const { user } = req;\n                    if (!user) {\n                        return false;\n                    }\n                    if (id === user.id) {\n                        // Allow user to update their own password\n                        return true;\n                    }\n                    return (0,_access_isSuperAdmin__WEBPACK_IMPORTED_MODULE_5__.isSuperAdmin)(user);\n                }\n            }\n        },\n        {\n            admin: {\n                position: 'sidebar'\n            },\n            name: 'roles',\n            type: 'select',\n            defaultValue: [\n                'user'\n            ],\n            hasMany: true,\n            options: [\n                'super-admin',\n                'user'\n            ],\n            access: {\n                update: ({ req })=>{\n                    return (0,_access_isSuperAdmin__WEBPACK_IMPORTED_MODULE_5__.isSuperAdmin)(req.user);\n                }\n            }\n        },\n        {\n            name: 'username',\n            type: 'text',\n            hooks: {\n                beforeValidate: [\n                    _hooks_ensureUniqueUsername__WEBPACK_IMPORTED_MODULE_4__.ensureUniqueUsername\n                ]\n            },\n            index: true\n        },\n        {\n            ...defaultTenantArrayField,\n            admin: {\n                ...defaultTenantArrayField?.admin || {},\n                position: 'sidebar'\n            }\n        }\n    ],\n    // The following hook sets a cookie based on the domain a user logs in from.\n    // It checks the domain and matches it to a tenant in the system, then sets\n    // a 'payload-tenant' cookie for that tenant.\n    hooks: {\n        afterLogin: [\n            _hooks_setCookieBasedOnDomain__WEBPACK_IMPORTED_MODULE_6__.setCookieBasedOnDomain\n        ]\n    }\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Users);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvY29sbGVjdGlvbnMvVXNlcnMvaW5kZXgudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBRThDO0FBQ0o7QUFDc0I7QUFDRztBQUNBO0FBQ2Y7QUFDbUI7QUFDRztBQUUxRSxNQUFNUSwwQkFBMEJELHlGQUFpQkEsQ0FBQztJQUNoREUsdUJBQXVCO0lBQ3ZCQyw2QkFBNkI7SUFDN0JDLHVCQUF1QjtJQUN2QkMsa0JBQWtCLENBQUM7SUFDbkJDLG1CQUFtQixDQUFDO0lBQ3BCQyxXQUFXO1FBQ1Q7WUFDRUMsTUFBTTtZQUNOQyxNQUFNO1lBQ05DLGNBQWM7Z0JBQUM7YUFBZ0I7WUFDL0JDLFNBQVM7WUFDVEMsU0FBUztnQkFBQztnQkFBZ0I7YUFBZ0I7WUFDMUNDLFVBQVU7WUFDVkMsUUFBUTtnQkFDTkMsUUFBUSxDQUFDLEVBQUVDLEdBQUcsRUFBRTtvQkFDZCxNQUFNLEVBQUVDLElBQUksRUFBRSxHQUFHRDtvQkFDakIsSUFBSSxDQUFDQyxNQUFNO3dCQUNULE9BQU87b0JBQ1Q7b0JBRUEsSUFBSW5CLGtFQUFZQSxDQUFDbUIsT0FBTzt3QkFDdEIsT0FBTztvQkFDVDtvQkFFQSxPQUFPO2dCQUNUO1lBQ0Y7UUFDRjtLQUNEO0FBQ0g7QUFFQSxNQUFNQyxRQUEwQjtJQUM5QkMsTUFBTTtJQUNOTCxRQUFRO1FBQ05NLFFBQVEzQix3REFBWUE7UUFDcEI0QixRQUFRMUIsMEVBQXFCQTtRQUM3QjJCLE1BQU01QixvREFBVUE7UUFDaEJxQixRQUFRcEIsMEVBQXFCQTtJQUMvQjtJQUNBNEIsT0FBTztRQUNMQyxZQUFZO0lBQ2Q7SUFDQUMsTUFBTTtJQUNOQyxXQUFXO1FBQUM5Qiw2RUFBa0JBO0tBQUM7SUFDL0IrQixRQUFRO1FBQ047WUFDRWxCLE1BQU07WUFDTkQsTUFBTTtZQUNOb0IsUUFBUTtZQUNSZCxRQUFRO2dCQUNOUSxNQUFNLElBQU07Z0JBQ1pQLFFBQVEsQ0FBQyxFQUFFQyxHQUFHLEVBQUVhLEVBQUUsRUFBRTtvQkFDbEIsTUFBTSxFQUFFWixJQUFJLEVBQUUsR0FBR0Q7b0JBQ2pCLElBQUksQ0FBQ0MsTUFBTTt3QkFDVCxPQUFPO29CQUNUO29CQUVBLElBQUlZLE9BQU9aLEtBQUtZLEVBQUUsRUFBRTt3QkFDbEIsMENBQTBDO3dCQUMxQyxPQUFPO29CQUNUO29CQUVBLE9BQU8vQixrRUFBWUEsQ0FBQ21CO2dCQUN0QjtZQUNGO1FBQ0Y7UUFDQTtZQUNFTSxPQUFPO2dCQUNMTyxVQUFVO1lBQ1o7WUFDQXRCLE1BQU07WUFDTkMsTUFBTTtZQUNOQyxjQUFjO2dCQUFDO2FBQU87WUFDdEJDLFNBQVM7WUFDVEMsU0FBUztnQkFBQztnQkFBZTthQUFPO1lBQ2hDRSxRQUFRO2dCQUNOQyxRQUFRLENBQUMsRUFBRUMsR0FBRyxFQUFFO29CQUNkLE9BQU9sQixrRUFBWUEsQ0FBQ2tCLElBQUlDLElBQUk7Z0JBQzlCO1lBQ0Y7UUFDRjtRQUNBO1lBQ0VULE1BQU07WUFDTkMsTUFBTTtZQUNOc0IsT0FBTztnQkFDTEMsZ0JBQWdCO29CQUFDbkMsNkVBQW9CQTtpQkFBQztZQUN4QztZQUNBb0MsT0FBTztRQUNUO1FBQ0E7WUFDRSxHQUFHaEMsdUJBQXVCO1lBQzFCc0IsT0FBTztnQkFDTCxHQUFJdEIseUJBQXlCc0IsU0FBUyxDQUFDLENBQUM7Z0JBQ3hDTyxVQUFVO1lBQ1o7UUFDRjtLQUNEO0lBQ0QsNEVBQTRFO0lBQzVFLDJFQUEyRTtJQUMzRSw2Q0FBNkM7SUFFN0NDLE9BQU87UUFDTEcsWUFBWTtZQUFDbkMsaUZBQXNCQTtTQUFDO0lBQ3RDO0FBQ0Y7QUFFQSxpRUFBZW1CLEtBQUtBLEVBQUEiLCJzb3VyY2VzIjpbIi9ob21lL21pbGRmaXJlL3JlcG9zL0FBRFMvZXhhbXBsZS1wYXlsb2FkL211bHRpLXRlbmFudC1leGFtcGxlL211bHRpLXRlbmFudC1leGFtcGxlL3NyYy9jb2xsZWN0aW9ucy9Vc2Vycy9pbmRleC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IENvbGxlY3Rpb25Db25maWcgfSBmcm9tICdwYXlsb2FkJ1xuXG5pbXBvcnQgeyBjcmVhdGVBY2Nlc3MgfSBmcm9tICcuL2FjY2Vzcy9jcmVhdGUnXG5pbXBvcnQgeyByZWFkQWNjZXNzIH0gZnJvbSAnLi9hY2Nlc3MvcmVhZCdcbmltcG9ydCB7IHVwZGF0ZUFuZERlbGV0ZUFjY2VzcyB9IGZyb20gJy4vYWNjZXNzL3VwZGF0ZUFuZERlbGV0ZSdcbmltcG9ydCB7IGV4dGVybmFsVXNlcnNMb2dpbiB9IGZyb20gJy4vZW5kcG9pbnRzL2V4dGVybmFsVXNlcnNMb2dpbidcbmltcG9ydCB7IGVuc3VyZVVuaXF1ZVVzZXJuYW1lIH0gZnJvbSAnLi9ob29rcy9lbnN1cmVVbmlxdWVVc2VybmFtZSdcbmltcG9ydCB7IGlzU3VwZXJBZG1pbiB9IGZyb20gJ0AvYWNjZXNzL2lzU3VwZXJBZG1pbidcbmltcG9ydCB7IHNldENvb2tpZUJhc2VkT25Eb21haW4gfSBmcm9tICcuL2hvb2tzL3NldENvb2tpZUJhc2VkT25Eb21haW4nXG5pbXBvcnQgeyB0ZW5hbnRzQXJyYXlGaWVsZCB9IGZyb20gJ0BwYXlsb2FkY21zL3BsdWdpbi1tdWx0aS10ZW5hbnQvZmllbGRzJ1xuXG5jb25zdCBkZWZhdWx0VGVuYW50QXJyYXlGaWVsZCA9IHRlbmFudHNBcnJheUZpZWxkKHtcbiAgdGVuYW50c0FycmF5RmllbGROYW1lOiAndGVuYW50cycsXG4gIHRlbmFudHNBcnJheVRlbmFudEZpZWxkTmFtZTogJ3RlbmFudCcsXG4gIHRlbmFudHNDb2xsZWN0aW9uU2x1ZzogJ3RlbmFudHMnLFxuICBhcnJheUZpZWxkQWNjZXNzOiB7fSxcbiAgdGVuYW50RmllbGRBY2Nlc3M6IHt9LFxuICByb3dGaWVsZHM6IFtcbiAgICB7XG4gICAgICBuYW1lOiAncm9sZXMnLFxuICAgICAgdHlwZTogJ3NlbGVjdCcsXG4gICAgICBkZWZhdWx0VmFsdWU6IFsndGVuYW50LXZpZXdlciddLFxuICAgICAgaGFzTWFueTogdHJ1ZSxcbiAgICAgIG9wdGlvbnM6IFsndGVuYW50LWFkbWluJywgJ3RlbmFudC12aWV3ZXInXSxcbiAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgYWNjZXNzOiB7XG4gICAgICAgIHVwZGF0ZTogKHsgcmVxIH0pID0+IHtcbiAgICAgICAgICBjb25zdCB7IHVzZXIgfSA9IHJlcVxuICAgICAgICAgIGlmICghdXNlcikge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKGlzU3VwZXJBZG1pbih1c2VyKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB9LFxuICBdLFxufSlcblxuY29uc3QgVXNlcnM6IENvbGxlY3Rpb25Db25maWcgPSB7XG4gIHNsdWc6ICd1c2VycycsXG4gIGFjY2Vzczoge1xuICAgIGNyZWF0ZTogY3JlYXRlQWNjZXNzLFxuICAgIGRlbGV0ZTogdXBkYXRlQW5kRGVsZXRlQWNjZXNzLFxuICAgIHJlYWQ6IHJlYWRBY2Nlc3MsXG4gICAgdXBkYXRlOiB1cGRhdGVBbmREZWxldGVBY2Nlc3MsXG4gIH0sXG4gIGFkbWluOiB7XG4gICAgdXNlQXNUaXRsZTogJ2VtYWlsJyxcbiAgfSxcbiAgYXV0aDogdHJ1ZSxcbiAgZW5kcG9pbnRzOiBbZXh0ZXJuYWxVc2Vyc0xvZ2luXSxcbiAgZmllbGRzOiBbXG4gICAge1xuICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgbmFtZTogJ3Bhc3N3b3JkJyxcbiAgICAgIGhpZGRlbjogdHJ1ZSxcbiAgICAgIGFjY2Vzczoge1xuICAgICAgICByZWFkOiAoKSA9PiBmYWxzZSwgLy8gSGlkZSBwYXNzd29yZCBmaWVsZCBmcm9tIHJlYWQgYWNjZXNzXG4gICAgICAgIHVwZGF0ZTogKHsgcmVxLCBpZCB9KSA9PiB7XG4gICAgICAgICAgY29uc3QgeyB1c2VyIH0gPSByZXFcbiAgICAgICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChpZCA9PT0gdXNlci5pZCkge1xuICAgICAgICAgICAgLy8gQWxsb3cgdXNlciB0byB1cGRhdGUgdGhlaXIgb3duIHBhc3N3b3JkXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiBpc1N1cGVyQWRtaW4odXNlcilcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgfSxcbiAgICB7XG4gICAgICBhZG1pbjoge1xuICAgICAgICBwb3NpdGlvbjogJ3NpZGViYXInLFxuICAgICAgfSxcbiAgICAgIG5hbWU6ICdyb2xlcycsXG4gICAgICB0eXBlOiAnc2VsZWN0JyxcbiAgICAgIGRlZmF1bHRWYWx1ZTogWyd1c2VyJ10sXG4gICAgICBoYXNNYW55OiB0cnVlLFxuICAgICAgb3B0aW9uczogWydzdXBlci1hZG1pbicsICd1c2VyJ10sXG4gICAgICBhY2Nlc3M6IHtcbiAgICAgICAgdXBkYXRlOiAoeyByZXEgfSkgPT4ge1xuICAgICAgICAgIHJldHVybiBpc1N1cGVyQWRtaW4ocmVxLnVzZXIpXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH0sXG4gICAge1xuICAgICAgbmFtZTogJ3VzZXJuYW1lJyxcbiAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgIGhvb2tzOiB7XG4gICAgICAgIGJlZm9yZVZhbGlkYXRlOiBbZW5zdXJlVW5pcXVlVXNlcm5hbWVdLFxuICAgICAgfSxcbiAgICAgIGluZGV4OiB0cnVlLFxuICAgIH0sXG4gICAge1xuICAgICAgLi4uZGVmYXVsdFRlbmFudEFycmF5RmllbGQsXG4gICAgICBhZG1pbjoge1xuICAgICAgICAuLi4oZGVmYXVsdFRlbmFudEFycmF5RmllbGQ/LmFkbWluIHx8IHt9KSxcbiAgICAgICAgcG9zaXRpb246ICdzaWRlYmFyJyxcbiAgICAgIH0sXG4gICAgfSxcbiAgXSxcbiAgLy8gVGhlIGZvbGxvd2luZyBob29rIHNldHMgYSBjb29raWUgYmFzZWQgb24gdGhlIGRvbWFpbiBhIHVzZXIgbG9ncyBpbiBmcm9tLlxuICAvLyBJdCBjaGVja3MgdGhlIGRvbWFpbiBhbmQgbWF0Y2hlcyBpdCB0byBhIHRlbmFudCBpbiB0aGUgc3lzdGVtLCB0aGVuIHNldHNcbiAgLy8gYSAncGF5bG9hZC10ZW5hbnQnIGNvb2tpZSBmb3IgdGhhdCB0ZW5hbnQuXG5cbiAgaG9va3M6IHtcbiAgICBhZnRlckxvZ2luOiBbc2V0Q29va2llQmFzZWRPbkRvbWFpbl0sXG4gIH0sXG59XG5cbmV4cG9ydCBkZWZhdWx0IFVzZXJzXG4iXSwibmFtZXMiOlsiY3JlYXRlQWNjZXNzIiwicmVhZEFjY2VzcyIsInVwZGF0ZUFuZERlbGV0ZUFjY2VzcyIsImV4dGVybmFsVXNlcnNMb2dpbiIsImVuc3VyZVVuaXF1ZVVzZXJuYW1lIiwiaXNTdXBlckFkbWluIiwic2V0Q29va2llQmFzZWRPbkRvbWFpbiIsInRlbmFudHNBcnJheUZpZWxkIiwiZGVmYXVsdFRlbmFudEFycmF5RmllbGQiLCJ0ZW5hbnRzQXJyYXlGaWVsZE5hbWUiLCJ0ZW5hbnRzQXJyYXlUZW5hbnRGaWVsZE5hbWUiLCJ0ZW5hbnRzQ29sbGVjdGlvblNsdWciLCJhcnJheUZpZWxkQWNjZXNzIiwidGVuYW50RmllbGRBY2Nlc3MiLCJyb3dGaWVsZHMiLCJuYW1lIiwidHlwZSIsImRlZmF1bHRWYWx1ZSIsImhhc01hbnkiLCJvcHRpb25zIiwicmVxdWlyZWQiLCJhY2Nlc3MiLCJ1cGRhdGUiLCJyZXEiLCJ1c2VyIiwiVXNlcnMiLCJzbHVnIiwiY3JlYXRlIiwiZGVsZXRlIiwicmVhZCIsImFkbWluIiwidXNlQXNUaXRsZSIsImF1dGgiLCJlbmRwb2ludHMiLCJmaWVsZHMiLCJoaWRkZW4iLCJpZCIsInBvc2l0aW9uIiwiaG9va3MiLCJiZWZvcmVWYWxpZGF0ZSIsImluZGV4IiwiYWZ0ZXJMb2dpbiJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/collections/Users/index.ts\n");

/***/ }),

/***/ "(rsc)/./src/payload.config.ts":
/*!*******************************!*\
  !*** ./src/payload.config.ts ***!
  \*******************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _payloadcms_db_postgres__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @payloadcms/db-postgres */ \"@payloadcms/db-postgres\");\n/* harmony import */ var _payloadcms_richtext_lexical__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @payloadcms/richtext-lexical */ \"(rsc)/./node_modules/.pnpm/@payloadcms+richtext-lexical@3.64.0_@faceless-ui+modal@3.0.0_react-dom@19.0.0_react@19._9992600ceae037be32a90d517f8b97aa/node_modules/@payloadcms/richtext-lexical/dist/index.js\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.64.0_graphql@16.12.0_typescript@5.5.2/node_modules/payload/dist/config/build.js\");\n/* harmony import */ var url__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! url */ \"url\");\n/* harmony import */ var url__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(url__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _collections_Pages__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./collections/Pages */ \"(rsc)/./src/collections/Pages/index.ts\");\n/* harmony import */ var _collections_Tenants__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./collections/Tenants */ \"(rsc)/./src/collections/Tenants/index.ts\");\n/* harmony import */ var _collections_Users__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./collections/Users */ \"(rsc)/./src/collections/Users/index.ts\");\n/* harmony import */ var _payloadcms_plugin_multi_tenant__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @payloadcms/plugin-multi-tenant */ \"(rsc)/./node_modules/.pnpm/@payloadcms+plugin-multi-tenant@3.64.0_@payloadcms+ui@3.64.0_@types+react@19.0.1_monaco_8af145a0e04829d2ebd64574d607c797/node_modules/@payloadcms/plugin-multi-tenant/dist/index.js\");\n/* harmony import */ var _access_isSuperAdmin__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./access/isSuperAdmin */ \"(rsc)/./src/access/isSuperAdmin.ts\");\n/* harmony import */ var _utilities_getUserTenantIDs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./utilities/getUserTenantIDs */ \"(rsc)/./src/utilities/getUserTenantIDs.ts\");\n/* harmony import */ var _seed__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./seed */ \"(rsc)/./src/seed.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_payloadcms_db_postgres__WEBPACK_IMPORTED_MODULE_0__]);\n_payloadcms_db_postgres__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n\n\n\n\n\n\n\n\nconst filename = (0,url__WEBPACK_IMPORTED_MODULE_2__.fileURLToPath)(\"file:///home/mildfire/repos/AADS/example-payload/multi-tenant-example/multi-tenant-example/src/payload.config.ts\");\nconst dirname = path__WEBPACK_IMPORTED_MODULE_1___default().dirname(filename);\n// eslint-disable-next-line no-restricted-exports\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,payload__WEBPACK_IMPORTED_MODULE_9__.buildConfig)({\n    admin: {\n        user: 'users',\n        livePreview: {\n            url: async ({ data, locale, req })=>{\n                // Debug: log what we're receiving\n                console.log(' Live Preview URL - tenant data:', data?.tenant);\n                let tenantSlug = null;\n                // Handle different tenant data formats\n                if (data?.tenant) {\n                    if (typeof data.tenant === 'object' && data.tenant !== null) {\n                        // Tenant is populated object\n                        tenantSlug = data.tenant.slug;\n                    } else if (typeof data.tenant === 'string' || typeof data.tenant === 'number') {\n                        // Tenant is just an ID - we need to fetch it\n                        const payload = await req.payload;\n                        const tenantDoc = await payload.findByID({\n                            collection: 'tenants',\n                            id: data.tenant\n                        });\n                        tenantSlug = tenantDoc?.slug;\n                    }\n                }\n                const pageSlug = data?.slug || 'home';\n                console.log(' Live Preview URL - resolved tenant slug:', tenantSlug);\n                console.log(' Live Preview URL - page slug:', pageSlug);\n                if (!tenantSlug) {\n                    // Fallback: use first tenant's slug\n                    console.warn('  No tenant slug found, using fallback');\n                    return `http://localhost:3000/api/preview?slug=${pageSlug}&tenant=gold`;\n                }\n                return `http://localhost:3000/api/preview?slug=${pageSlug}&tenant=${tenantSlug}`;\n            },\n            collections: [\n                'pages'\n            ]\n        }\n    },\n    collections: [\n        _collections_Pages__WEBPACK_IMPORTED_MODULE_3__.Pages,\n        _collections_Users__WEBPACK_IMPORTED_MODULE_5__[\"default\"],\n        _collections_Tenants__WEBPACK_IMPORTED_MODULE_4__.Tenants\n    ],\n    // db: mongooseAdapter({\n    //   url: process.env.DATABASE_URI as string,\n    // }),\n    db: (0,_payloadcms_db_postgres__WEBPACK_IMPORTED_MODULE_0__.postgresAdapter)({\n        pool: {\n            connectionString: process.env.POSTGRES_URL\n        }\n    }),\n    onInit: async (args)=>{\n        console.log(' onInit triggered');\n        console.log(' SEED_DB value:', process.env.SEED_DB);\n        if (process.env.SEED_DB === 'true') {\n            // Check if database is already seeded\n            const existingTenants = await args.find({\n                collection: 'tenants',\n                limit: 1\n            });\n            if (existingTenants.totalDocs > 0) {\n                console.log('  Database already seeded (found existing tenants)');\n                return;\n            }\n            console.log(' Database empty, starting seed...');\n            try {\n                await (0,_seed__WEBPACK_IMPORTED_MODULE_8__.seed)(args);\n                console.log(' Seed complete!');\n            } catch (error) {\n                console.error(' Seed error:', error.message);\n            }\n        }\n    },\n    editor: (0,_payloadcms_richtext_lexical__WEBPACK_IMPORTED_MODULE_10__.lexicalEditor)({}),\n    graphQL: {\n        schemaOutputFile: path__WEBPACK_IMPORTED_MODULE_1___default().resolve(dirname, 'generated-schema.graphql')\n    },\n    secret: process.env.PAYLOAD_SECRET,\n    typescript: {\n        outputFile: path__WEBPACK_IMPORTED_MODULE_1___default().resolve(dirname, 'payload-types.ts')\n    },\n    plugins: [\n        (0,_payloadcms_plugin_multi_tenant__WEBPACK_IMPORTED_MODULE_11__.multiTenantPlugin)({\n            collections: {\n                pages: {}\n            },\n            tenantField: {\n                access: {\n                    read: ()=>true,\n                    update: ({ req })=>{\n                        if ((0,_access_isSuperAdmin__WEBPACK_IMPORTED_MODULE_6__.isSuperAdmin)(req.user)) {\n                            return true;\n                        }\n                        return (0,_utilities_getUserTenantIDs__WEBPACK_IMPORTED_MODULE_7__.getUserTenantIDs)(req.user).length > 0;\n                    }\n                }\n            },\n            tenantsArrayField: {\n                includeDefaultField: false\n            },\n            userHasAccessToAllTenants: (user)=>(0,_access_isSuperAdmin__WEBPACK_IMPORTED_MODULE_6__.isSuperAdmin)(user)\n        })\n    ]\n}));\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvcGF5bG9hZC5jb25maWcudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQ3lEO0FBQ0c7QUFDckM7QUFDYztBQUNGO0FBRVE7QUFDSTtBQUNSO0FBQzRCO0FBQ2Y7QUFFVztBQUNsQztBQUU3QixNQUFNWSxXQUFXUixrREFBYUEsQ0FBQyxrSEFBZTtBQUM5QyxNQUFNVSxVQUFVWixtREFBWSxDQUFDVTtBQUU3QixpREFBaUQ7QUFDakQsaUVBQWVULG9EQUFXQSxDQUFDO0lBQ3pCWSxPQUFPO1FBQ0xDLE1BQU07UUFDTkMsYUFBYTtZQUNUSixLQUFLLE9BQU8sRUFBRUssSUFBSSxFQUFFQyxNQUFNLEVBQUVDLEdBQUcsRUFBRTtnQkFDL0Isa0NBQWtDO2dCQUNsQ0MsUUFBUUMsR0FBRyxDQUFDLHNDQUFzQ0osTUFBTUs7Z0JBRXhELElBQUlDLGFBQWE7Z0JBRWpCLHVDQUF1QztnQkFDdkMsSUFBSU4sTUFBTUssUUFBUTtvQkFDaEIsSUFBSSxPQUFPTCxLQUFLSyxNQUFNLEtBQUssWUFBWUwsS0FBS0ssTUFBTSxLQUFLLE1BQU07d0JBQzNELDZCQUE2Qjt3QkFDN0JDLGFBQWFOLEtBQUtLLE1BQU0sQ0FBQ0UsSUFBSTtvQkFDL0IsT0FBTyxJQUFJLE9BQU9QLEtBQUtLLE1BQU0sS0FBSyxZQUFZLE9BQU9MLEtBQUtLLE1BQU0sS0FBSyxVQUFVO3dCQUM3RSw2Q0FBNkM7d0JBQzdDLE1BQU1HLFVBQVUsTUFBTU4sSUFBSU0sT0FBTzt3QkFDakMsTUFBTUMsWUFBWSxNQUFNRCxRQUFRRSxRQUFRLENBQUM7NEJBQ3ZDQyxZQUFZOzRCQUNaQyxJQUFJWixLQUFLSyxNQUFNO3dCQUNqQjt3QkFDQUMsYUFBYUcsV0FBV0Y7b0JBQzFCO2dCQUNGO2dCQUVBLE1BQU1NLFdBQVdiLE1BQU1PLFFBQVE7Z0JBRS9CSixRQUFRQyxHQUFHLENBQUMsK0NBQStDRTtnQkFDM0RILFFBQVFDLEdBQUcsQ0FBQyxvQ0FBb0NTO2dCQUVoRCxJQUFJLENBQUNQLFlBQVk7b0JBQ2Ysb0NBQW9DO29CQUNwQ0gsUUFBUVcsSUFBSSxDQUFDO29CQUNiLE9BQU8sQ0FBQyx1Q0FBdUMsRUFBRUQsU0FBUyxZQUFZLENBQUM7Z0JBQ3pFO2dCQUVBLE9BQU8sQ0FBQyx1Q0FBdUMsRUFBRUEsU0FBUyxRQUFRLEVBQUVQLFlBQVk7WUFDbEY7WUFDQVMsYUFBYTtnQkFBQzthQUFRO1FBQ3hCO0lBQ0o7SUFDQUEsYUFBYTtRQUFDNUIscURBQUtBO1FBQUVFLDBEQUFLQTtRQUFFRCx5REFBT0E7S0FBQztJQUNwQyx3QkFBd0I7SUFDeEIsNkNBQTZDO0lBQzdDLE1BQU07SUFDTjRCLElBQUlsQyx3RUFBZUEsQ0FBQztRQUNsQm1DLE1BQU07WUFDSkMsa0JBQWtCQyxRQUFRQyxHQUFHLENBQUNDLFlBQVk7UUFDNUM7SUFDRjtJQUNBQyxRQUFRLE9BQU9DO1FBQ2JwQixRQUFRQyxHQUFHLENBQUM7UUFDWkQsUUFBUUMsR0FBRyxDQUFDLHFCQUFxQmUsUUFBUUMsR0FBRyxDQUFDSSxPQUFPO1FBRXBELElBQUlMLFFBQVFDLEdBQUcsQ0FBQ0ksT0FBTyxLQUFLLFFBQVE7WUFDbEMsc0NBQXNDO1lBQ3RDLE1BQU1DLGtCQUFrQixNQUFNRixLQUFLRyxJQUFJLENBQUM7Z0JBQ3RDZixZQUFZO2dCQUNaZ0IsT0FBTztZQUNUO1lBRUEsSUFBSUYsZ0JBQWdCRyxTQUFTLEdBQUcsR0FBRztnQkFDakN6QixRQUFRQyxHQUFHLENBQUM7Z0JBQ1o7WUFDRjtZQUVBRCxRQUFRQyxHQUFHLENBQUM7WUFDWixJQUFJO2dCQUNGLE1BQU1YLDJDQUFJQSxDQUFDOEI7Z0JBQ1hwQixRQUFRQyxHQUFHLENBQUM7WUFDZCxFQUFFLE9BQU95QixPQUFPO2dCQUNkMUIsUUFBUTBCLEtBQUssQ0FBQyxpQkFBaUJBLE1BQU1DLE9BQU87WUFDOUM7UUFDRjtJQUNGO0lBQ0FDLFFBQVFoRCw0RUFBYUEsQ0FBQyxDQUFDO0lBQ3ZCaUQsU0FBUztRQUNQQyxrQkFBa0JqRCxtREFBWSxDQUFDWSxTQUFTO0lBQzFDO0lBQ0F1QyxRQUFRaEIsUUFBUUMsR0FBRyxDQUFDZ0IsY0FBYztJQUNsQ0MsWUFBWTtRQUNWQyxZQUFZdEQsbURBQVksQ0FBQ1ksU0FBUztJQUNwQztJQUNBMkMsU0FBUztRQUNQakQsbUZBQWlCQSxDQUFTO1lBQ3hCeUIsYUFBYTtnQkFDWHlCLE9BQU8sQ0FBQztZQUNWO1lBQ0FDLGFBQWE7Z0JBQ1hDLFFBQVE7b0JBQ05DLE1BQU0sSUFBTTtvQkFDWkMsUUFBUSxDQUFDLEVBQUUxQyxHQUFHLEVBQUU7d0JBQ2QsSUFBSVgsa0VBQVlBLENBQUNXLElBQUlKLElBQUksR0FBRzs0QkFDMUIsT0FBTzt3QkFDVDt3QkFDQSxPQUFPTiw2RUFBZ0JBLENBQUNVLElBQUlKLElBQUksRUFBRStDLE1BQU0sR0FBRztvQkFDN0M7Z0JBQ0Y7WUFDRjtZQUNBQyxtQkFBbUI7Z0JBQ2pCQyxxQkFBcUI7WUFDdkI7WUFDQUMsMkJBQTJCLENBQUNsRCxPQUFTUCxrRUFBWUEsQ0FBQ087UUFDcEQ7S0FDRDtBQUNILEVBQUUiLCJzb3VyY2VzIjpbIi9ob21lL21pbGRmaXJlL3JlcG9zL0FBRFMvZXhhbXBsZS1wYXlsb2FkL211bHRpLXRlbmFudC1leGFtcGxlL211bHRpLXRlbmFudC1leGFtcGxlL3NyYy9wYXlsb2FkLmNvbmZpZy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBtb25nb29zZUFkYXB0ZXIgfSBmcm9tICdAcGF5bG9hZGNtcy9kYi1tb25nb2RiJ1xuaW1wb3J0IHsgcG9zdGdyZXNBZGFwdGVyIH0gZnJvbSAnQHBheWxvYWRjbXMvZGItcG9zdGdyZXMnXG5pbXBvcnQgeyBsZXhpY2FsRWRpdG9yIH0gZnJvbSAnQHBheWxvYWRjbXMvcmljaHRleHQtbGV4aWNhbCdcbmltcG9ydCBwYXRoIGZyb20gJ3BhdGgnXG5pbXBvcnQgeyBidWlsZENvbmZpZyB9IGZyb20gJ3BheWxvYWQnXG5pbXBvcnQgeyBmaWxlVVJMVG9QYXRoIH0gZnJvbSAndXJsJ1xuXG5pbXBvcnQgeyBQYWdlcyB9IGZyb20gJy4vY29sbGVjdGlvbnMvUGFnZXMnXG5pbXBvcnQgeyBUZW5hbnRzIH0gZnJvbSAnLi9jb2xsZWN0aW9ucy9UZW5hbnRzJ1xuaW1wb3J0IFVzZXJzIGZyb20gJy4vY29sbGVjdGlvbnMvVXNlcnMnXG5pbXBvcnQgeyBtdWx0aVRlbmFudFBsdWdpbiB9IGZyb20gJ0BwYXlsb2FkY21zL3BsdWdpbi1tdWx0aS10ZW5hbnQnXG5pbXBvcnQgeyBpc1N1cGVyQWRtaW4gfSBmcm9tICcuL2FjY2Vzcy9pc1N1cGVyQWRtaW4nXG5pbXBvcnQgdHlwZSB7IENvbmZpZyB9IGZyb20gJy4vcGF5bG9hZC10eXBlcydcbmltcG9ydCB7IGdldFVzZXJUZW5hbnRJRHMgfSBmcm9tICcuL3V0aWxpdGllcy9nZXRVc2VyVGVuYW50SURzJ1xuaW1wb3J0IHsgc2VlZCB9IGZyb20gJy4vc2VlZCdcblxuY29uc3QgZmlsZW5hbWUgPSBmaWxlVVJMVG9QYXRoKGltcG9ydC5tZXRhLnVybClcbmNvbnN0IGRpcm5hbWUgPSBwYXRoLmRpcm5hbWUoZmlsZW5hbWUpXG5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLWV4cG9ydHNcbmV4cG9ydCBkZWZhdWx0IGJ1aWxkQ29uZmlnKHtcbiAgYWRtaW46IHtcbiAgICB1c2VyOiAndXNlcnMnLFxuICAgIGxpdmVQcmV2aWV3OiB7XG4gICAgICAgIHVybDogYXN5bmMgKHsgZGF0YSwgbG9jYWxlLCByZXEgfSkgPT4ge1xuICAgICAgICAgIC8vIERlYnVnOiBsb2cgd2hhdCB3ZSdyZSByZWNlaXZpbmdcbiAgICAgICAgICBjb25zb2xlLmxvZygn8J+UjSBMaXZlIFByZXZpZXcgVVJMIC0gdGVuYW50IGRhdGE6JywgZGF0YT8udGVuYW50KVxuICAgICAgICAgIFxuICAgICAgICAgIGxldCB0ZW5hbnRTbHVnID0gbnVsbFxuICAgICAgICAgIFxuICAgICAgICAgIC8vIEhhbmRsZSBkaWZmZXJlbnQgdGVuYW50IGRhdGEgZm9ybWF0c1xuICAgICAgICAgIGlmIChkYXRhPy50ZW5hbnQpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZGF0YS50ZW5hbnQgPT09ICdvYmplY3QnICYmIGRhdGEudGVuYW50ICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgIC8vIFRlbmFudCBpcyBwb3B1bGF0ZWQgb2JqZWN0XG4gICAgICAgICAgICAgIHRlbmFudFNsdWcgPSBkYXRhLnRlbmFudC5zbHVnXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBkYXRhLnRlbmFudCA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIGRhdGEudGVuYW50ID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAvLyBUZW5hbnQgaXMganVzdCBhbiBJRCAtIHdlIG5lZWQgdG8gZmV0Y2ggaXRcbiAgICAgICAgICAgICAgY29uc3QgcGF5bG9hZCA9IGF3YWl0IHJlcS5wYXlsb2FkXG4gICAgICAgICAgICAgIGNvbnN0IHRlbmFudERvYyA9IGF3YWl0IHBheWxvYWQuZmluZEJ5SUQoe1xuICAgICAgICAgICAgICAgIGNvbGxlY3Rpb246ICd0ZW5hbnRzJyxcbiAgICAgICAgICAgICAgICBpZDogZGF0YS50ZW5hbnQsXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIHRlbmFudFNsdWcgPSB0ZW5hbnREb2M/LnNsdWdcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgY29uc3QgcGFnZVNsdWcgPSBkYXRhPy5zbHVnIHx8ICdob21lJ1xuICAgICAgICAgIFxuICAgICAgICAgIGNvbnNvbGUubG9nKCfwn5SNIExpdmUgUHJldmlldyBVUkwgLSByZXNvbHZlZCB0ZW5hbnQgc2x1ZzonLCB0ZW5hbnRTbHVnKVxuICAgICAgICAgIGNvbnNvbGUubG9nKCfwn5SNIExpdmUgUHJldmlldyBVUkwgLSBwYWdlIHNsdWc6JywgcGFnZVNsdWcpXG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKCF0ZW5hbnRTbHVnKSB7XG4gICAgICAgICAgICAvLyBGYWxsYmFjazogdXNlIGZpcnN0IHRlbmFudCdzIHNsdWdcbiAgICAgICAgICAgIGNvbnNvbGUud2Fybign4pqg77iPICBObyB0ZW5hbnQgc2x1ZyBmb3VuZCwgdXNpbmcgZmFsbGJhY2snKVxuICAgICAgICAgICAgcmV0dXJuIGBodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL3ByZXZpZXc/c2x1Zz0ke3BhZ2VTbHVnfSZ0ZW5hbnQ9Z29sZGBcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgcmV0dXJuIGBodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL3ByZXZpZXc/c2x1Zz0ke3BhZ2VTbHVnfSZ0ZW5hbnQ9JHt0ZW5hbnRTbHVnfWBcbiAgICAgICAgfSxcbiAgICAgICAgY29sbGVjdGlvbnM6IFsncGFnZXMnXSxcbiAgICAgIH0sXG4gIH0sXG4gIGNvbGxlY3Rpb25zOiBbUGFnZXMsIFVzZXJzLCBUZW5hbnRzXSxcbiAgLy8gZGI6IG1vbmdvb3NlQWRhcHRlcih7XG4gIC8vICAgdXJsOiBwcm9jZXNzLmVudi5EQVRBQkFTRV9VUkkgYXMgc3RyaW5nLFxuICAvLyB9KSxcbiAgZGI6IHBvc3RncmVzQWRhcHRlcih7XG4gICAgcG9vbDoge1xuICAgICAgY29ubmVjdGlvblN0cmluZzogcHJvY2Vzcy5lbnYuUE9TVEdSRVNfVVJMLFxuICAgIH0sXG4gIH0pLFxuICBvbkluaXQ6IGFzeW5jIChhcmdzKSA9PiB7XG4gICAgY29uc29sZS5sb2coJ/CflI0gb25Jbml0IHRyaWdnZXJlZCcpXG4gICAgY29uc29sZS5sb2coJ/CflI0gU0VFRF9EQiB2YWx1ZTonLCBwcm9jZXNzLmVudi5TRUVEX0RCKVxuICAgIFxuICAgIGlmIChwcm9jZXNzLmVudi5TRUVEX0RCID09PSAndHJ1ZScpIHtcbiAgICAgIC8vIENoZWNrIGlmIGRhdGFiYXNlIGlzIGFscmVhZHkgc2VlZGVkXG4gICAgICBjb25zdCBleGlzdGluZ1RlbmFudHMgPSBhd2FpdCBhcmdzLmZpbmQoe1xuICAgICAgICBjb2xsZWN0aW9uOiAndGVuYW50cycsXG4gICAgICAgIGxpbWl0OiAxLFxuICAgICAgfSlcbiAgICAgIFxuICAgICAgaWYgKGV4aXN0aW5nVGVuYW50cy50b3RhbERvY3MgPiAwKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCfihLnvuI8gIERhdGFiYXNlIGFscmVhZHkgc2VlZGVkIChmb3VuZCBleGlzdGluZyB0ZW5hbnRzKScpXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zb2xlLmxvZygn8J+MsSBEYXRhYmFzZSBlbXB0eSwgc3RhcnRpbmcgc2VlZC4uLicpXG4gICAgICB0cnkge1xuICAgICAgICBhd2FpdCBzZWVkKGFyZ3MpXG4gICAgICAgIGNvbnNvbGUubG9nKCfinIUgU2VlZCBjb21wbGV0ZSEnKVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcign4p2MIFNlZWQgZXJyb3I6JywgZXJyb3IubWVzc2FnZSlcbiAgICAgIH1cbiAgICB9XG4gIH0sXG4gIGVkaXRvcjogbGV4aWNhbEVkaXRvcih7fSksXG4gIGdyYXBoUUw6IHtcbiAgICBzY2hlbWFPdXRwdXRGaWxlOiBwYXRoLnJlc29sdmUoZGlybmFtZSwgJ2dlbmVyYXRlZC1zY2hlbWEuZ3JhcGhxbCcpLFxuICB9LFxuICBzZWNyZXQ6IHByb2Nlc3MuZW52LlBBWUxPQURfU0VDUkVUIGFzIHN0cmluZyxcbiAgdHlwZXNjcmlwdDoge1xuICAgIG91dHB1dEZpbGU6IHBhdGgucmVzb2x2ZShkaXJuYW1lLCAncGF5bG9hZC10eXBlcy50cycpLFxuICB9LFxuICBwbHVnaW5zOiBbXG4gICAgbXVsdGlUZW5hbnRQbHVnaW48Q29uZmlnPih7XG4gICAgICBjb2xsZWN0aW9uczoge1xuICAgICAgICBwYWdlczoge30sXG4gICAgICB9LFxuICAgICAgdGVuYW50RmllbGQ6IHtcbiAgICAgICAgYWNjZXNzOiB7XG4gICAgICAgICAgcmVhZDogKCkgPT4gdHJ1ZSxcbiAgICAgICAgICB1cGRhdGU6ICh7IHJlcSB9KSA9PiB7XG4gICAgICAgICAgICBpZiAoaXNTdXBlckFkbWluKHJlcS51c2VyKSkge1xuICAgICAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGdldFVzZXJUZW5hbnRJRHMocmVxLnVzZXIpLmxlbmd0aCA+IDBcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIHRlbmFudHNBcnJheUZpZWxkOiB7XG4gICAgICAgIGluY2x1ZGVEZWZhdWx0RmllbGQ6IGZhbHNlLFxuICAgICAgfSxcbiAgICAgIHVzZXJIYXNBY2Nlc3NUb0FsbFRlbmFudHM6ICh1c2VyKSA9PiBpc1N1cGVyQWRtaW4odXNlciksXG4gICAgfSksXG4gIF0sXG59KVxuIl0sIm5hbWVzIjpbInBvc3RncmVzQWRhcHRlciIsImxleGljYWxFZGl0b3IiLCJwYXRoIiwiYnVpbGRDb25maWciLCJmaWxlVVJMVG9QYXRoIiwiUGFnZXMiLCJUZW5hbnRzIiwiVXNlcnMiLCJtdWx0aVRlbmFudFBsdWdpbiIsImlzU3VwZXJBZG1pbiIsImdldFVzZXJUZW5hbnRJRHMiLCJzZWVkIiwiZmlsZW5hbWUiLCJ1cmwiLCJkaXJuYW1lIiwiYWRtaW4iLCJ1c2VyIiwibGl2ZVByZXZpZXciLCJkYXRhIiwibG9jYWxlIiwicmVxIiwiY29uc29sZSIsImxvZyIsInRlbmFudCIsInRlbmFudFNsdWciLCJzbHVnIiwicGF5bG9hZCIsInRlbmFudERvYyIsImZpbmRCeUlEIiwiY29sbGVjdGlvbiIsImlkIiwicGFnZVNsdWciLCJ3YXJuIiwiY29sbGVjdGlvbnMiLCJkYiIsInBvb2wiLCJjb25uZWN0aW9uU3RyaW5nIiwicHJvY2VzcyIsImVudiIsIlBPU1RHUkVTX1VSTCIsIm9uSW5pdCIsImFyZ3MiLCJTRUVEX0RCIiwiZXhpc3RpbmdUZW5hbnRzIiwiZmluZCIsImxpbWl0IiwidG90YWxEb2NzIiwiZXJyb3IiLCJtZXNzYWdlIiwiZWRpdG9yIiwiZ3JhcGhRTCIsInNjaGVtYU91dHB1dEZpbGUiLCJyZXNvbHZlIiwic2VjcmV0IiwiUEFZTE9BRF9TRUNSRVQiLCJ0eXBlc2NyaXB0Iiwib3V0cHV0RmlsZSIsInBsdWdpbnMiLCJwYWdlcyIsInRlbmFudEZpZWxkIiwiYWNjZXNzIiwicmVhZCIsInVwZGF0ZSIsImxlbmd0aCIsInRlbmFudHNBcnJheUZpZWxkIiwiaW5jbHVkZURlZmF1bHRGaWVsZCIsInVzZXJIYXNBY2Nlc3NUb0FsbFRlbmFudHMiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/payload.config.ts\n");

/***/ }),

/***/ "(rsc)/./src/seed.ts":
/*!*********************!*\
  !*** ./src/seed.ts ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   seed: () => (/* binding */ seed)\n/* harmony export */ });\nconst seed = async (payload)=>{\n    const tenant1 = await payload.create({\n        collection: 'tenants',\n        data: {\n            name: 'Tenant 1',\n            slug: 'gold',\n            domain: 'gold.localhost'\n        }\n    });\n    const tenant2 = await payload.create({\n        collection: 'tenants',\n        data: {\n            name: 'Tenant 2',\n            slug: 'silver',\n            domain: 'silver.localhost'\n        }\n    });\n    const tenant3 = await payload.create({\n        collection: 'tenants',\n        data: {\n            name: 'Tenant 3',\n            slug: 'bronze',\n            domain: 'bronze.localhost'\n        }\n    });\n    await payload.create({\n        collection: 'users',\n        data: {\n            email: 'demo@payloadcms.com',\n            password: 'demo',\n            roles: [\n                'super-admin'\n            ]\n        }\n    });\n    await payload.create({\n        collection: 'users',\n        data: {\n            email: 'tenant1@payloadcms.com',\n            password: 'demo',\n            tenants: [\n                {\n                    roles: [\n                        'tenant-admin'\n                    ],\n                    tenant: tenant1.id\n                }\n            ],\n            username: 'tenant1'\n        }\n    });\n    await payload.create({\n        collection: 'users',\n        data: {\n            email: 'tenant2@payloadcms.com',\n            password: 'demo',\n            tenants: [\n                {\n                    roles: [\n                        'tenant-admin'\n                    ],\n                    tenant: tenant2.id\n                }\n            ],\n            username: 'tenant2'\n        }\n    });\n    await payload.create({\n        collection: 'users',\n        data: {\n            email: 'tenant3@payloadcms.com',\n            password: 'demo',\n            tenants: [\n                {\n                    roles: [\n                        'tenant-admin'\n                    ],\n                    tenant: tenant3.id\n                }\n            ],\n            username: 'tenant3'\n        }\n    });\n    await payload.create({\n        collection: 'users',\n        data: {\n            email: 'multi-admin@payloadcms.com',\n            password: 'demo',\n            tenants: [\n                {\n                    roles: [\n                        'tenant-admin'\n                    ],\n                    tenant: tenant1.id\n                },\n                {\n                    roles: [\n                        'tenant-admin'\n                    ],\n                    tenant: tenant2.id\n                },\n                {\n                    roles: [\n                        'tenant-admin'\n                    ],\n                    tenant: tenant3.id\n                }\n            ],\n            username: 'multi-admin'\n        }\n    });\n    await payload.create({\n        collection: 'pages',\n        data: {\n            slug: 'home',\n            tenant: tenant1.id,\n            title: 'Page for Tenant 1'\n        }\n    });\n    await payload.create({\n        collection: 'pages',\n        data: {\n            slug: 'home',\n            tenant: tenant2.id,\n            title: 'Page for Tenant 2'\n        }\n    });\n    await payload.create({\n        collection: 'pages',\n        data: {\n            slug: 'home',\n            tenant: tenant3.id,\n            title: 'Page for Tenant 3'\n        }\n    });\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvc2VlZC50cyIsIm1hcHBpbmdzIjoiOzs7O0FBRU8sTUFBTUEsT0FBc0MsT0FBT0M7SUFDeEQsTUFBTUMsVUFBVSxNQUFNRCxRQUFRRSxNQUFNLENBQUM7UUFDbkNDLFlBQVk7UUFDWkMsTUFBTTtZQUNKQyxNQUFNO1lBQ05DLE1BQU07WUFDTkMsUUFBUTtRQUNWO0lBQ0Y7SUFFQSxNQUFNQyxVQUFVLE1BQU1SLFFBQVFFLE1BQU0sQ0FBQztRQUNuQ0MsWUFBWTtRQUNaQyxNQUFNO1lBQ0pDLE1BQU07WUFDTkMsTUFBTTtZQUNOQyxRQUFRO1FBQ1Y7SUFDRjtJQUVBLE1BQU1FLFVBQVUsTUFBTVQsUUFBUUUsTUFBTSxDQUFDO1FBQ25DQyxZQUFZO1FBQ1pDLE1BQU07WUFDSkMsTUFBTTtZQUNOQyxNQUFNO1lBQ05DLFFBQVE7UUFDVjtJQUNGO0lBRUEsTUFBTVAsUUFBUUUsTUFBTSxDQUFDO1FBQ25CQyxZQUFZO1FBQ1pDLE1BQU07WUFDSk0sT0FBTztZQUNQQyxVQUFVO1lBQ1ZDLE9BQU87Z0JBQUM7YUFBYztRQUN4QjtJQUNGO0lBRUEsTUFBTVosUUFBUUUsTUFBTSxDQUFDO1FBQ25CQyxZQUFZO1FBQ1pDLE1BQU07WUFDSk0sT0FBTztZQUNQQyxVQUFVO1lBQ1ZFLFNBQVM7Z0JBQ1A7b0JBQ0VELE9BQU87d0JBQUM7cUJBQWU7b0JBQ3ZCRSxRQUFRYixRQUFRYyxFQUFFO2dCQUNwQjthQUNEO1lBQ0RDLFVBQVU7UUFDWjtJQUNGO0lBRUEsTUFBTWhCLFFBQVFFLE1BQU0sQ0FBQztRQUNuQkMsWUFBWTtRQUNaQyxNQUFNO1lBQ0pNLE9BQU87WUFDUEMsVUFBVTtZQUNWRSxTQUFTO2dCQUNQO29CQUNFRCxPQUFPO3dCQUFDO3FCQUFlO29CQUN2QkUsUUFBUU4sUUFBUU8sRUFBRTtnQkFDcEI7YUFDRDtZQUNEQyxVQUFVO1FBQ1o7SUFDRjtJQUVBLE1BQU1oQixRQUFRRSxNQUFNLENBQUM7UUFDbkJDLFlBQVk7UUFDWkMsTUFBTTtZQUNKTSxPQUFPO1lBQ1BDLFVBQVU7WUFDVkUsU0FBUztnQkFDUDtvQkFDRUQsT0FBTzt3QkFBQztxQkFBZTtvQkFDdkJFLFFBQVFMLFFBQVFNLEVBQUU7Z0JBQ3BCO2FBQ0Q7WUFDREMsVUFBVTtRQUNaO0lBQ0Y7SUFFQSxNQUFNaEIsUUFBUUUsTUFBTSxDQUFDO1FBQ25CQyxZQUFZO1FBQ1pDLE1BQU07WUFDSk0sT0FBTztZQUNQQyxVQUFVO1lBQ1ZFLFNBQVM7Z0JBQ1A7b0JBQ0VELE9BQU87d0JBQUM7cUJBQWU7b0JBQ3ZCRSxRQUFRYixRQUFRYyxFQUFFO2dCQUNwQjtnQkFDQTtvQkFDRUgsT0FBTzt3QkFBQztxQkFBZTtvQkFDdkJFLFFBQVFOLFFBQVFPLEVBQUU7Z0JBQ3BCO2dCQUNBO29CQUNFSCxPQUFPO3dCQUFDO3FCQUFlO29CQUN2QkUsUUFBUUwsUUFBUU0sRUFBRTtnQkFDcEI7YUFDRDtZQUNEQyxVQUFVO1FBQ1o7SUFDRjtJQUVBLE1BQU1oQixRQUFRRSxNQUFNLENBQUM7UUFDbkJDLFlBQVk7UUFDWkMsTUFBTTtZQUNKRSxNQUFNO1lBQ05RLFFBQVFiLFFBQVFjLEVBQUU7WUFDbEJFLE9BQU87UUFDVDtJQUNGO0lBRUEsTUFBTWpCLFFBQVFFLE1BQU0sQ0FBQztRQUNuQkMsWUFBWTtRQUNaQyxNQUFNO1lBQ0pFLE1BQU07WUFDTlEsUUFBUU4sUUFBUU8sRUFBRTtZQUNsQkUsT0FBTztRQUNUO0lBQ0Y7SUFFQSxNQUFNakIsUUFBUUUsTUFBTSxDQUFDO1FBQ25CQyxZQUFZO1FBQ1pDLE1BQU07WUFDSkUsTUFBTTtZQUNOUSxRQUFRTCxRQUFRTSxFQUFFO1lBQ2xCRSxPQUFPO1FBQ1Q7SUFDRjtBQUNGLEVBQUMiLCJzb3VyY2VzIjpbIi9ob21lL21pbGRmaXJlL3JlcG9zL0FBRFMvZXhhbXBsZS1wYXlsb2FkL211bHRpLXRlbmFudC1leGFtcGxlL211bHRpLXRlbmFudC1leGFtcGxlL3NyYy9zZWVkLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbmZpZyB9IGZyb20gJ3BheWxvYWQnXG5cbmV4cG9ydCBjb25zdCBzZWVkOiBOb25OdWxsYWJsZTxDb25maWdbJ29uSW5pdCddPiA9IGFzeW5jIChwYXlsb2FkKTogUHJvbWlzZTx2b2lkPiA9PiB7XG4gIGNvbnN0IHRlbmFudDEgPSBhd2FpdCBwYXlsb2FkLmNyZWF0ZSh7XG4gICAgY29sbGVjdGlvbjogJ3RlbmFudHMnLFxuICAgIGRhdGE6IHtcbiAgICAgIG5hbWU6ICdUZW5hbnQgMScsXG4gICAgICBzbHVnOiAnZ29sZCcsXG4gICAgICBkb21haW46ICdnb2xkLmxvY2FsaG9zdCcsXG4gICAgfSxcbiAgfSlcblxuICBjb25zdCB0ZW5hbnQyID0gYXdhaXQgcGF5bG9hZC5jcmVhdGUoe1xuICAgIGNvbGxlY3Rpb246ICd0ZW5hbnRzJyxcbiAgICBkYXRhOiB7XG4gICAgICBuYW1lOiAnVGVuYW50IDInLFxuICAgICAgc2x1ZzogJ3NpbHZlcicsXG4gICAgICBkb21haW46ICdzaWx2ZXIubG9jYWxob3N0JyxcbiAgICB9LFxuICB9KVxuXG4gIGNvbnN0IHRlbmFudDMgPSBhd2FpdCBwYXlsb2FkLmNyZWF0ZSh7XG4gICAgY29sbGVjdGlvbjogJ3RlbmFudHMnLFxuICAgIGRhdGE6IHtcbiAgICAgIG5hbWU6ICdUZW5hbnQgMycsXG4gICAgICBzbHVnOiAnYnJvbnplJyxcbiAgICAgIGRvbWFpbjogJ2Jyb256ZS5sb2NhbGhvc3QnLFxuICAgIH0sXG4gIH0pXG5cbiAgYXdhaXQgcGF5bG9hZC5jcmVhdGUoe1xuICAgIGNvbGxlY3Rpb246ICd1c2VycycsXG4gICAgZGF0YToge1xuICAgICAgZW1haWw6ICdkZW1vQHBheWxvYWRjbXMuY29tJyxcbiAgICAgIHBhc3N3b3JkOiAnZGVtbycsXG4gICAgICByb2xlczogWydzdXBlci1hZG1pbiddLFxuICAgIH0sXG4gIH0pXG5cbiAgYXdhaXQgcGF5bG9hZC5jcmVhdGUoe1xuICAgIGNvbGxlY3Rpb246ICd1c2VycycsXG4gICAgZGF0YToge1xuICAgICAgZW1haWw6ICd0ZW5hbnQxQHBheWxvYWRjbXMuY29tJyxcbiAgICAgIHBhc3N3b3JkOiAnZGVtbycsXG4gICAgICB0ZW5hbnRzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICByb2xlczogWyd0ZW5hbnQtYWRtaW4nXSxcbiAgICAgICAgICB0ZW5hbnQ6IHRlbmFudDEuaWQsXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgICAgdXNlcm5hbWU6ICd0ZW5hbnQxJyxcbiAgICB9LFxuICB9KVxuXG4gIGF3YWl0IHBheWxvYWQuY3JlYXRlKHtcbiAgICBjb2xsZWN0aW9uOiAndXNlcnMnLFxuICAgIGRhdGE6IHtcbiAgICAgIGVtYWlsOiAndGVuYW50MkBwYXlsb2FkY21zLmNvbScsXG4gICAgICBwYXNzd29yZDogJ2RlbW8nLFxuICAgICAgdGVuYW50czogW1xuICAgICAgICB7XG4gICAgICAgICAgcm9sZXM6IFsndGVuYW50LWFkbWluJ10sXG4gICAgICAgICAgdGVuYW50OiB0ZW5hbnQyLmlkLFxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICAgIHVzZXJuYW1lOiAndGVuYW50MicsXG4gICAgfSxcbiAgfSlcblxuICBhd2FpdCBwYXlsb2FkLmNyZWF0ZSh7XG4gICAgY29sbGVjdGlvbjogJ3VzZXJzJyxcbiAgICBkYXRhOiB7XG4gICAgICBlbWFpbDogJ3RlbmFudDNAcGF5bG9hZGNtcy5jb20nLFxuICAgICAgcGFzc3dvcmQ6ICdkZW1vJyxcbiAgICAgIHRlbmFudHM6IFtcbiAgICAgICAge1xuICAgICAgICAgIHJvbGVzOiBbJ3RlbmFudC1hZG1pbiddLFxuICAgICAgICAgIHRlbmFudDogdGVuYW50My5pZCxcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgICB1c2VybmFtZTogJ3RlbmFudDMnLFxuICAgIH0sXG4gIH0pXG5cbiAgYXdhaXQgcGF5bG9hZC5jcmVhdGUoe1xuICAgIGNvbGxlY3Rpb246ICd1c2VycycsXG4gICAgZGF0YToge1xuICAgICAgZW1haWw6ICdtdWx0aS1hZG1pbkBwYXlsb2FkY21zLmNvbScsXG4gICAgICBwYXNzd29yZDogJ2RlbW8nLFxuICAgICAgdGVuYW50czogW1xuICAgICAgICB7XG4gICAgICAgICAgcm9sZXM6IFsndGVuYW50LWFkbWluJ10sXG4gICAgICAgICAgdGVuYW50OiB0ZW5hbnQxLmlkLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgcm9sZXM6IFsndGVuYW50LWFkbWluJ10sXG4gICAgICAgICAgdGVuYW50OiB0ZW5hbnQyLmlkLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgcm9sZXM6IFsndGVuYW50LWFkbWluJ10sXG4gICAgICAgICAgdGVuYW50OiB0ZW5hbnQzLmlkLFxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICAgIHVzZXJuYW1lOiAnbXVsdGktYWRtaW4nLFxuICAgIH0sXG4gIH0pXG5cbiAgYXdhaXQgcGF5bG9hZC5jcmVhdGUoe1xuICAgIGNvbGxlY3Rpb246ICdwYWdlcycsXG4gICAgZGF0YToge1xuICAgICAgc2x1ZzogJ2hvbWUnLFxuICAgICAgdGVuYW50OiB0ZW5hbnQxLmlkLFxuICAgICAgdGl0bGU6ICdQYWdlIGZvciBUZW5hbnQgMScsXG4gICAgfSxcbiAgfSlcblxuICBhd2FpdCBwYXlsb2FkLmNyZWF0ZSh7XG4gICAgY29sbGVjdGlvbjogJ3BhZ2VzJyxcbiAgICBkYXRhOiB7XG4gICAgICBzbHVnOiAnaG9tZScsXG4gICAgICB0ZW5hbnQ6IHRlbmFudDIuaWQsXG4gICAgICB0aXRsZTogJ1BhZ2UgZm9yIFRlbmFudCAyJyxcbiAgICB9LFxuICB9KVxuXG4gIGF3YWl0IHBheWxvYWQuY3JlYXRlKHtcbiAgICBjb2xsZWN0aW9uOiAncGFnZXMnLFxuICAgIGRhdGE6IHtcbiAgICAgIHNsdWc6ICdob21lJyxcbiAgICAgIHRlbmFudDogdGVuYW50My5pZCxcbiAgICAgIHRpdGxlOiAnUGFnZSBmb3IgVGVuYW50IDMnLFxuICAgIH0sXG4gIH0pXG59XG4iXSwibmFtZXMiOlsic2VlZCIsInBheWxvYWQiLCJ0ZW5hbnQxIiwiY3JlYXRlIiwiY29sbGVjdGlvbiIsImRhdGEiLCJuYW1lIiwic2x1ZyIsImRvbWFpbiIsInRlbmFudDIiLCJ0ZW5hbnQzIiwiZW1haWwiLCJwYXNzd29yZCIsInJvbGVzIiwidGVuYW50cyIsInRlbmFudCIsImlkIiwidXNlcm5hbWUiLCJ0aXRsZSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/seed.ts\n");

/***/ }),

/***/ "(rsc)/./src/utilities/extractID.ts":
/*!************************************!*\
  !*** ./src/utilities/extractID.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   extractID: () => (/* binding */ extractID)\n/* harmony export */ });\nconst extractID = (objectOrID)=>{\n    if (objectOrID && typeof objectOrID === 'object') return objectOrID.id;\n    return objectOrID;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvdXRpbGl0aWVzL2V4dHJhY3RJRC50cyIsIm1hcHBpbmdzIjoiOzs7O0FBR08sTUFBTUEsWUFBWSxDQUN2QkM7SUFFQSxJQUFJQSxjQUFjLE9BQU9BLGVBQWUsVUFBVSxPQUFPQSxXQUFXQyxFQUFFO0lBRXRFLE9BQU9EO0FBQ1QsRUFBQyIsInNvdXJjZXMiOlsiL2hvbWUvbWlsZGZpcmUvcmVwb3MvQUFEUy9leGFtcGxlLXBheWxvYWQvbXVsdGktdGVuYW50LWV4YW1wbGUvbXVsdGktdGVuYW50LWV4YW1wbGUvc3JjL3V0aWxpdGllcy9leHRyYWN0SUQudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29uZmlnIH0gZnJvbSAnQC9wYXlsb2FkLXR5cGVzJ1xuaW1wb3J0IHR5cGUgeyBDb2xsZWN0aW9uU2x1ZyB9IGZyb20gJ3BheWxvYWQnXG5cbmV4cG9ydCBjb25zdCBleHRyYWN0SUQgPSA8VCBleHRlbmRzIENvbmZpZ1snY29sbGVjdGlvbnMnXVtDb2xsZWN0aW9uU2x1Z10+KFxuICBvYmplY3RPcklEOiBUIHwgVFsnaWQnXSxcbik6IFRbJ2lkJ10gPT4ge1xuICBpZiAob2JqZWN0T3JJRCAmJiB0eXBlb2Ygb2JqZWN0T3JJRCA9PT0gJ29iamVjdCcpIHJldHVybiBvYmplY3RPcklELmlkXG5cbiAgcmV0dXJuIG9iamVjdE9ySURcbn1cbiJdLCJuYW1lcyI6WyJleHRyYWN0SUQiLCJvYmplY3RPcklEIiwiaWQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/utilities/extractID.ts\n");

/***/ }),

/***/ "(rsc)/./src/utilities/getCollectionIDType.ts":
/*!**********************************************!*\
  !*** ./src/utilities/getCollectionIDType.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getCollectionIDType: () => (/* binding */ getCollectionIDType)\n/* harmony export */ });\nconst getCollectionIDType = ({ collectionSlug, payload })=>{\n    return payload.collections[collectionSlug]?.customIDType ?? payload.db.defaultIDType;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvdXRpbGl0aWVzL2dldENvbGxlY3Rpb25JRFR5cGUudHMiLCJtYXBwaW5ncyI6Ijs7OztBQU1PLE1BQU1BLHNCQUFzQixDQUFDLEVBQUVDLGNBQWMsRUFBRUMsT0FBTyxFQUFRO0lBQ25FLE9BQU9BLFFBQVFDLFdBQVcsQ0FBQ0YsZUFBZSxFQUFFRyxnQkFBZ0JGLFFBQVFHLEVBQUUsQ0FBQ0MsYUFBYTtBQUN0RixFQUFDIiwic291cmNlcyI6WyIvaG9tZS9taWxkZmlyZS9yZXBvcy9BQURTL2V4YW1wbGUtcGF5bG9hZC9tdWx0aS10ZW5hbnQtZXhhbXBsZS9tdWx0aS10ZW5hbnQtZXhhbXBsZS9zcmMvdXRpbGl0aWVzL2dldENvbGxlY3Rpb25JRFR5cGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBDb2xsZWN0aW9uU2x1ZywgUGF5bG9hZCB9IGZyb20gJ3BheWxvYWQnXG5cbnR5cGUgQXJncyA9IHtcbiAgY29sbGVjdGlvblNsdWc6IENvbGxlY3Rpb25TbHVnXG4gIHBheWxvYWQ6IFBheWxvYWRcbn1cbmV4cG9ydCBjb25zdCBnZXRDb2xsZWN0aW9uSURUeXBlID0gKHsgY29sbGVjdGlvblNsdWcsIHBheWxvYWQgfTogQXJncyk6ICdudW1iZXInIHwgJ3RleHQnID0+IHtcbiAgcmV0dXJuIHBheWxvYWQuY29sbGVjdGlvbnNbY29sbGVjdGlvblNsdWddPy5jdXN0b21JRFR5cGUgPz8gcGF5bG9hZC5kYi5kZWZhdWx0SURUeXBlXG59XG4iXSwibmFtZXMiOlsiZ2V0Q29sbGVjdGlvbklEVHlwZSIsImNvbGxlY3Rpb25TbHVnIiwicGF5bG9hZCIsImNvbGxlY3Rpb25zIiwiY3VzdG9tSURUeXBlIiwiZGIiLCJkZWZhdWx0SURUeXBlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/utilities/getCollectionIDType.ts\n");

/***/ }),

/***/ "(rsc)/./src/utilities/getUserTenantIDs.ts":
/*!*******************************************!*\
  !*** ./src/utilities/getUserTenantIDs.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getUserTenantIDs: () => (/* binding */ getUserTenantIDs)\n/* harmony export */ });\n/* harmony import */ var _extractID__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./extractID */ \"(rsc)/./src/utilities/extractID.ts\");\n\n/**\n * Returns array of all tenant IDs assigned to a user\n *\n * @param user - User object with tenants field\n * @param role - Optional role to filter by\n */ const getUserTenantIDs = (user, role)=>{\n    if (!user) {\n        return [];\n    }\n    return user?.tenants?.reduce((acc, { roles, tenant })=>{\n        if (role && !roles.includes(role)) {\n            return acc;\n        }\n        if (tenant) {\n            acc.push((0,_extractID__WEBPACK_IMPORTED_MODULE_0__.extractID)(tenant));\n        }\n        return acc;\n    }, []) || [];\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvdXRpbGl0aWVzL2dldFVzZXJUZW5hbnRJRHMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFDdUM7QUFFdkM7Ozs7O0NBS0MsR0FDTSxNQUFNQyxtQkFBbUIsQ0FDOUJDLE1BQ0FDO0lBRUEsSUFBSSxDQUFDRCxNQUFNO1FBQ1QsT0FBTyxFQUFFO0lBQ1g7SUFFQSxPQUNFQSxNQUFNRSxTQUFTQyxPQUF1QixDQUFDQyxLQUFLLEVBQUVDLEtBQUssRUFBRUMsTUFBTSxFQUFFO1FBQzNELElBQUlMLFFBQVEsQ0FBQ0ksTUFBTUUsUUFBUSxDQUFDTixPQUFPO1lBQ2pDLE9BQU9HO1FBQ1Q7UUFFQSxJQUFJRSxRQUFRO1lBQ1ZGLElBQUlJLElBQUksQ0FBQ1YscURBQVNBLENBQUNRO1FBQ3JCO1FBRUEsT0FBT0Y7SUFDVCxHQUFHLEVBQUUsS0FBSyxFQUFFO0FBRWhCLEVBQUMiLCJzb3VyY2VzIjpbIi9ob21lL21pbGRmaXJlL3JlcG9zL0FBRFMvZXhhbXBsZS1wYXlsb2FkL211bHRpLXRlbmFudC1leGFtcGxlL211bHRpLXRlbmFudC1leGFtcGxlL3NyYy91dGlsaXRpZXMvZ2V0VXNlclRlbmFudElEcy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IFRlbmFudCwgVXNlciB9IGZyb20gJy4uL3BheWxvYWQtdHlwZXMnXG5pbXBvcnQgeyBleHRyYWN0SUQgfSBmcm9tICcuL2V4dHJhY3RJRCdcblxuLyoqXG4gKiBSZXR1cm5zIGFycmF5IG9mIGFsbCB0ZW5hbnQgSURzIGFzc2lnbmVkIHRvIGEgdXNlclxuICpcbiAqIEBwYXJhbSB1c2VyIC0gVXNlciBvYmplY3Qgd2l0aCB0ZW5hbnRzIGZpZWxkXG4gKiBAcGFyYW0gcm9sZSAtIE9wdGlvbmFsIHJvbGUgdG8gZmlsdGVyIGJ5XG4gKi9cbmV4cG9ydCBjb25zdCBnZXRVc2VyVGVuYW50SURzID0gKFxuICB1c2VyOiBudWxsIHwgVXNlcixcbiAgcm9sZT86IE5vbk51bGxhYmxlPFVzZXJbJ3RlbmFudHMnXT5bbnVtYmVyXVsncm9sZXMnXVtudW1iZXJdLFxuKTogVGVuYW50WydpZCddW10gPT4ge1xuICBpZiAoIXVzZXIpIHtcbiAgICByZXR1cm4gW11cbiAgfVxuXG4gIHJldHVybiAoXG4gICAgdXNlcj8udGVuYW50cz8ucmVkdWNlPFRlbmFudFsnaWQnXVtdPigoYWNjLCB7IHJvbGVzLCB0ZW5hbnQgfSkgPT4ge1xuICAgICAgaWYgKHJvbGUgJiYgIXJvbGVzLmluY2x1ZGVzKHJvbGUpKSB7XG4gICAgICAgIHJldHVybiBhY2NcbiAgICAgIH1cblxuICAgICAgaWYgKHRlbmFudCkge1xuICAgICAgICBhY2MucHVzaChleHRyYWN0SUQodGVuYW50KSlcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGFjY1xuICAgIH0sIFtdKSB8fCBbXVxuICApXG59XG4iXSwibmFtZXMiOlsiZXh0cmFjdElEIiwiZ2V0VXNlclRlbmFudElEcyIsInVzZXIiLCJyb2xlIiwidGVuYW50cyIsInJlZHVjZSIsImFjYyIsInJvbGVzIiwidGVuYW50IiwiaW5jbHVkZXMiLCJwdXNoIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/utilities/getUserTenantIDs.ts\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/next@15.5.6_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.77.4/node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!*********************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/next@15.5.6_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.77.4/node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \*********************************************************************************************************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "./work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "?08b1":
/*!****************************!*\
  !*** bufferutil (ignored) ***!
  \****************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "?5fe5":
/*!********************************!*\
  !*** utf-8-validate (ignored) ***!
  \********************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "@payloadcms/db-postgres":
/*!******************************************!*\
  !*** external "@payloadcms/db-postgres" ***!
  \******************************************/
/***/ ((module) => {

"use strict";
module.exports = import("@payloadcms/db-postgres");;

/***/ }),

/***/ "assert":
/*!*************************!*\
  !*** external "assert" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("assert");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ "child_process":
/*!********************************!*\
  !*** external "child_process" ***!
  \********************************/
/***/ ((module) => {

"use strict";
module.exports = require("child_process");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "dns":
/*!**********************!*\
  !*** external "dns" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("dns");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ "fs/promises":
/*!******************************!*\
  !*** external "fs/promises" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("fs/promises");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ "module":
/*!*************************!*\
  !*** external "module" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("module");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("net");

/***/ }),

/***/ "next/dist/compiled/@vercel/og/index.node.js":
/*!**************************************************************!*\
  !*** external "next/dist/compiled/@vercel/og/index.node.js" ***!
  \**************************************************************/
/***/ ((module) => {

"use strict";
module.exports = import("next/dist/compiled/@vercel/og/index.node.js");;

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "next/dist/shared/lib/no-fallback-error.external":
/*!******************************************************************!*\
  !*** external "next/dist/shared/lib/no-fallback-error.external" ***!
  \******************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/no-fallback-error.external");

/***/ }),

/***/ "next/dist/shared/lib/router/utils/app-paths":
/*!**************************************************************!*\
  !*** external "next/dist/shared/lib/router/utils/app-paths" ***!
  \**************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/app-paths");

/***/ }),

/***/ "node:assert":
/*!******************************!*\
  !*** external "node:assert" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:assert");

/***/ }),

/***/ "node:async_hooks":
/*!***********************************!*\
  !*** external "node:async_hooks" ***!
  \***********************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:async_hooks");

/***/ }),

/***/ "node:buffer":
/*!******************************!*\
  !*** external "node:buffer" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:buffer");

/***/ }),

/***/ "node:console":
/*!*******************************!*\
  !*** external "node:console" ***!
  \*******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:console");

/***/ }),

/***/ "node:crypto":
/*!******************************!*\
  !*** external "node:crypto" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:crypto");

/***/ }),

/***/ "node:diagnostics_channel":
/*!*******************************************!*\
  !*** external "node:diagnostics_channel" ***!
  \*******************************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:diagnostics_channel");

/***/ }),

/***/ "node:dns":
/*!***************************!*\
  !*** external "node:dns" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:dns");

/***/ }),

/***/ "node:events":
/*!******************************!*\
  !*** external "node:events" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:events");

/***/ }),

/***/ "node:fs":
/*!**************************!*\
  !*** external "node:fs" ***!
  \**************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:fs");

/***/ }),

/***/ "node:fs/promises":
/*!***********************************!*\
  !*** external "node:fs/promises" ***!
  \***********************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:fs/promises");

/***/ }),

/***/ "node:http":
/*!****************************!*\
  !*** external "node:http" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:http");

/***/ }),

/***/ "node:http2":
/*!*****************************!*\
  !*** external "node:http2" ***!
  \*****************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:http2");

/***/ }),

/***/ "node:module":
/*!******************************!*\
  !*** external "node:module" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:module");

/***/ }),

/***/ "node:net":
/*!***************************!*\
  !*** external "node:net" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:net");

/***/ }),

/***/ "node:os":
/*!**************************!*\
  !*** external "node:os" ***!
  \**************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:os");

/***/ }),

/***/ "node:path":
/*!****************************!*\
  !*** external "node:path" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:path");

/***/ }),

/***/ "node:perf_hooks":
/*!**********************************!*\
  !*** external "node:perf_hooks" ***!
  \**********************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:perf_hooks");

/***/ }),

/***/ "node:process":
/*!*******************************!*\
  !*** external "node:process" ***!
  \*******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:process");

/***/ }),

/***/ "node:querystring":
/*!***********************************!*\
  !*** external "node:querystring" ***!
  \***********************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:querystring");

/***/ }),

/***/ "node:sqlite":
/*!******************************!*\
  !*** external "node:sqlite" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:sqlite");

/***/ }),

/***/ "node:stream":
/*!******************************!*\
  !*** external "node:stream" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:stream");

/***/ }),

/***/ "node:stream/web":
/*!**********************************!*\
  !*** external "node:stream/web" ***!
  \**********************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:stream/web");

/***/ }),

/***/ "node:tls":
/*!***************************!*\
  !*** external "node:tls" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:tls");

/***/ }),

/***/ "node:url":
/*!***************************!*\
  !*** external "node:url" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:url");

/***/ }),

/***/ "node:util":
/*!****************************!*\
  !*** external "node:util" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:util");

/***/ }),

/***/ "node:util/types":
/*!**********************************!*\
  !*** external "node:util/types" ***!
  \**********************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:util/types");

/***/ }),

/***/ "node:worker_threads":
/*!**************************************!*\
  !*** external "node:worker_threads" ***!
  \**************************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:worker_threads");

/***/ }),

/***/ "node:zlib":
/*!****************************!*\
  !*** external "node:zlib" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:zlib");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "string_decoder":
/*!*********************************!*\
  !*** external "string_decoder" ***!
  \*********************************/
/***/ ((module) => {

"use strict";
module.exports = require("string_decoder");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tls");

/***/ }),

/***/ "tty":
/*!**********************!*\
  !*** external "tty" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tty");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ "worker_threads":
/*!*********************************!*\
  !*** external "worker_threads" ***!
  \*********************************/
/***/ ((module) => {

"use strict";
module.exports = require("worker_threads");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/date-fns@4.1.0","vendor-chunks/next@15.5.6_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.77.4","vendor-chunks/@payloadcms+ui@3.64.0_@types+react@19.0.1_monaco-editor@0.54.0_next@15.5.6_react-dom@19_6d165f99527442179029a7bd1caf2759","vendor-chunks/payload@3.64.0_graphql@16.12.0_typescript@5.5.2","vendor-chunks/undici@7.10.0","vendor-chunks/lexical@0.35.0","vendor-chunks/@payloadcms+next@3.64.0_@types+react@19.0.1_graphql@16.12.0_monaco-editor@0.54.0_next@1_fbebdb68d675befed4124b29602e4e61","vendor-chunks/ajv@8.17.1","vendor-chunks/@payloadcms+richtext-lexical@3.64.0_@faceless-ui+modal@3.0.0_react-dom@19.0.0_react@19._9992600ceae037be32a90d517f8b97aa","vendor-chunks/@lexical+table@0.35.0","vendor-chunks/ws@8.18.3","vendor-chunks/jsox@1.2.121","vendor-chunks/@payloadcms+plugin-multi-tenant@3.64.0_@payloadcms+ui@3.64.0_@types+react@19.0.1_monaco_8af145a0e04829d2ebd64574d607c797","vendor-chunks/@payloadcms+translations@3.64.0","vendor-chunks/image-size@2.0.2","vendor-chunks/@lexical+list@0.35.0","vendor-chunks/pino-pretty@13.1.2","vendor-chunks/qs-esm@7.0.2","vendor-chunks/jose@5.9.6","vendor-chunks/fast-uri@3.1.0","vendor-chunks/pino@9.14.0","vendor-chunks/busboy@1.6.0","vendor-chunks/file-type@19.3.0","vendor-chunks/@lexical+utils@0.35.0","vendor-chunks/@lexical+selection@0.35.0","vendor-chunks/ipaddr.js@2.2.0","vendor-chunks/@lexical+rich-text@0.35.0","vendor-chunks/console-table-printer@2.12.1","vendor-chunks/pluralize@8.0.0","vendor-chunks/http-status@2.1.0","vendor-chunks/safe-stable-stringify@2.5.0","vendor-chunks/get-tsconfig@4.8.1","vendor-chunks/bson-objectid@2.0.4","vendor-chunks/croner@9.1.0","vendor-chunks/@lexical+clipboard@0.35.0","vendor-chunks/sonic-boom@4.2.0","vendor-chunks/thread-stream@3.1.0","vendor-chunks/path-to-regexp@6.3.0","vendor-chunks/@pinojs+redact@0.4.0","vendor-chunks/dataloader@2.2.3","vendor-chunks/strtok3@8.1.0","vendor-chunks/fast-copy@3.0.2","vendor-chunks/simple-wcswidth@1.1.2","vendor-chunks/pino-std-serializers@7.0.0","vendor-chunks/@lexical+html@0.35.0","vendor-chunks/token-types@6.1.1","vendor-chunks/streamsearch@1.1.0","vendor-chunks/uint8array-extras@1.5.0","vendor-chunks/ci-info@4.3.1","vendor-chunks/dateformat@4.6.3","vendor-chunks/peek-readable@5.4.2","vendor-chunks/fast-safe-stringify@2.1.1","vendor-chunks/secure-json-parse@4.1.0","vendor-chunks/colorette@2.0.20","vendor-chunks/@borewit+text-codec@0.1.1","vendor-chunks/json-schema-traverse@1.0.0","vendor-chunks/deepmerge@4.3.1","vendor-chunks/split2@4.2.0","vendor-chunks/pino-abstract-transport@2.0.0","vendor-chunks/uuid@10.0.0","vendor-chunks/end-of-stream@1.4.5","vendor-chunks/quick-format-unescaped@4.0.4","vendor-chunks/fast-deep-equal@3.1.3","vendor-chunks/pump@3.0.3","vendor-chunks/ieee754@1.2.1","vendor-chunks/resolve-pkg-maps@1.0.0","vendor-chunks/sanitize-filename@1.6.3","vendor-chunks/on-exit-leak-free@2.1.2","vendor-chunks/escape-html@1.0.3","vendor-chunks/@lexical+react@0.35.0_react-dom@19.0.0_react@19.0.0__react@19.0.0_yjs@13.6.27","vendor-chunks/@lexical+headless@0.35.0","vendor-chunks/atomic-sleep@1.0.0","vendor-chunks/scmp@2.1.0","vendor-chunks/truncate-utf8-bytes@1.0.2","vendor-chunks/once@1.4.0","vendor-chunks/wrappy@1.0.2"], () => (__webpack_exec__("(rsc)/./node_modules/.pnpm/next@15.5.6_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.77.4/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2F(payload)%2Fapi%2F%5B...slug%5D%2Froute&page=%2F(payload)%2Fapi%2F%5B...slug%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2F(payload)%2Fapi%2F%5B...slug%5D%2Froute.ts&appDir=%2Fhome%2Fmildfire%2Frepos%2FAADS%2Fexample-payload%2Fmulti-tenant-example%2Fmulti-tenant-example%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fmildfire%2Frepos%2FAADS%2Fexample-payload%2Fmulti-tenant-example%2Fmulti-tenant-example&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!")));
module.exports = __webpack_exports__;

})();